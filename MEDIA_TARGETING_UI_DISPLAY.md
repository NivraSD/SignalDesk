# Media Targeting UI Display - Implementation Summary

## Problem
Media targeting was being generated by the opportunity detector and stored in the database, but it wasn't visible anywhere in the UI. Users couldn't see which journalists would care about an opportunity or why.

## Solution
Added media targeting display to:
1. **Opportunity Details Panel** - Shows full media targeting strategy when viewing an opportunity
2. **Opportunity Overview sent to NIV** - Includes media targeting in the context message when executing

## Changes Made

### 1. TypeScript Types (`OpportunitiesModule.tsx` - Lines 46-63)

Added `MediaTargeting` interface:
```typescript
interface MediaTargeting {
  primary_journalist_types: string[]
  target_industries: string[]
  target_outlets: string[]
  reasoning: string
  beat_keywords: string[]
}

interface StrategicContext {
  // ... existing fields ...
  media_targeting?: MediaTargeting  // â† Added
}
```

### 2. Opportunity Details Panel (`OpportunitiesModule.tsx` - Lines 746-819)

Added visual display of media targeting strategy after "Expected Impact" section:

**Features:**
- **Gradient Card Design**: Pink/purple gradient background to stand out
- **Reasoning Section**: Explains WHY these journalists would care
- **Journalist Types**: Pink badges showing target journalist types (e.g., "PR trade journalists")
- **Priority Outlets**: Purple badges showing target publications (first 6, with "+X more" indicator)
- **Database Industries**: Blue badges showing which journalist database industries to query
- **Beat Keywords**: Gray badges showing keywords for filtering by beat

**Visual Hierarchy:**
- Uses color-coded badges for different information types
- Conditional rendering (only shows sections that have data)
- Responsive flex layout with wrapping

### 3. Opportunity Overview for NIV (`OpportunitiesModule.tsx` - Lines 230-246)

Added media targeting section to the markdown overview sent to NIV when executing an opportunity:

```markdown
## Media Targeting Strategy

**Why These Journalists Care:**
[reasoning text]

**Target Journalist Types:**
- [type 1]
- [type 2]

**Priority Outlets:**
[outlet list]

**Database Industries:**
[industry list]

**Beat Keywords:**
[keyword list]
```

This ensures NIV has the media targeting context when generating media lists.

## Example Display

When viewing an opportunity with media targeting, users will see:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ Media Targeting Strategy                             â”‚
â”‚                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Why these journalists care:                         â”‚ â”‚
â”‚ â”‚ Tech and security journalists are actively covering â”‚ â”‚
â”‚ â”‚ this breach and looking for expert commentary...    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                          â”‚
â”‚ Target Journalist Types:                                â”‚
â”‚ [Tech journalists covering cybersecurity]               â”‚
â”‚ [Enterprise tech reporters]                             â”‚
â”‚                                                          â”‚
â”‚ Priority Outlets:                                       â”‚
â”‚ [TechCrunch] [The Verge] [SecurityWeek] [Dark Reading] â”‚
â”‚ [Ars Technica] [WSJ Tech] +2 more                      â”‚
â”‚                                                          â”‚
â”‚ Database Industries:                                    â”‚
â”‚ [technology] [cybersecurity]                           â”‚
â”‚                                                          â”‚
â”‚ Beat Keywords:                                          â”‚
â”‚ [cybersecurity] [enterprise security] [data breaches]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Benefits

1. **Transparency**: Users can see exactly which journalists will be targeted and why
2. **Strategic Context**: The reasoning explains the PR strategy behind the targeting
3. **Informed Decisions**: Users can decide if they agree with the targeting before executing
4. **NIV Context**: When executing through NIV, the assistant has this context to generate better media lists
5. **Review & Adjust**: Users can see if the targeting makes sense before committing resources

## Testing

To test the feature:

1. **Run Opportunity Detection**:
   - Trigger opportunity detection for your organization
   - Check logs for `ğŸ“° Media targeting for...` messages
   - Verify opportunities have media_targeting data

2. **View Opportunity Details**:
   - Open Opportunities module
   - Click on an opportunity to view details
   - Scroll to "Media Targeting Strategy" section
   - Verify all fields are displayed correctly

3. **Execute Opportunity**:
   - Click "Execute" on an opportunity with media targeting
   - Check NIV's initial message includes "Media Targeting Strategy" section
   - Verify NIV uses this context when generating media lists

4. **Verify Data Quality**:
   - Check that journalist types are specific and relevant
   - Verify outlets match the opportunity type
   - Ensure reasoning makes strategic sense

## Files Changed

- `/src/components/modules/OpportunitiesModule.tsx`:
  - Added `MediaTargeting` interface (lines 46-52)
  - Updated `StrategicContext` interface (line 62)
  - Added media targeting display UI (lines 746-819)
  - Added media targeting to opportunity overview (lines 230-246)

## Next Steps

1. **Monitor Data Quality**: Review media targeting suggestions from opportunity detector
2. **User Feedback**: Collect feedback on whether targeting makes strategic sense
3. **Refinement**: Adjust opportunity detector prompt if targeting needs improvement
4. **Expand Database**: Add more journalists to database based on targeting needs identified
