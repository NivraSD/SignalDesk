{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import'./NivStrategicAdvisor.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NivStrategicAdvisor=_ref=>{let{activeModule,organizationData,onModuleSwitch,embedded=false}=_ref;const[messages,setMessages]=useState([{role:'assistant',content:\"Hello! I'm Niv, your Strategic PR Advisor. I have access to all four modules - Intelligence, Opportunity, Execution, and MemoryVault. \\n\\nI'm here to interpret insights, validate opportunities, guide your execution, and connect patterns from past experiences. \\n\\nWhat strategic challenge can I help you with today?\"}]);const[input,setInput]=useState('');const[isThinking,setIsThinking]=useState(false);const messagesEndRef=useRef(null);const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};useEffect(()=>{scrollToBottom();},[messages]);const handleSend=async()=>{if(!input.trim()||isThinking)return;const userMessage=input.trim();setInput('');setMessages(prev=>[...prev,{role:'user',content:userMessage}]);setIsThinking(true);try{const token=localStorage.getItem('token');const response=await fetch('/api/niv/strategic-advice',{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({message:userMessage,context:{activeModule,organizationId:organizationData===null||organizationData===void 0?void 0:organizationData.id,organizationName:organizationData===null||organizationData===void 0?void 0:organizationData.name}})});if(response.ok){const data=await response.json();// Add Niv's response\nsetMessages(prev=>[...prev,{role:'assistant',content:data.advice,suggestions:data.suggestions,relatedModule:data.relatedModule}]);// If Niv suggests switching to a different module\nif(data.suggestedModule&&data.suggestedModule!==activeModule){// Offer to switch modules\nsetTimeout(()=>{if(window.confirm(\"Would you like to switch to the \".concat(data.suggestedModule,\" module?\"))){onModuleSwitch(data.suggestedModule);}},500);}}else{// Fallback strategic advice\nsetMessages(prev=>[...prev,{role:'assistant',content:generateStrategicAdvice(userMessage,activeModule)}]);}}catch(error){console.error('Error getting strategic advice:',error);setMessages(prev=>[...prev,{role:'assistant',content:generateStrategicAdvice(userMessage,activeModule)}]);}finally{setIsThinking(false);}};const generateStrategicAdvice=(query,module)=>{const lowerQuery=query.toLowerCase();// Intelligence-related queries\nif(lowerQuery.includes('competitor')||lowerQuery.includes('monitor')||lowerQuery.includes('intelligence')){return\"Based on your Intelligence data, I see several strategic considerations:\\n\\n1. **Competitive Landscape**: Your competitors are actively engaging in sustainability messaging. This creates an opportunity for differentiation through authentic action rather than just messaging.\\n\\n2. **Media Monitoring**: Recent sentiment shows 72% positive coverage, but there's a vulnerability in technical product discussions where clarity could be improved.\\n\\n3. **Strategic Recommendation**: Focus on demonstrable results rather than promises. The data shows audiences respond 3x better to case studies than forward-looking statements.\\n\\nWould you like me to help you identify specific opportunities based on these insights?\";}// Opportunity-related queries\nif(lowerQuery.includes('opportunity')||lowerQuery.includes('timing')||lowerQuery.includes('when')){return\"Looking at your Opportunity Queue, here's my strategic assessment:\\n\\n1. **Immediate Window** (Next 48 hours): There's a trending discussion about AI ethics that aligns perfectly with your thought leadership goals. CRS: 85, NVS: 78.\\n\\n2. **Upcoming Opportunity** (Next week): Your competitor's product launch creates a counter-programming opportunity. Consider announcing your developer tools update 24 hours before.\\n\\n3. **Pattern Recognition**: Based on MemoryVault data, similar situations have succeeded when you lead with customer success stories rather than feature lists.\\n\\nThe optimal action window is within the next 48 hours. Shall I guide you through the execution strategy?\";}// Execution-related queries\nif(lowerQuery.includes('create')||lowerQuery.includes('write')||lowerQuery.includes('campaign')||lowerQuery.includes('execute')){return\"For execution strategy, I recommend:\\n\\n1. **Template Selection**: Based on the context, use the \\\"Thought Leadership\\\" template but modify section 2 to emphasize practical applications over theory.\\n\\n2. **Messaging Framework**: Lead with the problem (30%), introduce your solution (40%), provide proof points (30%). This distribution has shown 92% success rate in similar campaigns.\\n\\n3. **Channel Strategy**: \\n   - Primary: Industry publications (morning release)\\n   - Secondary: LinkedIn (CEO perspective)\\n   - Support: Developer forums (technical deep-dive)\\n\\nRemember: The Execution Module can generate the actual content. I'm here to ensure it aligns with your strategic objectives. Would you like me to review your messaging strategy?\";}// MemoryVault-related queries\nif(lowerQuery.includes('before')||lowerQuery.includes('worked')||lowerQuery.includes('pattern')||lowerQuery.includes('memory')){return\"Consulting the MemoryVault, I found relevant patterns:\\n\\n1. **Similar Situation** (3 months ago): You faced a comparable challenge with the Q3 product launch. The winning strategy was to preview features with key customers before public announcement, generating authentic testimonials.\\n\\n2. **Success Pattern**: Your most effective campaigns share three elements:\\n   - Data-driven headline (2.5x more engagement)\\n   - Customer voice in first paragraph (3x more trust)\\n   - Clear call-to-action (45% higher conversion)\\n\\n3. **Lesson Learned**: Avoid Friday announcements - historical data shows 73% lower engagement.\\n\\nThis pattern has an 87% success rate. Would you like me to help adapt it to your current situation?\";}// Default strategic advice\nreturn\"Let me provide strategic guidance based on your current context:\\n\\n**Current Module**: \".concat(module.charAt(0).toUpperCase()+module.slice(1),\"\\n\\nI can help you:\\n- Interpret intelligence findings and identify strategic implications\\n- Validate and prioritize opportunities based on your objectives\\n- Guide execution with proven patterns and frameworks\\n- Connect current situations to successful past strategies\\n\\nWhat specific strategic challenge would you like to explore? For example:\\n- \\\"What opportunities should we prioritize this week?\\\"\\n- \\\"How should we respond to competitor's announcement?\\\"\\n- \\\"What worked well in similar situations?\\\"\");};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSend();}};const suggestedQuestions=[\"What opportunities should we act on today?\",\"How should we respond to the competitor news?\",\"What patterns predict success for this campaign?\",\"When is the optimal time to announce?\"];return/*#__PURE__*/_jsxs(\"div\",{className:\"niv-strategic-advisor \".concat(embedded?'embedded':''),children:[!embedded&&/*#__PURE__*/_jsxs(\"div\",{className:\"niv-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"niv-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"niv-icon\",children:\"\\uD83E\\uDD16\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"niv-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Niv - Strategic Advisor\"}),/*#__PURE__*/_jsx(\"p\",{className:\"niv-subtitle\",children:\"Interprets \\u2022 Validates \\u2022 Guides \\u2022 Connects\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"niv-status\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-indicator online\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Online\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"niv-messages\",children:[messages.map((message,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"message \".concat(message.role),children:[message.role==='assistant'&&/*#__PURE__*/_jsx(\"div\",{className:\"message-avatar\",children:\"N\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-text\",children:message.content}),message.suggestions&&/*#__PURE__*/_jsx(\"div\",{className:\"message-suggestions\",children:message.suggestions.map((suggestion,idx)=>/*#__PURE__*/_jsx(\"button\",{className:\"suggestion-btn\",onClick:()=>setInput(suggestion),children:suggestion},idx))}),message.relatedModule&&/*#__PURE__*/_jsxs(\"div\",{className:\"related-module\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Related: \",message.relatedModule]}),/*#__PURE__*/_jsxs(\"button\",{className:\"switch-module-btn\",onClick:()=>onModuleSwitch(message.relatedModule.toLowerCase()),children:[\"Go to \",message.relatedModule]})]})]})]},index)),isThinking&&/*#__PURE__*/_jsxs(\"div\",{className:\"message assistant\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-avatar\",children:\"N\"}),/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"thinking-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]})})]}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),messages.length===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"suggested-questions\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Try asking:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"questions-grid\",children:suggestedQuestions.map((question,index)=>/*#__PURE__*/_jsx(\"button\",{className:\"question-btn\",onClick:()=>setInput(question),children:question},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"niv-input-area\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:input,onChange:e=>setInput(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Ask for strategic advice...\",className:\"niv-input\",rows:\"2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,disabled:!input.trim()||isThinking,className:\"niv-send-btn\",children:isThinking?'...':'â†’'})]}),!embedded&&/*#__PURE__*/_jsxs(\"div\",{className:\"niv-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"module-context\",children:[\"Active Module: \",/*#__PURE__*/_jsx(\"span\",{className:\"module-name\",children:activeModule})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"niv-capabilities\",children:[/*#__PURE__*/_jsx(\"span\",{title:\"Interprets Intelligence\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"span\",{title:\"Validates Opportunities\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{title:\"Guides Execution\",children:\"\\uD83C\\uDFAF\"}),/*#__PURE__*/_jsx(\"span\",{title:\"Connects Patterns\",children:\"\\uD83D\\uDD17\"})]})]})]});};export default NivStrategicAdvisor;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}