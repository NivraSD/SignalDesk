{"ast":null,"code":"import React,{useState}from'react';import{X,Bot,Send,Sparkles,ChevronLeft,Maximize2,Minimize2}from'lucide-react';import supabaseApiService from'../../services/supabaseApiService';import SimplifiedMediaList from'./SimplifiedMediaList';import SimplifiedContentDraft from'./SimplifiedContentDraft';import SimplifiedStrategicPlanning from'./SimplifiedStrategicPlanning';import SimplifiedGenericContent from'./SimplifiedGenericContent';import OpportunityEngine from'../OpportunityEngine';import CrisisCommandCenter from'../CrisisCommandCenter';import Analytics from'../Analytics';import MemoryVault from'../MemoryVault';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkspaceContainer=_ref=>{var _workspace$context,_workspace$context2;let{workspace,nivContext,onClose,onNivRequest}=_ref;const[nivPanelWidth,setNivPanelWidth]=useState(30);// 30% default\nconst[nivInput,setNivInput]=useState('');const[nivMessages,setNivMessages]=useState([{type:'assistant',content:\"I'm here to help with \".concat(workspace.type,\". I can see you're working on \").concat(((_workspace$context=workspace.context)===null||_workspace$context===void 0?void 0:_workspace$context.name)||'this task',\". What would you like me to assist with?\")}]);const[isNivMinimized,setIsNivMinimized]=useState(false);// Get the appropriate workspace component\nconst getWorkspaceComponent=()=>{const components={'media-intelligence':SimplifiedMediaList,'content-generator':SimplifiedContentDraft,'strategic-planning':SimplifiedStrategicPlanning,'key-messaging':SimplifiedGenericContent,'faq-document':SimplifiedGenericContent,'social-content':SimplifiedGenericContent,'opportunity-engine':OpportunityEngine,'crisis-command':CrisisCommandCenter,'analytics':Analytics,'memory-vault':MemoryVault};const Component=components[workspace.type]||SimplifiedContentDraft;return/*#__PURE__*/_jsx(Component,{context:workspace.context});};const handleNivSubmit=async()=>{if(!nivInput.trim())return;const userMessage=nivInput.trim();setNivInput('');// Add user message\nsetNivMessages(prev=>[...prev,{type:'user',content:userMessage}]);try{// Call Niv API with workspace context\nconst response=await supabaseApiService.callNivChat({message:userMessage,messages:nivMessages,context:{workspace:workspace.type,workspaceContext:workspace.context,mode:'workspace_assistance'}});// Add Niv's response\nsetNivMessages(prev=>[...prev,{type:'assistant',content:response.response||getNivResponse(userMessage,workspace.type)}]);}catch(error){console.error('Error calling Niv:',error);// Fallback to context-aware response\nsetNivMessages(prev=>[...prev,{type:'assistant',content:getNivResponse(userMessage,workspace.type)}]);}onNivRequest({message:userMessage,workspace:workspace.type});};const getNivResponse=(input,workspaceType)=>{// Context-aware responses based on workspace\nconst responses={'media-intelligence':[\"I've identified 3 additional journalists who covered similar topics last week. Would you like me to add them to your list?\",\"Jennifer Chen's response rate is highest on Tuesday mornings. I suggest scheduling your outreach then.\",\"This journalist prefers exclusive angles. Consider offering early access to your announcement.\"],'content-generator':[\"This headline structure increased engagement by 40% in similar campaigns. Want me to adapt it?\",\"I notice the tone might be too promotional for WSJ. Let me suggest a more editorial approach.\",\"Adding a data point here about market growth would strengthen your argument.\"],'strategic-planning':[\"There's a potential conflict with a competitor event in Week 3. Should we adjust the timeline?\",\"Based on similar campaigns, adding a pre-launch media briefing increased coverage by 60%.\",\"Your critical path might be at risk due to content approval delays. Consider parallel workflows.\"]};const workspaceResponses=responses[workspaceType]||responses['content-generator'];return workspaceResponses[Math.floor(Math.random()*workspaceResponses.length)];};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'100%',background:'#0a0a0a',position:'relative'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:0,left:0,right:0,height:'50px',background:'rgba(0, 0, 0, 0.95)',borderBottom:'1px solid rgba(255, 255, 255, 0.1)',display:'flex',alignItems:'center',padding:'0 20px',zIndex:100},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:onClose,style:{display:'flex',alignItems:'center',gap:'8px',padding:'8px 12px',background:'transparent',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'6px',color:'#9ca3af',cursor:'pointer',fontSize:'13px',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='rgba(59, 130, 246, 0.3)';e.currentTarget.style.color='#60a5fa';},onMouseLeave:e=>{e.currentTarget.style.borderColor='rgba(255, 255, 255, 0.1)';e.currentTarget.style.color='#9ca3af';},children:[/*#__PURE__*/_jsx(ChevronLeft,{size:16}),\"Back to Niv\"]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,textAlign:'center',fontSize:'14px',fontWeight:'500',color:'#ffffff'},children:((_workspace$context2=workspace.context)===null||_workspace$context2===void 0?void 0:_workspace$context2.name)||workspace.type.replace('-',' ').replace(/\\b\\w/g,l=>l.toUpperCase())}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsNivMinimized(!isNivMinimized),style:{padding:'8px',background:'transparent',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'6px',color:'#9ca3af',cursor:'pointer',display:'flex',alignItems:'center',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.borderColor='rgba(59, 130, 246, 0.3)';e.currentTarget.style.color='#60a5fa';},onMouseLeave:e=>{e.currentTarget.style.borderColor='rgba(255, 255, 255, 0.1)';e.currentTarget.style.color='#9ca3af';},children:isNivMinimized?/*#__PURE__*/_jsx(Maximize2,{size:16}):/*#__PURE__*/_jsx(Minimize2,{size:16})})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:isNivMinimized?1:\"0 0 \".concat(100-nivPanelWidth,\"%\"),marginTop:'50px',padding:'20px',overflowY:'auto',transition:'flex 0.3s'},children:getWorkspaceComponent()}),!isNivMinimized&&/*#__PURE__*/_jsxs(\"div\",{style:{width:\"\".concat(nivPanelWidth,\"%\"),marginTop:'50px',borderLeft:'1px solid rgba(255, 255, 255, 0.1)',background:'rgba(0, 0, 0, 0.5)',display:'flex',flexDirection:'column',transition:'width 0.3s'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px',borderBottom:'1px solid rgba(255, 255, 255, 0.1)',background:'rgba(59, 130, 246, 0.05)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'32px',height:'32px',background:'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)',borderRadius:'6px',display:'flex',alignItems:'center',justifyContent:'center'},children:/*#__PURE__*/_jsx(Bot,{size:18,color:\"white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'14px',fontWeight:'600',color:'#ffffff'},children:\"Niv Assistant\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'11px',color:'#9ca3af'},children:[\"Contextual help for \",workspace.type.replace('-',' ')]})]})]})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,padding:'16px',overflowY:'auto',display:'flex',flexDirection:'column',gap:'12px'},children:nivMessages.map((message,index)=>/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:message.type==='user'?'flex-end':'flex-start'},children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:'85%',padding:'10px 12px',background:message.type==='user'?'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)':'rgba(255, 255, 255, 0.05)',borderRadius:'8px',fontSize:'13px',color:message.type==='user'?'white':'#e5e7eb',lineHeight:'1.4'},children:message.content})},index))}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'12px',borderTop:'1px solid rgba(255, 255, 255, 0.1)',background:'rgba(0, 0, 0, 0.5)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"textarea\",{value:nivInput,onChange:e=>setNivInput(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleNivSubmit(),placeholder:\"Ask Niv for help...\",style:{flex:1,padding:'8px 12px',background:'rgba(255, 255, 255, 0.05)',border:'1px solid rgba(255, 255, 255, 0.1)',borderRadius:'6px',color:'#e5e7eb',fontSize:'13px',outline:'none',resize:'vertical',minHeight:'36px',maxHeight:'100px',fontFamily:'inherit',lineHeight:'1.4'},onFocus:e=>{e.target.style.borderColor='rgba(59, 130, 246, 0.3)';e.target.style.background='rgba(255, 255, 255, 0.08)';},onBlur:e=>{e.target.style.borderColor='rgba(255, 255, 255, 0.1)';e.target.style.background='rgba(255, 255, 255, 0.05)';}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleNivSubmit(),disabled:!nivInput.trim(),style:{padding:'8px 12px',background:nivInput.trim()?'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)':'rgba(255, 255, 255, 0.1)',border:'none',borderRadius:'6px',color:nivInput.trim()?'white':'#6b7280',cursor:nivInput.trim()?'pointer':'not-allowed',display:'flex',alignItems:'center',gap:'6px',fontSize:'13px',transition:'opacity 0.2s'},onMouseEnter:e=>{if(nivInput.trim()){e.currentTarget.style.opacity='0.9';}},onMouseLeave:e=>{e.currentTarget.style.opacity='1';},children:/*#__PURE__*/_jsx(Send,{size:14})})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px',display:'flex',gap:'6px',flexWrap:'wrap'},children:['Suggest improvement','Check timing','Find similar'].map(action=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setNivInput(action);handleNivSubmit();},style:{padding:'4px 8px',background:'rgba(59, 130, 246, 0.1)',border:'1px solid rgba(59, 130, 246, 0.2)',borderRadius:'4px',color:'#60a5fa',fontSize:'11px',cursor:'pointer',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.background='rgba(59, 130, 246, 0.2)';e.currentTarget.style.borderColor='rgba(59, 130, 246, 0.3)';},onMouseLeave:e=>{e.currentTarget.style.background='rgba(59, 130, 246, 0.1)';e.currentTarget.style.borderColor='rgba(59, 130, 246, 0.2)';},children:[/*#__PURE__*/_jsx(Sparkles,{size:10,style:{display:'inline',marginRight:'4px'}}),action]},action))})]})]})]});};export default WorkspaceContainer;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}