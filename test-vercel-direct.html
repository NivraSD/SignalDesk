<\!DOCTYPE html>
<html>
<head>
    <title>SignalDesk Production Test</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f0f0f0; }
        .test { margin: 20px 0; padding: 15px; background: white; border-radius: 8px; }
        .success { border-left: 4px solid #4CAF50; }
        .error { border-left: 4px solid #f44336; }
        .pending { border-left: 4px solid #2196F3; }
        h1 { color: #333; }
        h2 { color: #666; font-size: 18px; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>SignalDesk Production Test - signal-desk.vercel.app</h1>
    
    <div id="tests"></div>
    
    <script>
        const API_BASE = 'https://signal-desk.vercel.app/api';
        const testsDiv = document.getElementById('tests');
        
        async function runTest(name, endpoint, method, body) {
            const testDiv = document.createElement('div');
            testDiv.className = 'test pending';
            testDiv.innerHTML = `<h2>${name}</h2><pre>Testing...</pre>`;
            testsDiv.appendChild(testDiv);
            
            try {
                const options = {
                    method: method,
                    headers: { 'Content-Type': 'application/json' }
                };
                if (body) options.body = JSON.stringify(body);
                
                const response = await fetch(API_BASE + endpoint, options);
                const data = await response.json();
                
                testDiv.className = data.success ? 'test success' : 'test error';
                testDiv.querySelector('pre').textContent = JSON.stringify({
                    status: response.status,
                    success: data.success,
                    powered_by: data.metadata?.powered_by,
                    has_content: \!\!data.content || \!\!data.response || \!\!data.plan,
                    error: data.error
                }, null, 2);
            } catch (error) {
                testDiv.className = 'test error';
                testDiv.querySelector('pre').textContent = 'Error: ' + error.message;
            }
        }
        
        // Run all tests
        (async () => {
            await runTest('Content Generator', '/content/generate', 'POST', {
                type: 'press_release',
                prompt: 'New product launch',
                tone: 'professional'
            });
            
            await runTest('Crisis Command', '/crisis/command-center', 'POST', {
                scenario: 'data breach',
                severity: 'high'
            });
            
            await runTest('AI Assistant', '/assistant/chat', 'POST', {
                message: 'How to improve PR?',
                conversationHistory: []
            });
            
            await runTest('Campaign Intelligence', '/campaign/intelligence', 'POST', {
                campaign: 'Q1 2024',
                objectives: ['awareness'],
                targetAudience: 'Tech professionals'
            });
            
            await runTest('Media List Builder', '/media/list-builder', 'POST', {
                industry: 'Technology',
                topics: ['AI'],
                tier: 'Tier 1'
            });
            
            await runTest('MemoryVault', '/memoryvault/project?projectId=1', 'POST', {
                query: 'What are key insights?',
                context: 'Recent campaign'
            });
        })();
    </script>
</body>
</html>
