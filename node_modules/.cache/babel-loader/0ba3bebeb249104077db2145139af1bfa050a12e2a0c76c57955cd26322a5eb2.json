{"ast":null,"code":"import _objectSpread from\"/Users/jonathanliebowitz/Desktop/SignalDesk/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import intelligentDiscoveryService from'../services/intelligentDiscoveryService';import{clearAllIntelligenceCache}from'../utils/clearCache';import'./UnifiedOnboarding.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UnifiedOnboarding=_ref=>{let{onComplete}=_ref;const navigate=useNavigate();const[currentStep,setCurrentStep]=useState(1);const[isAnalyzing,setIsAnalyzing]=useState(false);const[analysisComplete,setAnalysisComplete]=useState(false);// Only clear data if we're starting a fresh onboarding (no existing organization)\nuseEffect(()=>{const existingOrg=localStorage.getItem('signaldesk_organization');const existingProfile=localStorage.getItem('signaldesk_unified_profile');// Only clear if both are missing (truly fresh start)\nif(!existingOrg&&!existingProfile){console.log('ðŸ§¹ Starting fresh onboarding - clearing any stale data...');// Clear ALL intelligence caches first\nclearAllIntelligenceCache();// Clear any partial/stale profile data\nconst keysToClean=['opportunity_profile','signaldesk_onboarding'];keysToClean.forEach(key=>{localStorage.removeItem(key);console.log(\"  \\u2705 Cleared \".concat(key));});// Also clear the in-memory cache of the discovery service\nif(intelligentDiscoveryService&&intelligentDiscoveryService.cache){intelligentDiscoveryService.cache.clear();console.log('  âœ… Cleared discovery service in-memory cache');}}else{console.log('ðŸ“‹ Existing organization found, preserving data for re-onboarding');// Load existing data if re-onboarding\nif(existingProfile){try{const existing=JSON.parse(existingProfile);setProfile(prev=>_objectSpread(_objectSpread(_objectSpread({},prev),existing),{},{// Preserve form structure even if some fields are missing\norganization:existing.organization||prev.organization,competitors:existing.competitors||prev.competitors,monitoring_topics:existing.monitoring_topics||prev.monitoring_topics}));console.log('âœ… Loaded existing profile data');}catch(e){console.warn('Could not load existing profile:',e);}}}},[]);// Only run once on mount\nconst[profile,setProfile]=useState({// Organization Basics (used by Intelligence Hub)\norganization:{id:'',name:'',industry:'',website:'',description:''},// Competitors (used by Intelligence Hub)\ncompetitors:[],// Topics to Monitor (used by Intelligence Hub)\nmonitoring_topics:[],// Brand & Voice (Opportunity Engine)\nbrand:{voice:'professional',// professional, conversational, bold, technical\nrisk_tolerance:'moderate',// conservative, moderate, aggressive\nresponse_speed:'considered'// immediate, considered, strategic\n},// Key Messages (Opportunity Engine)\nmessaging:{core_value_props:[],proof_points:[],competitive_advantages:[],key_narratives:[]},// Media Strategy (Opportunity Engine)\nmedia:{preferred_tiers:[],// tier1_business, tier1_tech, trade, regional\njournalist_relationships:[],no_comment_topics:[],exclusive_partners:[]},// Spokespeople (Opportunity Engine)\nspokespeople:[],// Opportunity Preferences (Opportunity Engine)\nopportunities:{types:{competitor_weakness:true,narrative_vacuum:true,cascade_effect:true,crisis_prevention:true,alliance_opening:false},minimum_confidence:70,auto_execute_threshold:95}});const steps=[{id:1,title:'Organization',icon:'ðŸ¢',required:true},{id:2,title:'Brand Voice',icon:'ðŸŽ¯',required:true},{id:3,title:'Key Messages',icon:'ðŸ’¬',required:false},{id:4,title:'Media Strategy',icon:'ðŸ“°',required:false},{id:5,title:'Opportunities',icon:'ðŸ’Ž',required:true}];const handleNext=async()=>{if(validateCurrentStep()){// Run AI discovery when leaving step 1\nif(currentStep===1&&!analysisComplete&&profile.organization.name){console.log('ðŸš€ NEXT BUTTON CLICKED - Starting API call to analyze:',profile.organization.name);await analyzeOrganization();// Wait a moment for state to update\nawait new Promise(resolve=>setTimeout(resolve,500));}if(currentStep<steps.length){setCurrentStep(currentStep+1);}else{saveProfile();}}};const handleBack=()=>{if(currentStep>1){setCurrentStep(currentStep-1);}};const handleSkip=()=>{if(!steps[currentStep-1].required){if(currentStep<steps.length){setCurrentStep(currentStep+1);}else{saveProfile();}}};const validateCurrentStep=()=>{switch(currentStep){case 1:return profile.organization.name;// Only name required now\ncase 2:return true;// Has defaults for brand voice\ndefault:return true;}};const analyzeOrganization=async()=>{var _intelligentDiscovery;if(!profile.organization.name.trim())return;setIsAnalyzing(true);console.log('ðŸŽ¯ API CALL STARTING NOW for:',profile.organization.name);console.log('ðŸ“¡ Environment:',{supabaseUrl:intelligentDiscoveryService.supabaseUrl,hasKey:!!intelligentDiscoveryService.supabaseKey,keyPreview:((_intelligentDiscovery=intelligentDiscoveryService.supabaseKey)===null||_intelligentDiscovery===void 0?void 0:_intelligentDiscovery.substring(0,30))+'...'});try{console.log('ðŸ” Calling intelligentDiscoveryService.discoverCompanyIntelligence()...');const intelligence=await intelligentDiscoveryService.discoverCompanyIntelligence(profile.organization.name,profile.organization.website,profile.organization.description);console.log('ðŸ“¥ API Response received:',intelligence);if(intelligence&&intelligence.company){var _intelligence$stakeho,_intelligence$stakeho2,_intelligence$stakeho3,_intelligence$stakeho4,_intelligence$stakeho5,_discoveredProfile$co,_discoveredProfile$re,_discoveredProfile$me,_discoveredProfile$mo,_discoveredProfile$br,_discoveredProfile$br2,_discoveredProfile$br3,_discoveredProfile$me2,_discoveredProfile$me3,_discoveredProfile$me4,_discoveredProfile$me5,_discoveredProfile$me6,_discoveredProfile$me7,_discoveredProfile$me8,_discoveredProfile$me9,_discoveredProfile$op,_discoveredProfile$op2,_discoveredProfile$op3;console.log('âœ… Claude analysis complete with data:',intelligence.company);// Update organization with Claude's analysis\nconst updatedProfile=_objectSpread(_objectSpread({},profile),{},{organization:_objectSpread(_objectSpread({},profile.organization),{},{industry:intelligence.company.industry||profile.organization.industry,description:intelligence.company.description||profile.organization.description,business_model:intelligence.company.business_model,market_position:intelligence.company.market_position,key_products:intelligence.company.key_products,target_customers:intelligence.company.target_customers}),// Auto-populate competitors from Claude analysis\ncompetitors:intelligence.competitors||[],// Auto-populate monitoring topics\nmonitoring_topics:intelligence.topics||[],// CRITICAL: Save ALL stakeholder data for Intelligence Hub\nstakeholders:intelligence.stakeholders||{},regulators:((_intelligence$stakeho=intelligence.stakeholders)===null||_intelligence$stakeho===void 0?void 0:_intelligence$stakeho.regulators)||[],activists:((_intelligence$stakeho2=intelligence.stakeholders)===null||_intelligence$stakeho2===void 0?void 0:_intelligence$stakeho2.activists)||[],media_outlets:((_intelligence$stakeho3=intelligence.stakeholders)===null||_intelligence$stakeho3===void 0?void 0:_intelligence$stakeho3.media)||[],investors:((_intelligence$stakeho4=intelligence.stakeholders)===null||_intelligence$stakeho4===void 0?void 0:_intelligence$stakeho4.investors)||[],analysts:((_intelligence$stakeho5=intelligence.stakeholders)===null||_intelligence$stakeho5===void 0?void 0:_intelligence$stakeho5.analysts)||[]});setProfile(updatedProfile);setAnalysisComplete(true);// CRITICAL: Save the discovered data immediately to localStorage\nconsole.log('ðŸ’¾ Saving discovered data to localStorage immediately...');const discoveredProfile=_objectSpread(_objectSpread({},updatedProfile),{},{timestamp:new Date().toISOString(),version:'2.0'});// Save unified profile with all discovered data\nlocalStorage.setItem('signaldesk_unified_profile',JSON.stringify(discoveredProfile));console.log('âœ… Saved unified profile with stakeholders:',{competitors:((_discoveredProfile$co=discoveredProfile.competitors)===null||_discoveredProfile$co===void 0?void 0:_discoveredProfile$co.length)||0,regulators:((_discoveredProfile$re=discoveredProfile.regulators)===null||_discoveredProfile$re===void 0?void 0:_discoveredProfile$re.length)||0,media:((_discoveredProfile$me=discoveredProfile.media_outlets)===null||_discoveredProfile$me===void 0?void 0:_discoveredProfile$me.length)||0,topics:((_discoveredProfile$mo=discoveredProfile.monitoring_topics)===null||_discoveredProfile$mo===void 0?void 0:_discoveredProfile$mo.length)||0});// Also save for backward compatibility\nlocalStorage.setItem('signaldesk_organization',JSON.stringify(discoveredProfile.organization));localStorage.setItem('signaldesk_onboarding',JSON.stringify({organization:discoveredProfile.organization,competitors:discoveredProfile.competitors,monitoring_topics:discoveredProfile.monitoring_topics,stakeholders:discoveredProfile.stakeholders}));// Save opportunity profile for Opportunity Engine (with defaults since we're early in onboarding)\nlocalStorage.setItem('opportunity_profile',JSON.stringify({voice:((_discoveredProfile$br=discoveredProfile.brand)===null||_discoveredProfile$br===void 0?void 0:_discoveredProfile$br.voice)||'professional',risk_tolerance:((_discoveredProfile$br2=discoveredProfile.brand)===null||_discoveredProfile$br2===void 0?void 0:_discoveredProfile$br2.risk_tolerance)||'moderate',response_speed:((_discoveredProfile$br3=discoveredProfile.brand)===null||_discoveredProfile$br3===void 0?void 0:_discoveredProfile$br3.response_speed)||'immediate',core_value_props:((_discoveredProfile$me2=discoveredProfile.messaging)===null||_discoveredProfile$me2===void 0?void 0:_discoveredProfile$me2.core_value_props)||[],proof_points:((_discoveredProfile$me3=discoveredProfile.messaging)===null||_discoveredProfile$me3===void 0?void 0:_discoveredProfile$me3.proof_points)||[],competitive_advantages:((_discoveredProfile$me4=discoveredProfile.messaging)===null||_discoveredProfile$me4===void 0?void 0:_discoveredProfile$me4.competitive_advantages)||[],key_narratives:((_discoveredProfile$me5=discoveredProfile.messaging)===null||_discoveredProfile$me5===void 0?void 0:_discoveredProfile$me5.key_narratives)||[],preferred_tiers:((_discoveredProfile$me6=discoveredProfile.media)===null||_discoveredProfile$me6===void 0?void 0:_discoveredProfile$me6.preferred_tiers)||['tier1_business','tier1_tech'],journalist_relationships:((_discoveredProfile$me7=discoveredProfile.media)===null||_discoveredProfile$me7===void 0?void 0:_discoveredProfile$me7.journalist_relationships)||[],no_comment_topics:((_discoveredProfile$me8=discoveredProfile.media)===null||_discoveredProfile$me8===void 0?void 0:_discoveredProfile$me8.no_comment_topics)||[],exclusive_partners:((_discoveredProfile$me9=discoveredProfile.media)===null||_discoveredProfile$me9===void 0?void 0:_discoveredProfile$me9.exclusive_partners)||[],spokespeople:discoveredProfile.spokespeople||[],opportunity_types:((_discoveredProfile$op=discoveredProfile.opportunities)===null||_discoveredProfile$op===void 0?void 0:_discoveredProfile$op.types)||{competitor_weakness:true,narrative_vacuum:true,cascade_effect:true,crisis_prevention:true,viral_moment:false},minimum_confidence:((_discoveredProfile$op2=discoveredProfile.opportunities)===null||_discoveredProfile$op2===void 0?void 0:_discoveredProfile$op2.minimum_confidence)||70,auto_execute_threshold:((_discoveredProfile$op3=discoveredProfile.opportunities)===null||_discoveredProfile$op3===void 0?void 0:_discoveredProfile$op3.auto_execute_threshold)||95,competitors:discoveredProfile.competitors||[]}));console.log('ðŸ” Verification - localStorage now contains:');console.log('- signaldesk_unified_profile:',localStorage.getItem('signaldesk_unified_profile')?'âœ…':'âŒ');console.log('- signaldesk_organization:',localStorage.getItem('signaldesk_organization')?'âœ…':'âŒ');console.log('- signaldesk_onboarding:',localStorage.getItem('signaldesk_onboarding')?'âœ…':'âŒ');}}catch(error){console.error('âŒ Claude analysis failed:',error);}finally{setIsAnalyzing(false);}};const saveProfile=async()=>{// Ensure organization has an ID\nif(!profile.organization.id&&profile.organization.name){profile.organization.id=profile.organization.name.toLowerCase().replace(/\\s+/g,'-');}// Save unified profile\nconst unifiedProfile=_objectSpread(_objectSpread({},profile),{},{timestamp:new Date().toISOString(),version:'2.0'});// Clear all cached intelligence data before saving new profile\nclearAllIntelligenceCache();// Save to localStorage\nlocalStorage.setItem('signaldesk_unified_profile',JSON.stringify(unifiedProfile));// Also save specific parts for backward compatibility\nlocalStorage.setItem('signaldesk_organization',JSON.stringify(profile.organization));localStorage.setItem('opportunity_profile',JSON.stringify(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},profile.brand),profile.messaging),profile.media),{},{spokespeople:profile.spokespeople,opportunity_types:profile.opportunities.types,minimum_confidence:profile.opportunities.minimum_confidence,auto_execute_threshold:profile.opportunities.auto_execute_threshold,competitors:profile.competitors})));// Keep old onboarding for backward compatibility but with new structure\nlocalStorage.setItem('signaldesk_onboarding',JSON.stringify({organization:profile.organization,competitors:profile.competitors,monitoring_topics:profile.monitoring_topics}));// Handle completion\nif(onComplete){onComplete(unifiedProfile);}// Redirect to main app after successful setup\nconsole.log('âœ… Onboarding complete, navigating to main app...');navigate('/');};const renderStep=()=>{switch(currentStep){case 1:return renderOrganization();case 2:return renderBrandVoice();case 3:return renderKeyMessages();case 4:return renderMediaStrategy();case 5:return renderOpportunities();default:return null;}};const renderOrganization=()=>{var _profile$competitors;return/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tell us about your organization\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"We'll discover your competitors and industry details through our intelligence engine.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Organization Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your organization name\",value:profile.organization.name,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{organization:_objectSpread(_objectSpread({},profile.organization),{},{name:e.target.value})})),className:\"form-input\"}),profile.organization.name&&!analysisComplete&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:analyzeOrganization,disabled:isAnalyzing,style:{marginTop:'10px',background:isAnalyzing?'#666':'#00ff00',color:'#000',padding:'8px 16px',border:'none',borderRadius:'4px',cursor:isAnalyzing?'wait':'pointer'},children:isAnalyzing?'ðŸ”„ Analyzing...':'ðŸš€ Analyze Now (Debug)'}),analysisComplete&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',color:'#00ff00'},children:[\"\\u2705 Analysis complete! Found \",((_profile$competitors=profile.competitors)===null||_profile$competitors===void 0?void 0:_profile$competitors.length)||0,\" competitors\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Website (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"https://www.example.com\",value:profile.organization.website,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{organization:_objectSpread(_objectSpread({},profile.organization),{},{website:e.target.value})})),className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Brief Description\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What does your organization do?\",value:profile.organization.description,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{organization:_objectSpread(_objectSpread({},profile.organization),{},{description:e.target.value})})),className:\"form-textarea\",rows:3})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-section\",children:[isAnalyzing&&/*#__PURE__*/_jsxs(\"div\",{className:\"ai-discovery-status\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"discovery-spinner\"}),/*#__PURE__*/_jsx(\"p\",{className:\"discovery-text\",children:\"\\uD83E\\uDD16 AI is analyzing your organization...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"discovery-detail\",children:\"Discovering competitors, industry trends, and strategic opportunities\"})]}),analysisComplete&&/*#__PURE__*/_jsxs(\"div\",{className:\"discovered-info neon-card\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"discovered-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"neon-icon\",children:\"\\u2728\"}),\"AI-Discovered Intelligence\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"discovered-grid\",children:[profile.organization.industry&&/*#__PURE__*/_jsxs(\"div\",{className:\"discovered-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"discovered-label\",children:\"Industry\"}),/*#__PURE__*/_jsx(\"div\",{className:\"discovered-value\",children:profile.organization.industry})]}),profile.competitors.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"discovered-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"discovered-label\",children:\"Key Competitors\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"discovered-value\",children:[profile.competitors.slice(0,3).join(', '),profile.competitors.length>3&&\" +\".concat(profile.competitors.length-3,\" more\")]})]}),profile.monitoring_topics.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"discovered-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"discovered-label\",children:\"Topics to Monitor\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"discovered-value\",children:[profile.monitoring_topics.slice(0,3).join(', '),profile.monitoring_topics.length>3&&\" +\".concat(profile.monitoring_topics.length-3,\" more\")]})]})]})]})]})]});};// Removed renderCompetitors - will be discovered through intelligence\nconst renderBrandVoice=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"How does \",profile.organization.name||'your organization',\" communicate?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"This helps us generate content and responses that match your brand.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Brand Voice\"}),/*#__PURE__*/_jsx(\"div\",{className:\"option-grid\",children:[{value:'professional',label:'Professional',desc:'Formal, authoritative'},{value:'conversational',label:'Conversational',desc:'Friendly, approachable'},{value:'bold',label:'Bold',desc:'Confident, assertive'},{value:'technical',label:'Technical',desc:'Detailed, precise'},{value:'inspirational',label:'Inspirational',desc:'Visionary, motivating'}].map(option=>/*#__PURE__*/_jsxs(\"button\",{className:\"option-card \".concat(profile.brand.voice===option.value?'selected':''),onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{brand:_objectSpread(_objectSpread({},profile.brand),{},{voice:option.value})})),children:[/*#__PURE__*/_jsx(\"strong\",{children:option.label}),/*#__PURE__*/_jsx(\"span\",{children:option.desc})]},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Risk Tolerance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"option-grid\",children:[{value:'conservative',label:'Conservative',desc:'Careful, measured responses'},{value:'moderate',label:'Moderate',desc:'Balanced approach'},{value:'aggressive',label:'Aggressive',desc:'First-mover, bold statements'}].map(option=>/*#__PURE__*/_jsxs(\"button\",{className:\"option-card \".concat(profile.brand.risk_tolerance===option.value?'selected':''),onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{brand:_objectSpread(_objectSpread({},profile.brand),{},{risk_tolerance:option.value})})),children:[/*#__PURE__*/_jsx(\"strong\",{children:option.label}),/*#__PURE__*/_jsx(\"span\",{children:option.desc})]},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Response Speed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"option-grid\",children:[{value:'immediate',label:'Immediate',desc:'First to respond'},{value:'considered',label:'Considered',desc:'Thoughtful responses'},{value:'strategic',label:'Strategic',desc:'Wait for right moment'}].map(option=>/*#__PURE__*/_jsxs(\"button\",{className:\"option-card \".concat(profile.brand.response_speed===option.value?'selected':''),onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{brand:_objectSpread(_objectSpread({},profile.brand),{},{response_speed:option.value})})),children:[/*#__PURE__*/_jsx(\"strong\",{children:option.label}),/*#__PURE__*/_jsx(\"span\",{children:option.desc})]},option.value))})]})]});const renderKeyMessages=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Key Messages & Proof Points\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"Optional: Add your core messages and supporting evidence. You can skip this for now.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Core Value Propositions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-list\",children:[profile.messaging.core_value_props.map((prop,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"input-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:prop,onChange:e=>{const newProps=[...profile.messaging.core_value_props];newProps[idx]=e.target.value;setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{core_value_props:newProps})}));},placeholder:\"e.g., 'Industry-leading reliability'\",className:\"form-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newProps=profile.messaging.core_value_props.filter((_,i)=>i!==idx);setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{core_value_props:newProps})}));},className:\"remove-btn\",children:\"\\xD7\"})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{core_value_props:[...profile.messaging.core_value_props,'']})})),className:\"add-btn-small\",children:\"+ Add Value Proposition\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Proof Points\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-list\",children:[profile.messaging.proof_points.map((point,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"input-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:point,onChange:e=>{const newPoints=[...profile.messaging.proof_points];newPoints[idx]=e.target.value;setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{proof_points:newPoints})}));},placeholder:\"e.g., '#1 in customer satisfaction for 5 years'\",className:\"form-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newPoints=profile.messaging.proof_points.filter((_,i)=>i!==idx);setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{proof_points:newPoints})}));},className:\"remove-btn\",children:\"\\xD7\"})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{proof_points:[...profile.messaging.proof_points,'']})})),className:\"add-btn-small\",children:\"+ Add Proof Point\"})]})]})]});const renderMediaStrategy=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Media Preferences\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"Optional: Select your preferred media outlets. You can configure this later.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Preferred Media Tiers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-grid\",children:[{id:'tier1_business',label:'Business Media',desc:'WSJ, Bloomberg, FT'},{id:'tier1_tech',label:'Tech Media',desc:'TechCrunch, Verge'},{id:'tier1_general',label:'General News',desc:'NYT, CNN, BBC'},{id:'trade',label:'Trade Publications',desc:'Industry-specific'},{id:'regional',label:'Regional Media',desc:'Local coverage'}].map(tier=>/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:profile.media.preferred_tiers.includes(tier.id),onChange:e=>{if(e.target.checked){setProfile(_objectSpread(_objectSpread({},profile),{},{media:_objectSpread(_objectSpread({},profile.media),{},{preferred_tiers:[...profile.media.preferred_tiers,tier.id]})}));}else{setProfile(_objectSpread(_objectSpread({},profile),{},{media:_objectSpread(_objectSpread({},profile.media),{},{preferred_tiers:profile.media.preferred_tiers.filter(t=>t!==tier.id)})}));}}}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:tier.label}),/*#__PURE__*/_jsx(\"span\",{children:tier.desc})]})]},tier.id))})]})]});const renderOpportunities=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"What opportunities should we pursue?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"Choose which types of opportunities to detect and act on.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Opportunity Types\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-grid\",children:[{id:'competitor_weakness',label:'Competitor Weakness',desc:'Capitalize when competitors stumble',icon:'ðŸŽ¯'},{id:'narrative_vacuum',label:'Narrative Vacuum',desc:'Own unclaimed stories',icon:'ðŸ“¢'},{id:'cascade_effect',label:'Cascade Prediction',desc:'Get ahead of spreading trends',icon:'ðŸŒŠ'},{id:'crisis_prevention',label:'Crisis Prevention',desc:'Proactive risk mitigation',icon:'ðŸ›¡ï¸'},{id:'alliance_opening',label:'Partnerships',desc:'Strategic collaborations',icon:'ðŸ¤'}].map(type=>/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item opportunity-type\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:profile.opportunities.types[type.id],onChange:e=>{setProfile(_objectSpread(_objectSpread({},profile),{},{opportunities:_objectSpread(_objectSpread({},profile.opportunities),{},{types:_objectSpread(_objectSpread({},profile.opportunities.types),{},{[type.id]:e.target.checked})})}));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"type-icon\",children:type.icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:type.label}),/*#__PURE__*/_jsx(\"span\",{children:type.desc})]})]})]},type.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confidence Thresholds\"}),/*#__PURE__*/_jsx(\"div\",{className:\"threshold-settings\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"threshold-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Minimum confidence to show opportunity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slider-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"50\",max:\"100\",value:profile.opportunities.minimum_confidence,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{opportunities:_objectSpread(_objectSpread({},profile.opportunities),{},{minimum_confidence:parseInt(e.target.value)})})),className:\"slider\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"slider-value\",children:[profile.opportunities.minimum_confidence,\"%\"]})]})]})})]})]});// Check if profile already exists\nuseEffect(()=>{const existingProfile=localStorage.getItem('signaldesk_unified_profile');if(existingProfile){const parsed=JSON.parse(existingProfile);setProfile(parsed);}else{// Check for legacy onboarding data\nconst legacyOnboarding=localStorage.getItem('signaldesk_onboarding');if(legacyOnboarding){const legacy=JSON.parse(legacyOnboarding);setProfile(prev=>_objectSpread(_objectSpread({},prev),{},{organization:legacy.organization||prev.organization,competitors:legacy.competitors||prev.competitors}));}}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"unified-onboarding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to SignalDesk\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Let's configure your intelligent opportunity engine\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"onboarding-content\",children:renderStep()}),/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:handleBack,disabled:currentStep===1,children:\"Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-right\",children:[!steps[currentStep-1].required&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-ghost\",onClick:handleSkip,children:\"Skip for now\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:handleNext,disabled:!validateCurrentStep(),children:currentStep===steps.length?'Complete Setup':'Next'})]})]})]})});};export default UnifiedOnboarding;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}