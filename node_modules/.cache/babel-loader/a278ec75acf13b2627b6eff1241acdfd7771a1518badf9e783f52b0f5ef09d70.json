{"ast":null,"code":"import _objectSpread from\"/Users/jonathanliebowitz/Desktop/SignalDesk/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{ArrowLeft,Send,Sparkles,Save,Download,Copy}from'lucide-react';import nivStateManager from'./NivStateManager';import SimplifiedMediaList from'./SimplifiedMediaList';import SimplifiedContentDraft from'./SimplifiedContentDraft';import SimplifiedStrategicPlanning from'./SimplifiedStrategicPlanning';import SimplifiedGenericContent from'./SimplifiedGenericContent';import supabaseApiService from'../../services/supabaseApiService';// PROOF OF CONCEPT: Workspace View with Mini Niv Assistant\n// This replaces the entire view when a work item is opened\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const WorkspaceViewPOC=_ref=>{let{onBack}=_ref;const[activeWorkItem,setActiveWorkItem]=useState(null);const[nivInput,setNivInput]=useState('');const[nivMessages,setNivMessages]=useState([]);const[isProcessing,setIsProcessing]=useState(false);useEffect(()=>{// Get the active workspace from state manager\nconst currentWorkspace=nivStateManager.getActiveWorkspace();if(currentWorkspace){setActiveWorkItem(currentWorkspace);// Add initial context message\nsetNivMessages([{type:'assistant',content:\"I'm here to help you with this \".concat(currentWorkspace.type.replace('-',' '),\". You can ask me to make edits, add content, or answer questions about it.\")}]);}},[]);const handleNivMessage=async()=>{if(!nivInput.trim()||isProcessing)return;const userMessage=nivInput.trim();setNivInput('');setIsProcessing(true);// Add user message to chat\nsetNivMessages(prev=>[...prev,{type:'user',content:userMessage}]);try{// Call Niv with context about the current work item\nconst response=await supabaseApiService.callNivChat({message:userMessage,context:{mode:'workspace_assistant',workItemType:activeWorkItem.type,workItemTitle:activeWorkItem.title,hasContent:!!activeWorkItem.generatedContent},messages:nivMessages});// Add Niv's response\nif(response.response){setNivMessages(prev=>[...prev,{type:'assistant',content:response.response}]);}// Handle any updates to the work item\nif(response.updates){// Update the work item through state manager\nconsole.log('Applying updates to work item:',response.updates);}}catch(error){console.error('Error calling Niv:',error);setNivMessages(prev=>[...prev,{type:'error',content:'Sorry, I encountered an error. Please try again.'}]);}finally{setIsProcessing(false);}};const renderWorkspace=()=>{if(!activeWorkItem){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100%',color:'#6b7280',fontSize:'14px'},children:\"No work item selected\"});}const context=_objectSpread({title:activeWorkItem.title,description:activeWorkItem.description,generatedContent:activeWorkItem.generatedContent},activeWorkItem.metadata);// Route to the appropriate component based on type\nswitch(activeWorkItem.type){case'media-list':return/*#__PURE__*/_jsx(SimplifiedMediaList,{context:context});case'content-draft':return/*#__PURE__*/_jsx(SimplifiedContentDraft,{context:context});case'strategy-plan':return/*#__PURE__*/_jsx(SimplifiedStrategicPlanning,{context:context});default:return/*#__PURE__*/_jsx(SimplifiedGenericContent,{context:context});}};return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100vw',height:'100vh',display:'flex',background:'#0a0a0f',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:'1 1 75%',display:'flex',flexDirection:'column',borderRight:'1px solid rgba(139, 92, 246, 0.2)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px 24px',borderBottom:'1px solid rgba(139, 92, 246, 0.2)',background:'rgba(30, 30, 45, 0.6)',display:'flex',alignItems:'center',gap:'16px'},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{nivStateManager.closeWorkspace();if(onBack)onBack();},style:{padding:'8px 16px',background:'transparent',border:'1px solid rgba(139, 92, 246, 0.3)',borderRadius:'8px',color:'#9ca3af',cursor:'pointer',display:'flex',alignItems:'center',gap:'8px',fontSize:'14px'},children:[/*#__PURE__*/_jsx(ArrowLeft,{size:16}),\"Back to Chat\"]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'18px',color:'#e8e8e8',fontWeight:'600'},children:(activeWorkItem===null||activeWorkItem===void 0?void 0:activeWorkItem.title)||'Workspace'})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"button\",{style:{padding:'8px 12px',background:'transparent',border:'1px solid rgba(139, 92, 246, 0.3)',borderRadius:'6px',color:'#9ca3af',cursor:'pointer',display:'flex',alignItems:'center',gap:'6px',fontSize:'13px'},children:[/*#__PURE__*/_jsx(Copy,{size:14}),\"Copy\"]}),/*#__PURE__*/_jsxs(\"button\",{style:{padding:'8px 12px',background:'transparent',border:'1px solid rgba(139, 92, 246, 0.3)',borderRadius:'6px',color:'#9ca3af',cursor:'pointer',display:'flex',alignItems:'center',gap:'6px',fontSize:'13px'},children:[/*#__PURE__*/_jsx(Download,{size:14}),\"Export\"]}),/*#__PURE__*/_jsxs(\"button\",{style:{padding:'8px 16px',background:'linear-gradient(135deg, #10b981, #059669)',border:'none',borderRadius:'6px',color:'white',cursor:'pointer',display:'flex',alignItems:'center',gap:'6px',fontSize:'13px',fontWeight:'500'},children:[/*#__PURE__*/_jsx(Save,{size:14}),\"Save Changes\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflow:'hidden'},children:renderWorkspace()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'25%',minWidth:'300px',maxWidth:'400px',display:'flex',flexDirection:'column',background:'rgba(20, 20, 30, 0.6)'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'16px',borderBottom:'1px solid rgba(139, 92, 246, 0.2)',background:'linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1))'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsx(Sparkles,{size:18,color:\"#8b5cf6\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'14px',fontWeight:'600',color:'#e8e8e8'},children:\"Niv Assistant\"})]}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'4px 0 0 0',fontSize:'11px',color:'#9ca3af'},children:\"Ask me to edit, enhance, or explain\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',padding:'16px',display:'flex',flexDirection:'column',gap:'12px'},children:[nivMessages.map((msg,i)=>/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:msg.type==='user'?'flex-end':'flex-start'},children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:'85%',padding:'10px 14px',borderRadius:'10px',background:msg.type==='user'?'linear-gradient(135deg, #6366f1, #8b5cf6)':msg.type==='error'?'rgba(239, 68, 68, 0.2)':'rgba(30, 30, 45, 0.8)',color:msg.type==='user'?'#ffffff':'#e8e8e8',fontSize:'13px',lineHeight:'1.5'},children:msg.content})},i)),isProcessing&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'flex-start'},children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'10px 14px',borderRadius:'10px',background:'rgba(30, 30, 45, 0.8)',display:'flex',alignItems:'center',gap:'8px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"typing-indicator\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsx(\"span\",{style:{color:'#9ca3af',fontSize:'12px'},children:\"Thinking...\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'16px',borderTop:'1px solid rgba(139, 92, 246, 0.2)',background:'rgba(30, 30, 45, 0.4)'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nivInput,onChange:e=>setNivInput(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleNivMessage(),placeholder:\"Ask Niv to help edit...\",style:{flex:1,padding:'10px 14px',background:'rgba(0, 0, 0, 0.4)',border:'1px solid rgba(139, 92, 246, 0.3)',borderRadius:'8px',color:'#e8e8e8',fontSize:'13px',outline:'none'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNivMessage,disabled:!nivInput.trim()||isProcessing,style:{padding:'10px 16px',background:isProcessing?'rgba(139, 92, 246, 0.3)':'linear-gradient(135deg, #6366f1, #8b5cf6)',border:'none',borderRadius:'8px',color:'white',cursor:isProcessing?'not-allowed':'pointer',display:'flex',alignItems:'center'},children:/*#__PURE__*/_jsx(Send,{size:14})})]})})]}),/*#__PURE__*/_jsx(\"style\",{jsx:true,children:\"\\n        .typing-indicator {\\n          display: flex;\\n          gap: 3px;\\n        }\\n\\n        .typing-indicator span {\\n          width: 6px;\\n          height: 6px;\\n          background: #8b5cf6;\\n          border-radius: 50%;\\n          animation: typing 1.4s ease-in-out infinite;\\n        }\\n\\n        .typing-indicator span:nth-child(2) {\\n          animation-delay: 0.2s;\\n        }\\n\\n        .typing-indicator span:nth-child(3) {\\n          animation-delay: 0.4s;\\n        }\\n\\n        @keyframes typing {\\n          0%, 60%, 100% {\\n            transform: translateY(0);\\n            opacity: 0.5;\\n          }\\n          30% {\\n            transform: translateY(-8px);\\n            opacity: 1;\\n          }\\n        }\\n      \"})]});};export default WorkspaceViewPOC;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}