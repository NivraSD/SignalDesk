{"ast":null,"code":"import _objectSpread from\"/Users/jonathanliebowitz/Desktop/SignalDesk/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from\"react\";import{useAuth}from\"../contexts/AuthContext\";import{useProject}from\"../contexts/ProjectContext\";import{useMemoryVault}from\"../hooks/useMemoryVault\";import api from\"../services/api\";import{Shield,Bot,Send,Loader2,AlertTriangle,Users,MessageCircle,Activity,FileText,Phone,Bell,CheckCircle,XCircle,AlertCircle,Timer,Zap,Brain,Target,TrendingUp,Lightbulb,ClipboardCheck,Radio,Siren,HeartHandshake,ChevronRight,Download,Copy,ExternalLink,Sparkles,MessageSquare,Flame,ArrowRight,Play,Pause,RefreshCw,BookOpen,HelpCircle,Clock,PlusCircle,X,Maximize2,Minimize2,Settings,History,FileDown,Share2,Building,Globe,Award,BarChart3,Save,Mail,ListChecks,Pencil,ChevronDown,ChevronUp,UserCheck,Calendar,Plus,Folder,PhoneCall,FileCheck,Eye,Search}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CrisisCommandCenter=()=>{var _crisisPlan$scenarios,_crisisPlan$crisisTea11,_crisisPlan$crisisTea12,_crisisPlan$stakehold,_crisisPlan$communica,_crisisPlan$scenarios2,_crisisPlan$objective,_crisisPlan$crisisTea13,_crisisPlan$responseP,_crisisPlan$scenarios3,_crisisPlan$stakehold2,_crisisPlan$communica2,_crisisPlan$escalatio;// Get auth and project context\nconst{user}=useAuth();const{selectedProject}=useProject();const{saveToMemoryVault}=useMemoryVault();// Core States\nconst[crisisStatus,setCrisisStatus]=useState(\"monitoring\");const[messages,setMessages]=useState([]);const[input,setInput]=useState(\"\");const[isAIResponding,setIsAIResponding]=useState(false);const[showResources,setShowResources]=useState(false);const chatContainerRef=useRef(null);// Crisis States\nconst[selectedScenario,setSelectedScenario]=useState(null);const[elapsedTime,setElapsedTime]=useState(\"00:00:00\");const[crisisStartTime,setCrisisStartTime]=useState(null);const[showScenarioModal,setShowScenarioModal]=useState(false);const[crisisSeverity,setCrisisSeverity]=useState(\"low\");const[showDraftModal,setShowDraftModal]=useState(false);const[currentDraftStakeholder,setCurrentDraftStakeholder]=useState(null);const[editingDraft,setEditingDraft]=useState(\"\");const[isDraftSaving,setIsDraftSaving]=useState(false);// Quick Stats\nconst[quickStats,setQuickStats]=useState({teamMembersActive:0,tasksCompleted:0,communicationsSent:0,decisionsMade:0});// Crisis Documentation\nconst[crisisDocumentation,setCrisisDocumentation]=useState({timeline:[],decisions:[],communications:[],aiInteractions:[]});// Crisis Plan States\nconst[crisisPlan,setCrisisPlan]=useState(null);const[showPlanGenerator,setShowPlanGenerator]=useState(false);const[planGenerating,setPlanGenerating]=useState(false);const[editingSection,setEditingSection]=useState(null);// Team & Task Management\nconst[teamStatus,setTeamStatus]=useState({});const[tasks,setTasks]=useState([]);const[decisionLog,setDecisionLog]=useState([]);const[communicationDrafts,setCommunicationDrafts]=useState({});// AI Assistant States\nconst[aiExpanded,setAiExpanded]=useState(true);const[showQueryHelp,setShowQueryHelp]=useState(false);const[conversationHistory,setConversationHistory]=useState([]);// Plan Generation Form\nconst[planForm,setPlanForm]=useState({industry:\"\",companySize:\"\",teamMembers:[],keyConcerns:[],existingProtocols:\"\",additionalContext:\"\",emergencyContacts:[]// Add this\n});// Add error handling wrapper for API calls\nconst handleAPIError=(error,context)=>{console.error(\"Error in \".concat(context,\":\"),error);const errorMessage={id:Date.now()+Math.random(),type:\"ai\",content:\"\\u274C I encountered an error while \".concat(context,\". \").concat(error.message||\"Please try again or check your connection.\"),timestamp:new Date().toLocaleTimeString(),error:true};setMessages(prev=>[...prev,errorMessage]);return errorMessage;};// Initialize with AI welcome\nuseEffect(()=>{const welcomeMessage={id:Date.now(),type:\"ai\",content:\"\\uD83D\\uDC4B Welcome to your Crisis Command Center!\\n\\nI'm your AI Crisis Management Expert, trained on thousands of real-world crisis scenarios and best practices. I'm here to help you:\\n\\n\\uD83D\\uDCCB **Create a Crisis Plan** - Generate a comprehensive, industry-specific crisis management plan\\n\\uD83D\\uDEA8 **Manage Active Crises** - Real-time guidance and support during emergencies\\n\\uD83D\\uDCAC **Draft Communications** - Create stakeholder messages with the right tone and content\\n\\uD83C\\uDFAF **Strategic Decisions** - Data-driven recommendations for critical choices\\n\\uD83D\\uDCCA **Post-Crisis Analysis** - Learn and improve from each incident\\n\\n\".concat(selectedProject?\"I'm working within your \\\"\".concat(selectedProject.name,\"\\\" project.\"):\"Select a project to save your crisis plans and documentation.\",\"\\n\\nHow can I help you prepare for or manage a crisis today?\"),timestamp:new Date().toLocaleTimeString()};setMessages([welcomeMessage]);},[selectedProject]);// Timer Effect\nuseEffect(()=>{if(crisisStartTime&&crisisStatus===\"active\"){const interval=setInterval(()=>{const elapsed=Date.now()-crisisStartTime.getTime();const hours=Math.floor(elapsed/3600000);const minutes=Math.floor(elapsed%3600000/60000);const seconds=Math.floor(elapsed%60000/1000);setElapsedTime(\"\".concat(hours.toString().padStart(2,\"0\"),\":\").concat(minutes.toString().padStart(2,\"0\"),\":\").concat(seconds.toString().padStart(2,\"0\")));},1000);return()=>clearInterval(interval);}},[crisisStartTime,crisisStatus]);// Auto-scroll chat\nuseEffect(()=>{if(chatContainerRef.current){chatContainerRef.current.scrollTop=chatContainerRef.current.scrollHeight;}},[messages]);// Document everything during crisis\nconst documentAction=(type,data)=>{if(crisisStatus===\"active\"){const documentEntry=_objectSpread(_objectSpread({},data),{},{timestamp:new Date().toISOString(),elapsedTime:elapsedTime,type:type});setCrisisDocumentation(prev=>_objectSpread(_objectSpread({},prev),{},{[type]:[...(prev[type]||[]),documentEntry]}));// Also add to decision log if it's a decision\nif(type===\"decisions\"||data.isDecision){setDecisionLog(prev=>[...prev,{id:Date.now(),action:data.action||data.event||\"Decision made\",details:data.details||data.description,timestamp:new Date().toISOString()}]);}}};// Analyze crisis severity from conversation\nconst analyzeCrisisSeverity=text=>{const criticalKeywords=[\"death\",\"fatality\",\"explosion\",\"terrorism\",\"ransomware\",\"data breach\",\"lawsuit\",\"regulatory\",\"shutdown\"];const highKeywords=[\"injured\",\"accident\",\"media\",\"viral\",\"protest\",\"boycott\",\"investigation\",\"complaint\"];const mediumKeywords=[\"concern\",\"issue\",\"problem\",\"delay\",\"error\",\"mistake\",\"confusion\"];const lowerText=text.toLowerCase();if(criticalKeywords.some(word=>lowerText.includes(word))){setCrisisSeverity(\"critical\");return\"critical\";}if(highKeywords.some(word=>lowerText.includes(word))){setCrisisSeverity(\"high\");return\"high\";}if(mediumKeywords.some(word=>lowerText.includes(word))){setCrisisSeverity(\"medium\");return\"medium\";}return\"low\";};// Enhanced AI response\nconst sendMessage=async text=>{const messageText=text||input;if(!messageText.trim())return;const userMessage={id:Date.now(),type:\"user\",content:messageText,timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,userMessage]);setInput(\"\");setIsAIResponding(true);// Add to conversation history\nconst updatedHistory=[...conversationHistory,{role:\"user\",content:messageText}];setConversationHistory(updatedHistory);// Document AI interaction\ndocumentAction(\"aiInteractions\",{query:messageText,context:{crisisStatus,selectedScenario,severity:crisisSeverity}});// Analyze severity\nconst severity=analyzeCrisisSeverity(messageText);try{const response=await api.crisisAdvisor({query:messageText,conversationHistory:updatedHistory,// Pass full conversation history\ncontext:{scenario:selectedScenario,crisisStatus:crisisStatus,elapsedTime:elapsedTime,projectName:selectedProject===null||selectedProject===void 0?void 0:selectedProject.name,projectId:selectedProject===null||selectedProject===void 0?void 0:selectedProject.id,industry:selectedProject===null||selectedProject===void 0?void 0:selectedProject.industry,hasCrisisPlan:!!crisisPlan}});if(response.success&&response.advice){let aiResponseContent=response.advice;// Changed variable name to avoid confusion\nif(response.detectedCrisisType){aiResponseContent=\"\\uD83D\\uDEA8 **Detected Crisis Type: \".concat(response.detectedCrisisName,\"**\\n\\n\").concat(aiResponseContent);}const aiMessage={id:Date.now()+1,type:\"ai\",content:aiResponseContent,timestamp:new Date().toLocaleTimeString(),actions:response.immediateActions||[],severity:severity,detectedCrisisType:response.detectedCrisisType};setMessages(prev=>[...prev,aiMessage]);// Add AI response to conversation history - using the actual response content\nsetConversationHistory([...updatedHistory,{role:\"assistant\",content:response.advice}]);// Update stats if in crisis mode\nif(crisisStatus===\"active\"){setQuickStats(prev=>_objectSpread(_objectSpread({},prev),{},{decisionsMade:prev.decisionsMade+1}));}}}catch(error){console.error(\"Error getting AI response:\",error);const errorMessage={id:Date.now()+1,type:\"ai\",content:\"I apologize, but I'm having trouble connecting. Please try again in a moment.\",timestamp:new Date().toLocaleTimeString(),error:true};setMessages(prev=>[...prev,errorMessage]);}finally{setIsAIResponding(false);}};// Generate Crisis Plan\nconst generateCrisisPlan=async()=>{setPlanGenerating(true);try{const response=await api.generateCrisisPlan(_objectSpread(_objectSpread({},planForm),{},{projectId:selectedProject===null||selectedProject===void 0?void 0:selectedProject.id,projectName:selectedProject===null||selectedProject===void 0?void 0:selectedProject.name,teamMembers:planForm.teamMembers,emergencyContacts:planForm.emergencyContacts}));if(response.success&&response.plan){// Extract the plan data properly\nconst planData=response.plan.plan_data||response.plan;setCrisisPlan(planData);setShowPlanGenerator(false);// Save to MemoryVault with proper structure\ntry{var _planData$scenarios;const saveResult=await saveToMemoryVault({content:JSON.stringify(planData,null,2),title:\"Crisis Management Plan - \".concat(planForm.industry),type:\"crisis-plan\",source:\"crisis-command-center\",folder_type:\"crisis-management\",// Maps to crisis-management folder\ntags:[\"crisis-plan\",planForm.industry,\"comprehensive\"],metadata:{generated_at:new Date().toISOString(),project_id:selectedProject===null||selectedProject===void 0?void 0:selectedProject.id,industry:planForm.industry,company_size:planForm.companySize,team_members_count:planForm.teamMembers.filter(m=>m.name).length,scenarios_count:((_planData$scenarios=planData.scenarios)===null||_planData$scenarios===void 0?void 0:_planData$scenarios.length)||0}});if(saveResult.success){var _planData$scenarios2,_planData$crisisTeam,_planData$crisisTeam2,_planData$stakeholder,_planData$communicati;// Success notification via AI\nconst planMessage={id:Date.now()+10,type:\"ai\",content:\"\\u2705 **Crisis Management Plan Generated & Saved!**\\n\\nYour comprehensive crisis management plan has been created and saved to MemoryVault.\\n\\n**Plan Highlights:**\\n- \".concat(((_planData$scenarios2=planData.scenarios)===null||_planData$scenarios2===void 0?void 0:_planData$scenarios2.length)||0,\" crisis scenarios identified\\n- \").concat(((_planData$crisisTeam=planData.crisisTeam)===null||_planData$crisisTeam===void 0?void 0:_planData$crisisTeam.filter(m=>m.name).length)||0,\"/\").concat(((_planData$crisisTeam2=planData.crisisTeam)===null||_planData$crisisTeam2===void 0?void 0:_planData$crisisTeam2.length)||0,\" team roles defined\\n- \").concat(((_planData$stakeholder=planData.stakeholders)===null||_planData$stakeholder===void 0?void 0:_planData$stakeholder.length)||0,\" key stakeholder groups\\n- \").concat(((_planData$communicati=planData.communicationPlans)===null||_planData$communicati===void 0?void 0:_planData$communicati.length)||0,\" communication templates\\n- Industry-specific protocols for \").concat(planForm.industry,\"\\n\\n**Next Steps:**\\n1. Review all \").concat(Object.keys(planData).length,\" sections of your plan\\n2. Assign remaining team members to roles\\n3. Share with key stakeholders\\n4. Run a crisis simulation to test readiness\\n\\nYou can now activate Crisis Mode when needed, and I'll guide you through your personalized response plan.\"),timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,planMessage]);}else{throw new Error(\"Failed to save to MemoryVault\");}}catch(saveError){console.error(\"Error saving to MemoryVault:\",saveError);// Still set the plan even if save fails\nconst errorMessage={id:Date.now()+11,type:\"ai\",content:\"\\u26A0\\uFE0F Your crisis plan was generated but there was an issue saving to MemoryVault. The plan is still loaded and ready to use. Try saving again from the plan viewer.\",timestamp:new Date().toLocaleTimeString(),error:true};setMessages(prev=>[...prev,errorMessage]);}}}catch(error){console.error(\"Error generating plan:\",error);const errorMessage={id:Date.now()+12,type:\"ai\",content:\"\\u274C I encountered an error generating your crisis plan. Please try again or let me know what specific error you're seeing.\",timestamp:new Date().toLocaleTimeString(),error:true};setMessages(prev=>[...prev,errorMessage]);}finally{setPlanGenerating(false);}};// Activate Crisis Mode\nconst activateCrisisMode=()=>{setCrisisStatus(\"active\");setShowScenarioModal(true);setCrisisStartTime(new Date());// Initialize team status\nif(crisisPlan!==null&&crisisPlan!==void 0&&crisisPlan.crisisTeam){const teamMap={};crisisPlan.crisisTeam.forEach((member,idx)=>{teamMap[idx]=_objectSpread(_objectSpread({},member),{},{status:\"pending\",notified:false});});setTeamStatus(teamMap);}documentAction(\"timeline\",{event:\"Crisis Mode Activated\",details:\"Manual activation via command center\"});// Update stats\nsetQuickStats({teamMembersActive:0,tasksCompleted:0,communicationsSent:0,decisionsMade:0});// Send AI notification about crisis mode\nconst crisisActivationMessage={id:Date.now()+15,type:\"ai\",content:\"\\uD83D\\uDEA8 **CRISIS MODE ACTIVATED**\\n\\nI'm now in crisis support mode and will remain fully accessible throughout this incident.\\n\\n**My Role During This Crisis:**\\n- Provide real-time guidance and recommendations\\n- Help draft communications for all stakeholders\\n- Analyze decisions and suggest next steps\\n- Document all actions for post-incident review\\n- Monitor severity and escalation triggers\\n\\n**Available Commands:**\\n- \\\"Draft [stakeholder] communication\\\"\\n- \\\"What should we do next?\\\"\\n- \\\"Analyze current situation\\\"\\n- \\\"Review crisis checklist\\\"\\n- \\\"Update stakeholder on progress\\\"\\n\\nI'm here to support you every step of the way. What's your first priority?\",timestamp:new Date().toLocaleTimeString(),priority:\"critical\"};setMessages(prev=>[...prev,crisisActivationMessage]);};// Select Crisis Scenario\nconst selectCrisisScenario=scenario=>{var _scenario$immediateAc;setSelectedScenario(scenario);setShowScenarioModal(false);// Generate initial tasks based on scenario\ngenerateCrisisTasks(scenario);documentAction(\"timeline\",{event:\"Crisis Scenario Selected\",scenario:scenario.title,severity:scenario.impact});// AI notification\nconst scenarioMessage={id:Date.now()+20,type:\"ai\",content:\"\\uD83D\\uDEA8 **Active Crisis: \".concat(scenario.title,\"**\\n\\nI'm now providing real-time support for this \").concat(scenario.impact,\" severity incident.\\n\\n**Immediate Actions Required:**\\n\").concat(((_scenario$immediateAc=scenario.immediateActions)===null||_scenario$immediateAc===void 0?void 0:_scenario$immediateAc.map((action,idx)=>\"\".concat(idx+1,\". \").concat(action)).join(\"\\n\"))||\"1. Assess the situation\\n2. Notify crisis team\\n3. Begin response protocol\",\"\\n\\nI'm here to help with communications, decisions, and guidance. The crisis management tools are now active on your main screen.\"),timestamp:new Date().toLocaleTimeString(),priority:\"critical\"};setMessages(prev=>[...prev,scenarioMessage]);};// Generate Crisis Tasks\nconst generateCrisisTasks=scenario=>{var _crisisPlan$crisisTea,_crisisPlan$crisisTea2,_crisisPlan$crisisTea3,_crisisPlan$crisisTea4,_crisisPlan$crisisTea5,_crisisPlan$crisisTea6,_crisisPlan$crisisTea7,_crisisPlan$crisisTea8,_crisisPlan$crisisTea9,_crisisPlan$crisisTea0;const baseTasks=[{id:1,task:\"Activate crisis team and verify availability\",assignee:(crisisPlan===null||crisisPlan===void 0?void 0:(_crisisPlan$crisisTea=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea===void 0?void 0:(_crisisPlan$crisisTea2=_crisisPlan$crisisTea[0])===null||_crisisPlan$crisisTea2===void 0?void 0:_crisisPlan$crisisTea2.name)||\"Crisis Leader\",priority:\"critical\",status:\"pending\"},{id:2,task:\"Assess immediate impact and risks\",assignee:(crisisPlan===null||crisisPlan===void 0?void 0:(_crisisPlan$crisisTea3=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea3===void 0?void 0:(_crisisPlan$crisisTea4=_crisisPlan$crisisTea3[2])===null||_crisisPlan$crisisTea4===void 0?void 0:_crisisPlan$crisisTea4.name)||\"Operations Manager\",priority:\"critical\",status:\"pending\"},{id:3,task:\"Draft initial stakeholder communications\",assignee:(crisisPlan===null||crisisPlan===void 0?void 0:(_crisisPlan$crisisTea5=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea5===void 0?void 0:(_crisisPlan$crisisTea6=_crisisPlan$crisisTea5[1])===null||_crisisPlan$crisisTea6===void 0?void 0:_crisisPlan$crisisTea6.name)||\"Communications Director\",priority:\"high\",status:\"pending\"},{id:4,task:\"Review legal and compliance requirements\",assignee:(crisisPlan===null||crisisPlan===void 0?void 0:(_crisisPlan$crisisTea7=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea7===void 0?void 0:(_crisisPlan$crisisTea8=_crisisPlan$crisisTea7[3])===null||_crisisPlan$crisisTea8===void 0?void 0:_crisisPlan$crisisTea8.name)||\"Legal Counsel\",priority:\"high\",status:\"pending\"},{id:5,task:\"Prepare employee communication\",assignee:(crisisPlan===null||crisisPlan===void 0?void 0:(_crisisPlan$crisisTea9=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea9===void 0?void 0:(_crisisPlan$crisisTea0=_crisisPlan$crisisTea9[4])===null||_crisisPlan$crisisTea0===void 0?void 0:_crisisPlan$crisisTea0.name)||\"HR Lead\",priority:\"medium\",status:\"pending\"}];// Add scenario-specific tasks\nif(scenario.impact===\"Critical\"){var _crisisPlan$crisisTea1,_crisisPlan$crisisTea10;baseTasks.push({id:6,task:\"Execute \".concat(scenario.title,\" response protocol\"),assignee:(crisisPlan===null||crisisPlan===void 0?void 0:(_crisisPlan$crisisTea1=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea1===void 0?void 0:(_crisisPlan$crisisTea10=_crisisPlan$crisisTea1[0])===null||_crisisPlan$crisisTea10===void 0?void 0:_crisisPlan$crisisTea10.name)||\"Crisis Leader\",priority:\"critical\",status:\"pending\"});}setTasks(baseTasks);};// Draft Communication\nconst draftCommunication=async(stakeholder,template)=>{try{var _template$keyMessages;// Show loading state in UI\nsetCommunicationDrafts(prev=>_objectSpread(_objectSpread({},prev),{},{[stakeholder]:{content:\"Generating draft...\",status:\"generating\",timestamp:new Date()}}));const prompt=\"You are a crisis communications expert. Draft a \".concat(stakeholder,\" communication for the following crisis:\\n\\nCrisis Scenario: \").concat((selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.title)||\"Unknown Crisis\",\"\\nDescription: \").concat((selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.description)||\"No description available\",\"\\nSeverity: \").concat(crisisSeverity,\"\\nTime Elapsed: \").concat(elapsedTime,\"\\nCompany: \").concat((selectedProject===null||selectedProject===void 0?void 0:selectedProject.name)||\"the company\",\"\\n\\nStakeholder: \").concat(stakeholder,\"\\nPrimary Channel: \").concat(template.primaryChannel,\"\\nKey Messages to Include:\\n\").concat(((_template$keyMessages=template.keyMessages)===null||_template$keyMessages===void 0?void 0:_template$keyMessages.map((msg,idx)=>\"\".concat(idx+1,\". \").concat(msg)).join(\"\\n\"))||\"- General crisis response\",\"\\n\\nPlease draft a professional, empathetic communication that:\\n1. Acknowledges the situation\\n2. Shows concern for those affected\\n3. Outlines immediate actions being taken\\n4. Provides next steps or timeline for updates\\n5. Includes appropriate contact information\\n\\nThe tone should be \").concat(stakeholder===\"Employees\"?\"reassuring and transparent\":stakeholder===\"Media\"?\"professional and factual\":stakeholder===\"Customers\"?\"apologetic and solution-focused\":stakeholder===\"Investors\"?\"confident and action-oriented\":\"appropriate for the audience\",\".\");const response=await api.draftCrisisResponse({prompt,stakeholder,template,scenario:selectedScenario,context:{projectName:selectedProject===null||selectedProject===void 0?void 0:selectedProject.name,crisisStatus,elapsedTime,severity:crisisSeverity},projectId:selectedProject===null||selectedProject===void 0?void 0:selectedProject.id});if(response.success&&response.draft){const draft={content:response.draft,stakeholder,timestamp:new Date(),status:\"draft\"};setCommunicationDrafts(prev=>_objectSpread(_objectSpread({},prev),{},{[stakeholder]:draft}));// Document the communication\ndocumentAction(\"communications\",{stakeholder,type:\"draft\",action:\"\".concat(stakeholder,\" communication drafted\"),details:\"Draft created for \".concat(template.primaryChannel,\" channel\")});// Show success message\nconst draftMessage={id:Date.now()+100,type:\"ai\",content:\"\\u2705 \".concat(stakeholder,\" communication drafted successfully. Click \\\"View Draft\\\" to review and edit before sending.\"),timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,draftMessage]);return draft;}else{throw new Error(response.message||\"Failed to generate draft\");}}catch(error){// Remove loading state\nsetCommunicationDrafts(prev=>{const updated=_objectSpread({},prev);delete updated[stakeholder];return updated;});handleAPIError(error,\"drafting \".concat(stakeholder,\" communication\"));}};// Save Communication to MemoryVault\n// Save Communication to MemoryVault\nconst saveCommunication=async(stakeholder,draft)=>{try{const saveResult=await saveToMemoryVault({content:draft.content,title:\"Crisis Communication - \".concat(stakeholder,\" - \").concat((selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.title)||\"Crisis Response\"),type:\"crisis-communication\",source:\"crisis-command-center\",folder_type:\"crisis-management\",// Proper folder mapping\ntags:[\"crisis-communication\",stakeholder.toLowerCase(),(selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.title)||\"crisis\"],metadata:{stakeholder,scenario:selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.title,severity:crisisSeverity,drafted_at:draft.timestamp,crisis_status:crisisStatus,elapsed_time:elapsedTime,project_id:selectedProject===null||selectedProject===void 0?void 0:selectedProject.id}});if(saveResult.success){// Update draft status\nsetCommunicationDrafts(prev=>_objectSpread(_objectSpread({},prev),{},{[stakeholder]:_objectSpread(_objectSpread({},draft),{},{status:\"saved\",savedAt:new Date()})}));// Update stats\nsetQuickStats(prev=>_objectSpread(_objectSpread({},prev),{},{communicationsSent:prev.communicationsSent+1}));// Document action\ndocumentAction(\"communications\",{stakeholder,type:\"sent\",savedToVault:true,timestamp:new Date().toISOString()});// Success notification\nconst successMessage={id:Date.now()+200,type:\"ai\",content:\"\\u2705 \".concat(stakeholder,\" communication saved to MemoryVault and marked as sent. The message is now documented for compliance and future reference.\"),timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,successMessage]);}else{throw new Error(\"Failed to save communication\");}}catch(error){console.error(\"Error saving communication:\",error);// Error notification\nconst errorMessage={id:Date.now()+201,type:\"ai\",content:\"\\u274C Failed to save \".concat(stakeholder,\" communication. Please try again or save manually.\"),timestamp:new Date().toLocaleTimeString(),error:true};setMessages(prev=>[...prev,errorMessage]);}};// Deactivate Crisis Mode\n// Deactivate Crisis Mode\nconst deactivateCrisisMode=async()=>{// Prepare crisis report\nconst crisisReport={scenario:selectedScenario,startTime:crisisStartTime,endTime:new Date(),duration:elapsedTime,severity:crisisSeverity,stats:quickStats,documentation:crisisDocumentation,tasks:tasks,communications:communicationDrafts,teamStatus:teamStatus,decisionLog:decisionLog};try{const saveResult=await saveToMemoryVault({content:JSON.stringify(crisisReport,null,2),title:\"Crisis Report - \".concat((selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.title)||\"Crisis\",\" - \").concat(new Date().toLocaleDateString()),type:\"crisis-report\",source:\"crisis-command-center\",folder_type:\"analytics-reports\",// Post-crisis reports go to analytics\ntags:[\"crisis-report\",(selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.title)||\"crisis\",\"post-incident\",crisisSeverity],metadata:{scenario:selectedScenario===null||selectedScenario===void 0?void 0:selectedScenario.title,duration:elapsedTime,severity:crisisSeverity,stats:quickStats,project_id:selectedProject===null||selectedProject===void 0?void 0:selectedProject.id,incident_date:crisisStartTime===null||crisisStartTime===void 0?void 0:crisisStartTime.toISOString()}});if(!saveResult.success){console.error(\"Warning: Crisis report may not have saved properly\");}}catch(error){console.error(\"Error saving crisis report:\",error);}// Reset states\nsetCrisisStatus(\"monitoring\");setSelectedScenario(null);setCrisisStartTime(null);setAiExpanded(true);// Re-expand AI assistant\nsetCommunicationDrafts({});setTasks([]);setTeamStatus({});setDecisionLog([]);setCrisisDocumentation({timeline:[],decisions:[],communications:[],aiInteractions:[]});// AI debrief message\nconst debriefMessage={id:Date.now()+30,type:\"ai\",content:\"\\u2705 **Crisis Mode Deactivated**\\n\\nExcellent work managing this crisis! Here's your comprehensive summary:\\n\\n\\uD83D\\uDCCA **Crisis Statistics:**\\n- Duration: \".concat(elapsedTime,\"\\n- Severity: \").concat(crisisSeverity.toUpperCase(),\"\\n- Decisions Made: \").concat(quickStats.decisionsMade,\"\\n- Team Members Involved: \").concat(quickStats.teamMembersActive,\"\\n- Communications Sent: \").concat(quickStats.communicationsSent,\"\\n- Tasks Completed: \").concat(quickStats.tasksCompleted,\"/\").concat(tasks.length,\"\\n\\n\\uD83D\\uDCC1 **Documentation:**\\nAll crisis data has been saved to your MemoryVault:\\n- Full incident report saved to Analytics & Reports\\n- Communications archived in Crisis Management\\n- Decision log preserved for compliance\\n- Timeline documented for review\\n\\n\\uD83D\\uDCA1 **Recommended Next Steps:**\\n1. Schedule a post-incident review within 48 hours\\n2. Update your crisis plan based on lessons learned\\n3. Recognize team members for their response\\n4. Follow up with stakeholders as needed\\n5. Review the saved report for improvement areas\\n\\nWould you like me to help you:\\n- Create a detailed post-incident analysis?\\n- Schedule the review meeting?\\n- Draft follow-up communications?\\n- Update your crisis plan with lessons learned?\"),timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,debriefMessage]);};// Quick action buttons\nconst quickActions=[{icon:FileText,label:\"Create Crisis Plan\",action:()=>setShowPlanGenerator(true),disabled:!!crisisPlan,color:\"blue\"},{icon:Shield,label:\"View Crisis Plan\",action:()=>setShowResources(true),disabled:!crisisPlan,color:\"purple\"},{icon:Flame,label:\"Activate Crisis Mode\",action:activateCrisisMode,disabled:crisisStatus===\"active\"||!crisisPlan,color:\"red\"},{icon:Brain,label:\"Crisis Training\",action:()=>sendMessage(\"Let's run a crisis simulation to test our readiness\"),color:\"green\"}];// Render Crisis Plan Section\nconst renderCrisisPlanSection=(section,data)=>{const isEditing=editingSection===section;return/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1.5rem\",background:\"white\",borderRadius:\"0.75rem\",border:\"1px solid #e5e7eb\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1rem 1.5rem\",background:\"#f9fafb\",borderBottom:\"1px solid #e5e7eb\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#111827\",margin:0},children:section.title}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:section.editable&&!isEditing&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setEditingSection(section.key),style:{padding:\"0.25rem 0.75rem\",fontSize:\"0.875rem\",color:\"#4f46e5\",background:\"white\",border:\"1px solid #4f46e5\",borderRadius:\"0.375rem\",cursor:\"pointer\",display:\"flex\",alignItems:\"center\",gap:\"0.25rem\"},children:[/*#__PURE__*/_jsx(Pencil,{style:{width:\"14px\",height:\"14px\"}}),\"Edit\"]})})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1.5rem\"},children:isEditing?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"1rem\",display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingSection(null),style:{padding:\"0.5rem 1rem\",background:\"#10b981\",color:\"white\",border:\"none\",borderRadius:\"0.375rem\",cursor:\"pointer\"},children:\"Save Changes\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditingSection(null),style:{padding:\"0.5rem 1rem\",background:\"#6b7280\",color:\"white\",border:\"none\",borderRadius:\"0.375rem\",cursor:\"pointer\"},children:\"Cancel\"})]})}):/*#__PURE__*/_jsx(\"div\",{children:data})})]});};const containerStyle={minHeight:\"100vh\",background:\"#f3f4f6\",fontFamily:'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif'};const getSeverityColor=severity=>{switch(severity){case\"critical\":return\"#dc2626\";case\"high\":return\"#ea580c\";case\"medium\":return\"#f59e0b\";default:return\"#10b981\";}};return/*#__PURE__*/_jsxs(\"div\",{style:containerStyle,children:[/*#__PURE__*/_jsx(\"div\",{style:{background:\"white\",borderBottom:\"1px solid #e5e7eb\",position:\"sticky\",top:0,zIndex:40},children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"1400px\",margin:\"0 auto\",padding:\"1rem 1.5rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"1rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{background:crisisStatus===\"active\"?\"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)\":\"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)\",borderRadius:\"0.75rem\",padding:\"0.75rem\",transition:\"all 0.3s ease\"},children:/*#__PURE__*/_jsx(Shield,{style:{width:\"24px\",height:\"24px\",color:\"white\"}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:\"1.5rem\",fontWeight:\"700\",color:\"#111827\",margin:0},children:\"Crisis Command Center\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",margin:0},children:selectedProject?\"\".concat(selectedProject.name):\"AI-Powered Crisis Management\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"1rem\"},children:[crisisStatus===\"active\"&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\",padding:\"0.5rem 1rem\",background:\"rgba(220, 38, 38, 0.1)\",border:\"1px solid rgba(220, 38, 38, 0.3)\",borderRadius:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Timer,{style:{width:\"16px\",height:\"16px\",color:\"#dc2626\"}}),/*#__PURE__*/_jsx(\"span\",{style:{fontFamily:\"monospace\",fontWeight:\"600\",color:\"#dc2626\"},children:elapsedTime})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"0.5rem 1rem\",background:crisisStatus===\"active\"?\"rgba(220, 38, 38, 0.1)\":\"rgba(16, 185, 129, 0.1)\",border:\"1px solid \".concat(crisisStatus===\"active\"?\"rgba(220, 38, 38, 0.3)\":\"rgba(16, 185, 129, 0.3)\"),borderRadius:\"0.5rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"8px\",height:\"8px\",background:crisisStatus===\"active\"?\"#dc2626\":\"#10b981\",borderRadius:\"50%\",animation:crisisStatus===\"active\"?\"pulse 2s infinite\":\"none\"}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.875rem\",fontWeight:\"600\",color:crisisStatus===\"active\"?\"#dc2626\":\"#10b981\"},children:crisisStatus===\"active\"?\"Crisis Active\":\"Monitoring\"})]}),crisisStatus===\"active\"?/*#__PURE__*/_jsxs(\"button\",{onClick:deactivateCrisisMode,style:{padding:\"0.625rem 1.25rem\",background:\"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"600\",cursor:\"pointer\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\",transition:\"all 0.2s\"},children:[/*#__PURE__*/_jsx(XCircle,{style:{width:\"16px\",height:\"16px\"}}),\"End Crisis Mode\"]}):/*#__PURE__*/_jsxs(\"button\",{onClick:activateCrisisMode,disabled:!crisisPlan,style:{padding:\"0.625rem 1.25rem\",background:crisisPlan?\"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)\":\"#9ca3af\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"600\",cursor:crisisPlan?\"pointer\":\"not-allowed\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\",opacity:crisisPlan?1:0.5},children:[/*#__PURE__*/_jsx(Flame,{style:{width:\"16px\",height:\"16px\"}}),\"Activate Crisis Mode\"]})]})]})})}),/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"1400px\",margin:\"0 auto\",padding:\"1.5rem\"},children:crisisStatus===\"monitoring\"?/*#__PURE__*/// Pre-Crisis View - AI Assistant Focused\n_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 380px\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\",display:\"flex\",flexDirection:\"column\",height:\"calc(100vh - 140px)\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\",borderBottom:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.75rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"40px\",height:\"40px\",background:\"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)\",borderRadius:\"0.5rem\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(Bot,{style:{width:\"24px\",height:\"24px\",color:\"white\"}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#111827\",margin:0},children:\"AI Crisis Management Expert\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",margin:0},children:isAIResponding?\"Analyzing...\":\"Ready to assist\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowQueryHelp(!showQueryHelp),style:{padding:\"0.5rem\",background:\"transparent\",border:\"none\",borderRadius:\"0.375rem\",cursor:\"pointer\",color:\"#6b7280\",transition:\"all 0.2s\"},children:/*#__PURE__*/_jsx(HelpCircle,{style:{width:\"20px\",height:\"20px\"}})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:\"0.5rem\",marginTop:\"1rem\",flexWrap:\"wrap\"},children:quickActions.map((action,idx)=>/*#__PURE__*/_jsxs(\"button\",{onClick:action.action,disabled:action.disabled,style:{padding:\"0.5rem 1rem\",background:action.disabled?\"#e5e7eb\":\"white\",color:action.disabled?\"#9ca3af\":\"#374151\",border:\"1px solid \".concat(action.disabled?\"#e5e7eb\":\"#d1d5db\"),borderRadius:\"0.5rem\",fontSize:\"0.875rem\",fontWeight:\"500\",cursor:action.disabled?\"not-allowed\":\"pointer\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\",transition:\"all 0.2s\"},onMouseEnter:e=>{if(!action.disabled){e.currentTarget.style.borderColor=\"#9ca3af\";e.currentTarget.style.background=\"#f9fafb\";}},onMouseLeave:e=>{if(!action.disabled){e.currentTarget.style.borderColor=\"#d1d5db\";e.currentTarget.style.background=\"white\";}},children:[/*#__PURE__*/_jsx(action.icon,{style:{width:\"16px\",height:\"16px\"}}),action.label]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{ref:chatContainerRef,style:{flex:1,overflowY:\"auto\",padding:\"1.5rem\"},children:[messages.map(message=>/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:message.type===\"user\"?\"flex-end\":\"flex-start\",marginBottom:\"1rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"80%\",padding:\"1rem\",borderRadius:\"0.75rem\",background:message.type===\"user\"?\"linear-gradient(135deg, #4f46e5 0%, #6366f1 100%)\":message.error?\"#fee2e2\":\"#f3f4f6\",color:message.type===\"user\"?\"white\":\"#111827\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{whiteSpace:\"pre-wrap\",fontSize:\"0.9375rem\",lineHeight:\"1.5\"},children:message.content}),message.type===\"ai\"&&message.actions&&message.actions.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"0.75rem\",paddingTop:\"0.75rem\",borderTop:\"1px solid rgba(0, 0, 0, 0.1)\",display:\"flex\",flexWrap:\"wrap\",gap:\"0.5rem\"},children:message.actions.map((action,idx)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>sendMessage(action),style:{padding:\"0.375rem 0.75rem\",background:\"white\",color:\"#4f46e5\",border:\"1px solid #e0e7ff\",borderRadius:\"0.375rem\",fontSize:\"0.8125rem\",cursor:\"pointer\",transition:\"all 0.2s\"},children:action},idx))}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.75rem\",marginTop:\"0.5rem\",opacity:0.7},children:message.timestamp})]})},message.id)),isAIResponding&&/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-start\"},children:/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1rem\",background:\"#f3f4f6\",borderRadius:\"0.75rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Loader2,{style:{width:\"16px\",height:\"16px\",animation:\"spin 1s linear infinite\"}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:\"AI is thinking...\"})]})})})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1.5rem\",borderTop:\"1px solid #e5e7eb\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.75rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:e=>e.key===\"Enter\"&&sendMessage(),placeholder:\"Ask about crisis scenarios, best practices, or get help...\",style:{flex:1,padding:\"0.75rem 1rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.5rem\",fontSize:\"0.9375rem\",outline:\"none\",transition:\"all 0.2s\"},onFocus:e=>{e.target.style.borderColor=\"#8b5cf6\";e.target.style.boxShadow=\"0 0 0 3px rgba(139, 92, 246, 0.1)\";},onBlur:e=>{e.target.style.borderColor=\"#e5e7eb\";e.target.style.boxShadow=\"none\";}}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>sendMessage(),disabled:!input.trim()||isAIResponding,style:{padding:\"0.75rem 1.5rem\",background:\"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"600\",cursor:!input.trim()||isAIResponding?\"not-allowed\":\"pointer\",opacity:!input.trim()||isAIResponding?0.5:1,display:\"flex\",alignItems:\"center\",gap:\"0.5rem\",transition:\"all 0.2s\"},children:[/*#__PURE__*/_jsx(Send,{style:{width:\"16px\",height:\"16px\"}}),\"Send\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:\"1rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Activity,{style:{width:\"18px\",height:\"18px\",color:\"#6366f1\"}}),\"Crisis Readiness\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.75rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:\"0.75rem\",background:crisisPlan?\"#d1fae5\":\"#fee2e2\",borderRadius:\"0.5rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[crisisPlan?/*#__PURE__*/_jsx(CheckCircle,{style:{width:\"16px\",height:\"16px\",color:\"#10b981\"}}):/*#__PURE__*/_jsx(XCircle,{style:{width:\"16px\",height:\"16px\",color:\"#dc2626\"}}),/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"0.875rem\",fontWeight:\"500\",color:crisisPlan?\"#047857\":\"#b91c1c\"},children:[\"Crisis Plan \",crisisPlan?\"Active\":\"Not Created\"]})]})}),crisisPlan&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",marginBottom:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Scenarios:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"600\",color:\"#111827\"},children:((_crisisPlan$scenarios=crisisPlan.scenarios)===null||_crisisPlan$scenarios===void 0?void 0:_crisisPlan$scenarios.length)||0})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",marginBottom:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Team Members:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:\"600\",color:\"#111827\"},children:[((_crisisPlan$crisisTea11=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea11===void 0?void 0:_crisisPlan$crisisTea11.filter(m=>m.name).length)||0,\"/\",((_crisisPlan$crisisTea12=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea12===void 0?void 0:_crisisPlan$crisisTea12.length)||0]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Stakeholders:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:\"600\",color:\"#111827\"},children:((_crisisPlan$stakehold=crisisPlan.stakeholders)===null||_crisisPlan$stakehold===void 0?void 0:_crisisPlan$stakehold.length)||0})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowResources(true),style:{width:\"100%\",padding:\"0.625rem\",background:\"white\",color:\"#6366f1\",border:\"1px solid #e0e7ff\",borderRadius:\"0.5rem\",fontSize:\"0.875rem\",fontWeight:\"500\",cursor:\"pointer\",transition:\"all 0.2s\"},children:\"View Crisis Plan\"})]})]})]}),showQueryHelp&&/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\"},children:\"Example Questions\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.5rem\"},children:[\"How do I handle a data breach?\",\"What should I communicate during a crisis?\",\"Create a crisis management plan\",\"Who should be on my crisis team?\",\"What are the first steps in a crisis?\"].map((question,idx)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setInput(question);setShowQueryHelp(false);},style:{padding:\"0.5rem 0.75rem\",background:\"#f3f4f6\",border:\"none\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",color:\"#374151\",textAlign:\"left\",cursor:\"pointer\",transition:\"all 0.2s\"},onMouseEnter:e=>{e.currentTarget.style.background=\"#e5e7eb\";},onMouseLeave:e=>{e.currentTarget.style.background=\"#f3f4f6\";},children:question},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:\"1rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\"},children:\"Conversation Analysis\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.75rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{flex:1,height:\"8px\",background:\"#e5e7eb\",borderRadius:\"9999px\",overflow:\"hidden\"},children:/*#__PURE__*/_jsx(\"div\",{style:{height:\"100%\",width:crisisSeverity===\"critical\"?\"100%\":crisisSeverity===\"high\"?\"75%\":crisisSeverity===\"medium\"?\"50%\":\"25%\",background:getSeverityColor(crisisSeverity),transition:\"all 0.3s ease\"}})}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.875rem\",fontWeight:\"600\",color:getSeverityColor(crisisSeverity)},children:crisisSeverity.toUpperCase()})]})]})]})]}):/*#__PURE__*/// Crisis Mode Active - Operational View\n_jsxs(\"div\",{style:{display:\"flex\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",marginBottom:\"1.5rem\",border:\"2px solid #dc2626\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.5rem\",fontWeight:\"700\",color:\"#dc2626\",marginBottom:\"0.25rem\"},children:\"Crisis War Room\"}),selectedScenario&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"1rem\",color:\"#7f1d1d\"},children:[\"Active Scenario: \",selectedScenario.title]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(4, 1fr)\",gap:\"2rem\"},children:Object.entries(quickStats).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"1.5rem\",fontWeight:\"700\",color:\"#dc2626\",margin:0},children:value}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.75rem\",color:\"#6b7280\",margin:0},children:key.replace(/([A-Z])/g,\" $1\").trim()})]},key);})})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Users,{style:{width:\"20px\",height:\"20px\",color:\"#6366f1\"}}),\"Crisis Team Status\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.75rem\"},children:Object.values(teamStatus).map(member=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"0.75rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:\"500\",color:\"#111827\",marginBottom:\"0.25rem\"},children:member.name||member.role}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:member.title||member.role})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:member.status===\"active\"?/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.25rem\",fontSize:\"0.875rem\",color:\"#10b981\"},children:[/*#__PURE__*/_jsx(CheckCircle,{style:{width:\"16px\",height:\"16px\"}}),\"Active\"]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setTeamStatus(prev=>_objectSpread(_objectSpread({},prev),{},{[member.id||member.role]:_objectSpread(_objectSpread({},member),{},{status:\"active\"})}));setQuickStats(prev=>_objectSpread(_objectSpread({},prev),{},{teamMembersActive:prev.teamMembersActive+1}));},style:{padding:\"0.375rem 0.75rem\",background:\"#e0e7ff\",color:\"#4338ca\",border:\"none\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",cursor:\"pointer\"},children:\"Check In\"})})]},member.id||member.role))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\",height:\"500px\",// Fixed height\ndisplay:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\",flexShrink:0},children:[/*#__PURE__*/_jsx(ListChecks,{style:{width:\"20px\",height:\"20px\",color:\"#6366f1\"}}),\"Critical Tasks\"]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:\"auto\",paddingRight:\"0.5rem\"},children:tasks.map(task=>/*#__PURE__*/_jsx(\"div\",{style:{padding:\"0.75rem\",marginBottom:\"0.5rem\",background:task.priority===\"critical\"?\"#fee2e2\":\"#fef3c7\",borderRadius:\"0.5rem\",border:\"1px solid \".concat(task.priority===\"critical\"?\"#fecaca\":\"#fde68a\")},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"start\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:\"500\",color:\"#111827\",marginBottom:\"0.25rem\"},children:task.task}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:[\"Assigned: \",task.assignee]})]}),/*#__PURE__*/_jsxs(\"select\",{value:task.status,onChange:e=>{setTasks(prev=>prev.map(t=>t.id===task.id?_objectSpread(_objectSpread({},t),{},{status:e.target.value}):t));if(e.target.value===\"completed\"){setQuickStats(prev=>_objectSpread(_objectSpread({},prev),{},{tasksCompleted:prev.tasksCompleted+1}));}},style:{padding:\"0.375rem\",fontSize:\"0.875rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",background:\"white\",minWidth:\"120px\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in-progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"completed\",children:\"Completed\"})]})]})},task.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:\"1 / -1\",background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(MessageCircle,{style:{width:\"20px\",height:\"20px\",color:\"#6366f1\"}}),\"Stakeholder Communications\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(300px, 1fr))\",gap:\"1rem\"},children:crisisPlan===null||crisisPlan===void 0?void 0:(_crisisPlan$communica=crisisPlan.communicationPlans)===null||_crisisPlan$communica===void 0?void 0:_crisisPlan$communica.map((plan,idx)=>{var _communicationDrafts$;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\",border:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",marginBottom:\"0.75rem\"},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\"},children:plan.stakeholder}),((_communicationDrafts$=communicationDrafts[plan.stakeholder])===null||_communicationDrafts$===void 0?void 0:_communicationDrafts$.status)===\"saved\"?/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",padding:\"0.25rem 0.5rem\",background:\"#d1fae5\",color:\"#047857\",borderRadius:\"0.25rem\"},children:\"\\u2713 Sent\"}):communicationDrafts[plan.stakeholder]?/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",padding:\"0.25rem 0.5rem\",background:\"#e0e7ff\",color:\"#4338ca\",borderRadius:\"0.25rem\"},children:\"Drafted\"}):null]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginBottom:\"0.75rem\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Channel: \",plan.primaryChannel]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Timing: \",plan.timing]})]}),communicationDrafts[plan.stakeholder]?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setCurrentDraftStakeholder(plan.stakeholder);setShowDraftModal(true);},style:{flex:1,padding:\"0.5rem\",background:\"#6366f1\",color:\"white\",border:\"none\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",cursor:\"pointer\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:\"0.25rem\"},children:[/*#__PURE__*/_jsx(Eye,{style:{width:\"14px\",height:\"14px\"}}),\"View Draft\"]}),communicationDrafts[plan.stakeholder].status!==\"saved\"&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>saveCommunication(plan.stakeholder,communicationDrafts[plan.stakeholder]),style:{padding:\"0.5rem\",background:\"#10b981\",color:\"white\",border:\"none\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",cursor:\"pointer\"},title:\"Quick save without viewing\",children:/*#__PURE__*/_jsx(Save,{style:{width:\"14px\",height:\"14px\"}})})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>draftCommunication(plan.stakeholder,plan),style:{width:\"100%\",padding:\"0.5rem\",background:\"#6366f1\",color:\"white\",border:\"none\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",cursor:\"pointer\"},children:\"Draft Response\"})]},idx);})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{gridColumn:\"1 / -1\",display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(ClipboardCheck,{style:{width:\"20px\",height:\"20px\",color:\"#6366f1\"}}),\"Decision Log\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.5rem\",maxHeight:\"300px\",overflowY:\"auto\"},children:decisionLog.map(entry=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"0.75rem\",background:\"#f9fafb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",marginBottom:\"0.25rem\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:\"500\",color:\"#111827\"},children:entry.action}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",color:\"#6b7280\"},children:new Date(entry.timestamp).toLocaleTimeString()})]}),entry.details&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"#6b7280\"},children:entry.details})]},entry.id))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",padding:\"1.5rem\",boxShadow:\"0 1px 3px rgba(0, 0, 0, 0.1)\"},children:[/*#__PURE__*/_jsxs(\"h3\",{style:{fontSize:\"1.125rem\",fontWeight:\"600\",color:\"#111827\",marginBottom:\"1rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Phone,{style:{width:\"20px\",height:\"20px\",color:\"#6366f1\"}}),\"Emergency Contacts\"]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:\"0.75rem\"},children:crisisPlan!==null&&crisisPlan!==void 0&&crisisPlan.emergencyContacts&&crisisPlan.emergencyContacts.length>0?crisisPlan.emergencyContacts.map((contact,idx)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{navigator.clipboard.writeText(contact.number);// Show copied feedback\nconst copiedMsg={id:Date.now()+200,type:\"ai\",content:\"\\uD83D\\uDCCB Copied \".concat(contact.name,\": \").concat(contact.number),timestamp:new Date().toLocaleTimeString()};setMessages(prev=>[...prev,copiedMsg]);},style:{padding:\"0.75rem\",background:\"#f3f4f6\",border:\"1px solid #e5e7eb\",borderRadius:\"0.5rem\",cursor:\"pointer\",textAlign:\"left\",transition:\"all 0.2s\"},onMouseEnter:e=>{e.currentTarget.style.background=\"#e5e7eb\";},onMouseLeave:e=>{e.currentTarget.style.background=\"#f3f4f6\";},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:\"500\",color:\"#111827\",marginBottom:\"0.25rem\"},children:contact.name}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",display:\"flex\",alignItems:\"center\",gap:\"0.25rem\"},children:[/*#__PURE__*/_jsx(Phone,{style:{width:\"12px\",height:\"12px\"}}),contact.number]})]},idx)):// Default emergency contacts\n[{name:\"Legal Hotline\",number:\"1-800-LEGAL\"},{name:\"PR Agency\",number:\"1-800-CRISIS\"},{name:\"IT Security\",number:\"1-800-SECURE\"},{name:\"Insurance\",number:\"1-800-INSURE\"}].map((contact,idx)=>/*#__PURE__*/_jsxs(\"button\",{style:{padding:\"0.75rem\",background:\"#f3f4f6\",border:\"1px solid #e5e7eb\",borderRadius:\"0.5rem\",cursor:\"pointer\",textAlign:\"left\",transition:\"all 0.2s\"},onMouseEnter:e=>{e.currentTarget.style.background=\"#e5e7eb\";},onMouseLeave:e=>{e.currentTarget.style.background=\"#f3f4f6\";},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontWeight:\"500\",color:\"#111827\",marginBottom:\"0.25rem\"},children:contact.name}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:contact.number})]},idx))})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:aiExpanded?\"380px\":\"300px\",transition:\"width 0.3s ease\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",boxShadow:\"0 4px 6px rgba(0, 0, 0, 0.1)\",height:aiExpanded?\"calc(100vh - 140px)\":\"80px\",display:\"flex\",flexDirection:\"column\",overflow:\"hidden\",border:crisisStatus===\"active\"?\"2px solid #dc2626\":\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1rem\",borderBottom:aiExpanded?\"1px solid #e5e7eb\":\"none\",background:crisisStatus===\"active\"?\"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)\":\"linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%)\",cursor:\"pointer\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},onClick:()=>!aiExpanded&&setAiExpanded(true),children:aiExpanded?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Bot,{style:{width:\"20px\",height:\"20px\",color:\"white\"}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.875rem\",fontWeight:\"600\",color:\"white\"},children:\"AI Crisis Advisor\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();setAiExpanded(false);},style:{padding:\"0.25rem\",background:\"transparent\",border:\"none\",cursor:\"pointer\",color:\"white\"},children:/*#__PURE__*/_jsx(Minimize2,{style:{width:\"16px\",height:\"16px\"}})})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.75rem\",width:\"100%\"},children:[/*#__PURE__*/_jsx(Bot,{style:{width:\"24px\",height:\"24px\",color:\"white\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"0.875rem\",fontWeight:\"600\",color:\"white\"},children:\"\\uD83D\\uDEA8 Crisis AI Advisor\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"0.75rem\",color:\"rgba(255, 255, 255, 0.8)\"},children:isAIResponding?\"Analyzing...\":\"Click to expand\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"0.25rem 0.5rem\",background:\"rgba(255, 255, 255, 0.2)\",borderRadius:\"0.25rem\",fontSize:\"0.75rem\",color:\"white\",fontWeight:\"600\"},children:[messages.length,\" msgs\"]})]})}),aiExpanded&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{ref:chatContainerRef,style:{flex:1,overflowY:\"auto\",padding:\"1rem\"},children:[messages.map(message=>/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:\"0.75rem\",display:\"flex\",justifyContent:message.type===\"user\"?\"flex-end\":\"flex-start\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"85%\",padding:\"0.75rem\",borderRadius:\"0.5rem\",background:message.type===\"user\"?\"#4f46e5\":\"#f3f4f6\",color:message.type===\"user\"?\"white\":\"#111827\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",lineHeight:\"1.4\",whiteSpace:\"pre-wrap\",margin:0},children:message.content}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.75rem\",marginTop:\"0.25rem\",opacity:0.7,margin:\"0.25rem 0 0 0\"},children:message.timestamp})]})},message.id)),isAIResponding&&/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-start\"},children:/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1rem\",background:\"#f3f4f6\",borderRadius:\"0.75rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Loader2,{style:{width:\"16px\",height:\"16px\",animation:\"spin 1s linear infinite\"}}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:\"AI is analyzing the situation...\"})]})})})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1rem\",borderTop:\"1px solid #e5e7eb\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:input,onChange:e=>setInput(e.target.value),onKeyPress:e=>e.key===\"Enter\"&&sendMessage(),placeholder:\"Ask for crisis guidance...\",style:{flex:1,padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",outline:\"none\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>sendMessage(),disabled:!input.trim()||isAIResponding,style:{padding:\"0.5rem\",background:\"#dc2626\",color:\"white\",border:\"none\",borderRadius:\"0.375rem\",cursor:!input.trim()||isAIResponding?\"not-allowed\":\"pointer\",opacity:!input.trim()||isAIResponding?0.5:1},children:/*#__PURE__*/_jsx(Send,{style:{width:\"16px\",height:\"16px\"}})})]})})]})]})})]})}),showScenarioModal&&crisisPlan&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",inset:0,background:\"rgba(0, 0, 0, 0.5)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:50,padding:\"1rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",maxWidth:\"600px\",width:\"100%\",maxHeight:\"80vh\",overflow:\"hidden\",display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\",borderBottom:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#111827\"},children:\"Select Crisis Scenario\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginTop:\"0.25rem\"},children:\"Choose the scenario that matches your current situation\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:\"auto\",padding:\"1.5rem\"},children:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.75rem\"},children:(_crisisPlan$scenarios2=crisisPlan.scenarios)===null||_crisisPlan$scenarios2===void 0?void 0:_crisisPlan$scenarios2.map((scenario,idx)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>selectCrisisScenario(scenario),style:{padding:\"1rem\",background:\"white\",border:\"1px solid \".concat(scenario.isUniversal?\"#4f46e5\":\"#e5e7eb\"),borderRadius:\"0.5rem\",cursor:\"pointer\",textAlign:\"left\",transition:\"all 0.2s\"},onMouseEnter:e=>{e.currentTarget.style.background=scenario.isUniversal?\"#e0e7ff\":\"#f9fafb\";},onMouseLeave:e=>{e.currentTarget.style.background=\"white\";},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"start\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.25rem\"},children:scenario.title}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:scenario.description})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.25rem\",marginLeft:\"1rem\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",padding:\"0.25rem 0.5rem\",background:scenario.likelihood===\"High\"?\"#fee2e2\":scenario.likelihood===\"Medium\"?\"#fef3c7\":\"#d1fae5\",color:scenario.likelihood===\"High\"?\"#b91c1c\":scenario.likelihood===\"Medium\"?\"#a16207\":\"#047857\",borderRadius:\"0.25rem\"},children:scenario.likelihood}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",padding:\"0.25rem 0.5rem\",background:scenario.impact===\"Critical\"?\"#fee2e2\":scenario.impact===\"Major\"?\"#fed7aa\":scenario.impact===\"Moderate\"?\"#fef3c7\":\"#d1fae5\",color:scenario.impact===\"Critical\"?\"#b91c1c\":scenario.impact===\"Major\"?\"#c2410c\":scenario.impact===\"Moderate\"?\"#a16207\":\"#047857\",borderRadius:\"0.25rem\"},children:scenario.impact})]})]})},idx))})}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1.5rem\",borderTop:\"1px solid #e5e7eb\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowScenarioModal(false),style:{width:\"100%\",padding:\"0.75rem\",background:\"#6b7280\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"500\",cursor:\"pointer\"},children:\"Cancel\"})})]})}),showPlanGenerator&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",inset:0,background:\"rgba(0, 0, 0, 0.5)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:50,padding:\"1rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",maxWidth:\"600px\",width:\"100%\",maxHeight:\"90vh\",overflow:\"hidden\",display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\",borderBottom:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#111827\"},children:\"Generate Crisis Management Plan\"}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginTop:\"0.25rem\"},children:\"Create a comprehensive plan tailored to your industry\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:\"auto\",padding:\"1.5rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.5rem\"},children:\"Industry *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:planForm.industry,onChange:e=>setPlanForm(_objectSpread(_objectSpread({},planForm),{},{industry:e.target.value})),placeholder:\"e.g., Healthcare, Technology, Finance\",style:{width:\"100%\",padding:\"0.75rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.5rem\",fontSize:\"0.875rem\"}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.5rem\"},children:\"Company Size\"}),/*#__PURE__*/_jsxs(\"select\",{value:planForm.companySize,onChange:e=>setPlanForm(_objectSpread(_objectSpread({},planForm),{},{companySize:e.target.value})),style:{width:\"100%\",padding:\"0.75rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.5rem\",fontSize:\"0.875rem\"},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select size\"}),/*#__PURE__*/_jsx(\"option\",{value:\"startup\",children:\"Startup (1-50)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"small\",children:\"Small (51-200)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium (201-1000)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"large\",children:\"Large (1000+)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.5rem\"},children:\"Key Concerns\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.5rem\"},children:[planForm.keyConcerns.map((concern,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:concern,onChange:e=>{const updated=[...planForm.keyConcerns];updated[idx]=e.target.value;setPlanForm(_objectSpread(_objectSpread({},planForm),{},{keyConcerns:updated}));},placeholder:\"e.g., Data breach, Product recall\",style:{flex:1,padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setPlanForm(_objectSpread(_objectSpread({},planForm),{},{keyConcerns:planForm.keyConcerns.filter((_,i)=>i!==idx)}));},style:{padding:\"0.5rem\",background:\"#fee2e2\",color:\"#dc2626\",border:\"none\",borderRadius:\"0.375rem\",cursor:\"pointer\"},children:/*#__PURE__*/_jsx(X,{style:{width:\"16px\",height:\"16px\"}})})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPlanForm(_objectSpread(_objectSpread({},planForm),{},{keyConcerns:[...planForm.keyConcerns,\"\"]})),style:{padding:\"0.5rem\",background:\"#f3f4f6\",color:\"#374151\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",cursor:\"pointer\"},children:\"+ Add Concern\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.5rem\"},children:\"Crisis Team Members\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.5rem\"},children:[planForm.teamMembers.map((member,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"0.75rem\",background:\"#f9fafb\",borderRadius:\"0.375rem\",border:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:\"0.5rem\",marginBottom:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:member.name,onChange:e=>{const updated=[...planForm.teamMembers];updated[idx].name=e.target.value;setPlanForm(_objectSpread(_objectSpread({},planForm),{},{teamMembers:updated}));},placeholder:\"Name\",style:{padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:member.role,onChange:e=>{const updated=[...planForm.teamMembers];updated[idx].role=e.target.value;setPlanForm(_objectSpread(_objectSpread({},planForm),{},{teamMembers:updated}));},placeholder:\"Role/Title\",style:{padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr auto\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:member.email,onChange:e=>{const updated=[...planForm.teamMembers];updated[idx].email=e.target.value;setPlanForm(_objectSpread(_objectSpread({},planForm),{},{teamMembers:updated}));},placeholder:\"Email\",style:{padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:member.phone,onChange:e=>{const updated=[...planForm.teamMembers];updated[idx].phone=e.target.value;setPlanForm(_objectSpread(_objectSpread({},planForm),{},{teamMembers:updated}));},placeholder:\"Phone\",style:{padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setPlanForm(_objectSpread(_objectSpread({},planForm),{},{teamMembers:planForm.teamMembers.filter((_,i)=>i!==idx)}));},style:{padding:\"0.5rem\",background:\"#fee2e2\",color:\"#dc2626\",border:\"none\",borderRadius:\"0.375rem\",cursor:\"pointer\"},children:/*#__PURE__*/_jsx(X,{style:{width:\"16px\",height:\"16px\"}})})]})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPlanForm(_objectSpread(_objectSpread({},planForm),{},{teamMembers:[...planForm.teamMembers,{name:\"\",role:\"\",email:\"\",phone:\"\"}]})),style:{padding:\"0.5rem\",background:\"#f3f4f6\",color:\"#374151\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",cursor:\"pointer\"},children:\"+ Add Team Member\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.5rem\"},children:\"Emergency Contacts\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.5rem\"},children:[planForm.emergencyContacts.map((contact,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:contact.name,onChange:e=>{const updated=[...planForm.emergencyContacts];updated[idx].name=e.target.value;setPlanForm(_objectSpread(_objectSpread({},planForm),{},{emergencyContacts:updated}));},placeholder:\"Contact Name (e.g., Legal Hotline)\",style:{flex:2,padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:contact.number,onChange:e=>{const updated=[...planForm.emergencyContacts];updated[idx].number=e.target.value;setPlanForm(_objectSpread(_objectSpread({},planForm),{},{emergencyContacts:updated}));},placeholder:\"Phone Number\",style:{flex:1,padding:\"0.5rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setPlanForm(_objectSpread(_objectSpread({},planForm),{},{emergencyContacts:planForm.emergencyContacts.filter((_,i)=>i!==idx)}));},style:{padding:\"0.5rem\",background:\"#fee2e2\",color:\"#dc2626\",border:\"none\",borderRadius:\"0.375rem\",cursor:\"pointer\"},children:/*#__PURE__*/_jsx(X,{style:{width:\"16px\",height:\"16px\"}})})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPlanForm(_objectSpread(_objectSpread({},planForm),{},{emergencyContacts:[...planForm.emergencyContacts,{name:\"\",number:\"\"}]})),style:{padding:\"0.5rem\",background:\"#f3f4f6\",color:\"#374151\",border:\"1px solid #e5e7eb\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",cursor:\"pointer\"},children:\"+ Add Emergency Contact\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:{display:\"block\",fontSize:\"0.875rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.5rem\"},children:\"Additional Context\"}),/*#__PURE__*/_jsx(\"textarea\",{value:planForm.additionalContext,onChange:e=>setPlanForm(_objectSpread(_objectSpread({},planForm),{},{additionalContext:e.target.value})),placeholder:\"Any other relevant information about your organization...\",rows:3,style:{width:\"100%\",padding:\"0.75rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.5rem\",fontSize:\"0.875rem\"}})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\",borderTop:\"1px solid #e5e7eb\",display:\"flex\",gap:\"0.75rem\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPlanGenerator(false),style:{flex:1,padding:\"0.75rem\",background:\"#6b7280\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"500\",cursor:\"pointer\"},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:generateCrisisPlan,disabled:!planForm.industry||planGenerating,style:{flex:1,padding:\"0.75rem\",background:planForm.industry&&!planGenerating?\"#6366f1\":\"#9ca3af\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"500\",cursor:planForm.industry&&!planGenerating?\"pointer\":\"not-allowed\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",gap:\"0.5rem\"},children:planGenerating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{style:{width:\"16px\",height:\"16px\",animation:\"spin 1s linear infinite\"}}),\"Generating...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sparkles,{style:{width:\"16px\",height:\"16px\"}}),\"Generate Plan\"]})})]})]})}),showResources&&crisisPlan&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",inset:0,background:\"rgba(0, 0, 0, 0.5)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:50,padding:\"1rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",maxWidth:\"900px\",width:\"100%\",maxHeight:\"90vh\",overflow:\"hidden\",display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\",borderBottom:\"1px solid #e5e7eb\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#111827\"},children:\"Crisis Management Plan\"}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginTop:\"0.25rem\"},children:[crisisPlan.industry,\" Industry \\u2022 Generated\",\" \",new Date(crisisPlan.generatedAt||Date.now()).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:async()=>{await saveToMemoryVault({content:JSON.stringify(crisisPlan,null,2),title:\"Crisis Management Plan - \".concat(crisisPlan.industry),type:\"crisis-plan\",source:\"crisis-command-center\",folder_type:\"crisis-management\",tags:[\"crisis-plan\",crisisPlan.industry,\"complete\"],metadata:{generated_at:crisisPlan.generatedAt,project_id:selectedProject===null||selectedProject===void 0?void 0:selectedProject.id,industry:crisisPlan.industry}});},style:{padding:\"0.5rem 1rem\",background:\"#10b981\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"500\",cursor:\"pointer\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Save,{style:{width:\"16px\",height:\"16px\"}}),\"Save to MemoryVault\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:\"auto\",padding:\"1.5rem\"},children:[{key:\"objectives\",title:\"Crisis Management Objectives\",icon:Target,editable:true,data:/*#__PURE__*/_jsx(\"ul\",{style:{marginLeft:\"1.5rem\",color:\"#4b5563\"},children:(_crisisPlan$objective=crisisPlan.objectives)===null||_crisisPlan$objective===void 0?void 0:_crisisPlan$objective.map((obj,idx)=>/*#__PURE__*/_jsx(\"li\",{style:{marginBottom:\"0.5rem\"},children:obj},idx))})},{key:\"team\",title:\"Crisis Communications Team\",icon:Users,editable:true,data:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.75rem\"},children:(_crisisPlan$crisisTea13=crisisPlan.crisisTeam)===null||_crisisPlan$crisisTea13===void 0?void 0:_crisisPlan$crisisTea13.map((member,idx)=>{var _member$responsibilit;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.5rem\"},children:member.role}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginBottom:\"0.5rem\"},children:member.title}),member.name&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"0.875rem\",color:\"#4f46e5\"},children:[/*#__PURE__*/_jsx(UserCheck,{style:{width:\"14px\",height:\"14px\",display:\"inline\",marginRight:\"0.25rem\"}}),member.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"0.75rem\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.75rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.25rem\"},children:\"Responsibilities:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{marginLeft:\"1rem\",fontSize:\"0.75rem\",color:\"#6b7280\"},children:(_member$responsibilit=member.responsibilities)===null||_member$responsibilit===void 0?void 0:_member$responsibilit.map((resp,i)=>/*#__PURE__*/_jsx(\"li\",{children:resp},i))})]})]},idx);})})},{key:\"process\",title:\"Crisis Response Process\",icon:Activity,data:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1rem\"},children:(_crisisPlan$responseP=crisisPlan.responseProcess)===null||_crisisPlan$responseP===void 0?void 0:_crisisPlan$responseP.map((phase,idx)=>{var _phase$actions;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\"},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.5rem\"},children:[\"Phase \",idx+1,\": \",phase.phase]}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginBottom:\"0.75rem\"},children:phase.description}),/*#__PURE__*/_jsx(\"ul\",{style:{marginLeft:\"1rem\",fontSize:\"0.875rem\",color:\"#4b5563\"},children:(_phase$actions=phase.actions)===null||_phase$actions===void 0?void 0:_phase$actions.map((action,i)=>/*#__PURE__*/_jsx(\"li\",{children:action},i))})]},idx);})})},{key:\"scenarios\",title:\"Crisis Scenarios\",icon:AlertTriangle,editable:true,data:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.75rem\"},children:(_crisisPlan$scenarios3=crisisPlan.scenarios)===null||_crisisPlan$scenarios3===void 0?void 0:_crisisPlan$scenarios3.map((scenario,idx)=>/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1rem\",background:scenario.isUniversal?\"#e0e7ff\":\"#f9fafb\",borderRadius:\"0.5rem\",border:\"1px solid \".concat(scenario.isUniversal?\"#c7d2fe\":\"#e5e7eb\")},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"start\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.25rem\"},children:scenario.title}),/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:scenario.description})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",padding:\"0.25rem 0.5rem\",background:scenario.likelihood===\"High\"?\"#fee2e2\":scenario.likelihood===\"Medium\"?\"#fef3c7\":\"#d1fae5\",color:scenario.likelihood===\"High\"?\"#b91c1c\":scenario.likelihood===\"Medium\"?\"#a16207\":\"#047857\",borderRadius:\"0.25rem\"},children:scenario.likelihood}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"0.75rem\",padding:\"0.25rem 0.5rem\",background:scenario.impact===\"Critical\"?\"#fee2e2\":scenario.impact===\"Major\"?\"#fed7aa\":\"#fef3c7\",color:scenario.impact===\"Critical\"?\"#b91c1c\":scenario.impact===\"Major\"?\"#c2410c\":\"#a16207\",borderRadius:\"0.25rem\"},children:scenario.impact})]})]})},idx))})},{key:\"stakeholders\",title:\"Key Stakeholders\",icon:Globe,data:/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(250px, 1fr))\",gap:\"1rem\"},children:(_crisisPlan$stakehold2=crisisPlan.stakeholders)===null||_crisisPlan$stakehold2===void 0?void 0:_crisisPlan$stakehold2.map((stakeholder,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\",border:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsxs(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.5rem\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Building,{style:{width:\"16px\",height:\"16px\",color:\"#6366f1\"}}),typeof stakeholder===\"string\"?stakeholder:stakeholder.name||\"Stakeholder\"]}),typeof stakeholder===\"object\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[stakeholder.description&&/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginBottom:\"0.5rem\"},children:stakeholder.description}),stakeholder.impactLevel&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"0.75rem\",color:\"#6366f1\",marginBottom:\"0.25rem\"},children:[\"Impact Level: \",stakeholder.impactLevel]}),stakeholder.concerns&&stakeholder.concerns.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.75rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.25rem\"},children:\"Key Concerns:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{marginLeft:\"1rem\",fontSize:\"0.75rem\",color:\"#6b7280\"},children:stakeholder.concerns.map((concern,i)=>/*#__PURE__*/_jsx(\"li\",{children:concern},i))})]})]}),typeof stakeholder===\"string\"&&/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\"},children:\"Priority stakeholder group requiring targeted communication\"})]},idx))})},{key:\"communicationPlans\",title:\"Stakeholder Communication Plans\",icon:MessageCircle,data:/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"1rem\"},children:(_crisisPlan$communica2=crisisPlan.communicationPlans)===null||_crisisPlan$communica2===void 0?void 0:_crisisPlan$communica2.map((plan,idx)=>{var _plan$stakeholder;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.25rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\",border:\"1px solid #e5e7eb\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.5rem\"},children:typeof plan.stakeholder===\"string\"?plan.stakeholder:((_plan$stakeholder=plan.stakeholder)===null||_plan$stakeholder===void 0?void 0:_plan$stakeholder.name)||\"Stakeholder\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"1rem\",fontSize:\"0.875rem\",color:\"#6b7280\"},children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Phone,{style:{width:\"14px\",height:\"14px\",display:\"inline\",marginRight:\"0.25rem\"}}),plan.primaryChannel]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Clock,{style:{width:\"14px\",height:\"14px\",display:\"inline\",marginRight:\"0.25rem\"}}),plan.timing]})]})]}),plan.keyMessages&&plan.keyMessages.length>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.75rem\",fontWeight:\"500\",color:\"#374151\",marginBottom:\"0.5rem\"},children:\"Key Messages:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{marginLeft:\"1rem\",fontSize:\"0.875rem\",color:\"#6b7280\"},children:plan.keyMessages.map((msg,i)=>/*#__PURE__*/_jsx(\"li\",{style:{marginBottom:\"0.25rem\"},children:msg},i))})]})]},idx);})})},{key:\"eventMonitoring\",title:\"Event Monitoring\",icon:Activity,data:/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"0.75rem\"},children:[(_crisisPlan$escalatio=crisisPlan.escalationCriteria)===null||_crisisPlan$escalatio===void 0?void 0:_crisisPlan$escalatio.map((criteria,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\",display:\"flex\",alignItems:\"center\",gap:\"1rem\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"40px\",height:\"40px\",background:\"#e0e7ff\",borderRadius:\"0.5rem\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(AlertCircle,{style:{width:\"20px\",height:\"20px\",color:\"#6366f1\"}})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1},children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#111827\"},children:criteria})})]},idx)),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"1rem\",padding:\"1rem\",background:\"#e0e7ff\",borderRadius:\"0.5rem\",border:\"1px solid #c7d2fe\"},children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"0.875rem\",color:\"#4338ca\",fontWeight:\"500\"},children:\"These criteria trigger immediate crisis team activation and response protocol initiation.\"})})]})},{key:\"postIncident\",title:\"Post-Incident Evaluation\",icon:ClipboardCheck,data:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1.5rem\",padding:\"1rem\",background:\"#f9fafb\",borderRadius:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.75rem\"},children:\"Evaluation Timeline\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{fontSize:\"0.875rem\",color:\"#6b7280\",marginLeft:\"1.5rem\"},children:[/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Within 24 hours:\"}),\" Initial debrief with crisis team\"]}),/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Within 48 hours:\"}),\" Stakeholder feedback collection\"]}),/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Within 1 week:\"}),\" Comprehensive incident report\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Within 2 weeks:\"}),\" Plan updates and team training\"]})]})]}),crisisPlan.improvementAreas&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:\"600\",color:\"#111827\",marginBottom:\"0.75rem\"},children:\"Key Improvement Areas\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gridTemplateColumns:\"1fr 1fr\",gap:\"0.75rem\"},children:crisisPlan.improvementAreas.map((area,idx)=>/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"0.75rem\",background:\"#fef3c7\",borderRadius:\"0.375rem\",fontSize:\"0.875rem\",color:\"#92400e\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(Lightbulb,{style:{width:\"16px\",height:\"16px\"}}),area]},idx))})]})]})}].map(section=>renderCrisisPlanSection(section,section.data))}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"1.5rem\",borderTop:\"1px solid #e5e7eb\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowResources(false),style:{width:\"100%\",padding:\"0.75rem\",background:\"#6b7280\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"500\",cursor:\"pointer\"},children:\"Close\"})})]})}),showDraftModal&&currentDraftStakeholder&&communicationDrafts[currentDraftStakeholder]&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"fixed\",inset:0,background:\"rgba(0, 0, 0, 0.5)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:50,padding:\"1rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{background:\"white\",borderRadius:\"0.75rem\",maxWidth:\"800px\",width:\"100%\",maxHeight:\"90vh\",overflow:\"hidden\",display:\"flex\",flexDirection:\"column\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\",borderBottom:\"1px solid #e5e7eb\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"h2\",{style:{fontSize:\"1.25rem\",fontWeight:\"600\",color:\"#111827\"},children:[currentDraftStakeholder,\" Communication Draft\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDraftModal(false);setCurrentDraftStakeholder(null);setEditingDraft(\"\");},style:{padding:\"0.5rem\",background:\"transparent\",border:\"none\",cursor:\"pointer\",color:\"#6b7280\"},children:/*#__PURE__*/_jsx(X,{style:{width:\"20px\",height:\"20px\"}})})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,padding:\"1.5rem\",overflowY:\"auto\"},children:/*#__PURE__*/_jsx(\"textarea\",{value:editingDraft||communicationDrafts[currentDraftStakeholder].content,onChange:e=>setEditingDraft(e.target.value),style:{width:\"100%\",minHeight:\"400px\",padding:\"1rem\",border:\"1px solid #e5e7eb\",borderRadius:\"0.5rem\",fontSize:\"0.9375rem\",lineHeight:\"1.6\",resize:\"vertical\"}})}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"1.5rem\",borderTop:\"1px solid #e5e7eb\",display:\"flex\",gap:\"0.75rem\",justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDraftModal(false);setCurrentDraftStakeholder(null);setEditingDraft(\"\");},style:{padding:\"0.625rem 1.25rem\",background:\"#6b7280\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"500\",cursor:\"pointer\"},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(editingDraft){setCommunicationDrafts(prev=>_objectSpread(_objectSpread({},prev),{},{[currentDraftStakeholder]:_objectSpread(_objectSpread({},prev[currentDraftStakeholder]),{},{content:editingDraft,timestamp:new Date()})}));}saveCommunication(currentDraftStakeholder,communicationDrafts[currentDraftStakeholder]);setShowDraftModal(false);setCurrentDraftStakeholder(null);setEditingDraft(\"\");},disabled:isDraftSaving,style:{padding:\"0.625rem 1.25rem\",background:isDraftSaving?\"#9ca3af\":\"#10b981\",color:\"white\",border:\"none\",borderRadius:\"0.5rem\",fontWeight:\"500\",cursor:isDraftSaving?\"not-allowed\":\"pointer\",display:\"flex\",alignItems:\"center\",gap:\"0.5rem\"},children:isDraftSaving?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader2,{style:{width:\"16px\",height:\"16px\",animation:\"spin 1s linear infinite\"}}),\"Saving...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Save,{style:{width:\"16px\",height:\"16px\"}}),\"Save & Send\"]})})]})]})}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n                @keyframes spin {\\n                  from { transform: rotate(0deg); }\\n                  to { transform: rotate(360deg); }\\n                }\\n                \\n                @keyframes pulse {\\n                  0%, 100% { opacity: 1; }\\n                  50% { opacity: 0.5; }\\n                }\\n              \"})]});};export default CrisisCommandCenter;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}