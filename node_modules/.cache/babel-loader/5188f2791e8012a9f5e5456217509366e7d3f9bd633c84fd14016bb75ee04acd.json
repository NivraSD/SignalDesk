{"ast":null,"code":"import React,{useState,useEffect}from'react';import{intelligenceOrchestratorV3}from'../services/intelligenceOrchestratorV3';import{getUnifiedOrganization}from'../utils/unifiedDataLoader';import cacheManager from'../utils/cacheManager';import'./IntelligenceDisplayV3.css';// Intelligence Hub V5 - Focused on stakeholder monitoring that feeds Opportunity Engine\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const IntelligenceHubV5=_ref=>{let{organization,onIntelligenceUpdate}=_ref;const[activeTab,setActiveTab]=useState('executive');const[intelligence,setIntelligence]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// 5 Focused tabs for stakeholder intelligence\nconst tabs=[{id:'executive',name:'Executive Summary',icon:'ðŸ“Š'},{id:'competitors',name:'Competitors',icon:'ðŸŽ¯'},{id:'stakeholders',name:'Stakeholders',icon:'ðŸ‘¥'},{id:'trending',name:'Trending Topics',icon:'ðŸ”¥'},{id:'cascade',name:'Cascade Predictions',icon:'ðŸŒŠ'}];useEffect(()=>{if(organization){fetchStakeholderIntelligence();}},[organization]);const fetchStakeholderIntelligence=async()=>{setLoading(true);setError(null);try{// Get complete stakeholder profile from onboarding\nconst completeProfile=cacheManager.getCompleteProfile()||organization;if(!completeProfile.stakeholders){// Ensure we have stakeholders from onboarding\ncompleteProfile.stakeholders={competitors:organization.competitors||[],regulators:organization.regulators||[],media_outlets:organization.media_outlets||[],investors:organization.investors||[],analysts:organization.analysts||[],activists:organization.activists||[]};}console.log('ðŸŽ¯ Fetching intelligence for stakeholders:',completeProfile.stakeholders);// Use orchestrator to get intelligence on ALL stakeholder types\nconst result=await intelligenceOrchestratorV3.orchestrate(completeProfile);if(result.success){const processedIntelligence=processIntelligenceForDisplay(result);setIntelligence(processedIntelligence);// Pass intelligence to Opportunity Engine\nif(onIntelligenceUpdate){onIntelligenceUpdate(processedIntelligence);}// Cache for opportunity detection\ncacheManager.saveSynthesis(processedIntelligence);}else{setError(result.error);}}catch(err){console.error('Intelligence fetch error:',err);setError(err.message);}finally{setLoading(false);}};const processIntelligenceForDisplay=rawIntelligence=>{// Structure intelligence for 5 focused tabs\nreturn{executive:generateExecutiveSummary(rawIntelligence),competitors:extractCompetitorIntelligence(rawIntelligence),stakeholders:extractStakeholderIntelligence(rawIntelligence),trending:extractTrendingTopics(rawIntelligence),cascade:generateCascadePredictions(rawIntelligence),raw:rawIntelligence// Keep raw data for opportunity detection\n};};const generateExecutiveSummary=intel=>{var _intel$entity_actions,_intel$topic_trends;const actions=((_intel$entity_actions=intel.entity_actions)===null||_intel$entity_actions===void 0?void 0:_intel$entity_actions.all)||[];const trends=((_intel$topic_trends=intel.topic_trends)===null||_intel$topic_trends===void 0?void 0:_intel$topic_trends.all)||[];return{headline:\"\".concat(actions.length,\" stakeholder actions | \").concat(trends.length,\" trending topics\"),keyFindings:[actions.length>0?\"\".concat(actions[0].entity,\": \").concat(actions[0].action):'No significant activity',trends.length>0?\"\".concat(trends[0].topic,\" trending (\").concat(trends[0].mentions,\" mentions)\"):'No trends detected'],prImplications:[actions.filter(a=>a.type==='competitor').length>0?'Competitor activity requires response':null,trends.filter(t=>t.trend==='increasing').length>0?'Trending topics present thought leadership opportunity':null].filter(Boolean),metrics:{stakeholdersMonitored:new Set(actions.map(a=>a.entity)).size,actionsDetected:actions.length,trendsIdentified:trends.length,urgentItems:actions.filter(a=>a.impact==='high').length}};};const extractCompetitorIntelligence=intel=>{var _intel$entity_actions2,_intel$entity_actions3;const competitorActions=((_intel$entity_actions2=intel.entity_actions)===null||_intel$entity_actions2===void 0?void 0:(_intel$entity_actions3=_intel$entity_actions2.all)===null||_intel$entity_actions3===void 0?void 0:_intel$entity_actions3.filter(a=>a.type==='competitor'||a.relevance>0.7))||[];return{recentMoves:competitorActions.map(action=>({competitor:action.entity,action:action.action,source:action.source,timestamp:action.timestamp,impact:action.impact,prResponse:\"Position against \".concat(action.entity,\"'s \").concat(action.action)})),analysis:{whatHappened:competitorActions.map(a=>\"\".concat(a.entity,\": \").concat(a.action)),whatItMeans:analyzeCompetitorImplications(competitorActions),prImplications:generatePRResponses(competitorActions)}};};const extractStakeholderIntelligence=intel=>{var _intel$entity_actions4;const stakeholderActions=((_intel$entity_actions4=intel.entity_actions)===null||_intel$entity_actions4===void 0?void 0:_intel$entity_actions4.all)||[];// Group by stakeholder type\nconst grouped={media:stakeholderActions.filter(a=>a.type==='media'),regulators:stakeholderActions.filter(a=>a.type==='regulator'),investors:stakeholderActions.filter(a=>a.type==='investor'),analysts:stakeholderActions.filter(a=>a.type==='analyst'),activists:stakeholderActions.filter(a=>a.type==='activist')};return{byType:grouped,analysis:{mediaActivity:grouped.media.length>0?'Media actively covering industry':'Low media activity',regulatoryRisk:grouped.regulators.length>0?'Regulatory attention detected':'No regulatory concerns',investorSentiment:grouped.investors.length>0?'Investor activity noted':'Stable investor environment'},prImplications:{media:grouped.media.length>0?'Opportunity for media engagement':'Need to generate media interest',regulatory:grouped.regulators.length>0?'Prepare regulatory messaging':'Maintain compliance messaging',investors:'Keep investor relations informed'}};};const extractTrendingTopics=intel=>{var _intel$topic_trends2;const trends=((_intel$topic_trends2=intel.topic_trends)===null||_intel$topic_trends2===void 0?void 0:_intel$topic_trends2.all)||[];return{topics:trends.map(trend=>({topic:trend.topic,momentum:trend.trend,mentions:trend.mentions,sources:trend.sources||[],opportunity:\"Lead conversation on \".concat(trend.topic),prAngle:\"Position as thought leader on \".concat(trend.topic)})),analysis:{hotTopics:trends.filter(t=>t.mentions>10).map(t=>t.topic),emergingThemes:trends.filter(t=>t.trend==='increasing').map(t=>t.topic),decliningInterest:trends.filter(t=>t.trend==='decreasing').map(t=>t.topic)}};};const generateCascadePredictions=intel=>{var _intel$entity_actions5,_intel$topic_trends3;const actions=((_intel$entity_actions5=intel.entity_actions)===null||_intel$entity_actions5===void 0?void 0:_intel$entity_actions5.all)||[];const trends=((_intel$topic_trends3=intel.topic_trends)===null||_intel$topic_trends3===void 0?void 0:_intel$topic_trends3.all)||[];const predictions=[];// Predict based on competitor actions\nactions.filter(a=>a.type==='competitor'&&a.impact==='high').forEach(action=>{predictions.push({trigger:\"\".concat(action.entity,\"'s \").concat(action.action),immediate:'Media will seek industry response (24-48 hrs)',nearTerm:'Other competitors likely to follow (1-2 weeks)',longTerm:'Market dynamics may shift (1-3 months)',prStrategy:'Get ahead with differentiated messaging now'});});// Predict based on trends\ntrends.filter(t=>t.trend==='increasing'&&t.mentions>5).forEach(trend=>{predictions.push({trigger:\"\".concat(trend.topic,\" trending\"),immediate:'Media seeking expert commentary (now)',nearTerm:'Topic will peak in 3-5 days',longTerm:'Will become industry standard discussion',prStrategy:'Establish thought leadership immediately'});});return{predictions,analysis:{immediateOpportunities:predictions.filter(p=>p.immediate).length,strategicWindows:predictions.map(p=>p.trigger)}};};const analyzeCompetitorImplications=actions=>{if(actions.length===0)return'No significant competitive threats';const implications=[];if(actions.some(a=>a.impact==='high')){implications.push('High-impact competitive moves require immediate response');}if(actions.length>3){implications.push('Multiple competitors active - market dynamics shifting');}return implications.join('. ');};const generatePRResponses=actions=>{return actions.slice(0,3).map(a=>\"Develop messaging to counter \".concat(a.entity,\"'s \").concat(a.action));};const renderTab=()=>{if(!intelligence)return/*#__PURE__*/_jsx(\"div\",{children:\"No intelligence data available\"});switch(activeTab){case'executive':return renderExecutiveSummary();case'competitors':return renderCompetitorsSummary();case'stakeholders':return renderStakeholdersSummary();case'trending':return renderTrendingTopics();case'cascade':return renderCascadePredictions();default:return/*#__PURE__*/_jsx(\"div\",{children:\"Select a tab\"});}};const renderExecutiveSummary=()=>{const data=intelligence.executive;return/*#__PURE__*/_jsxs(\"div\",{className:\"executive-summary-clean\",children:[/*#__PURE__*/_jsx(\"h2\",{children:data.headline}),/*#__PURE__*/_jsxs(\"div\",{className:\"key-metrics\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:data.metrics.stakeholdersMonitored}),/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Stakeholders\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:data.metrics.actionsDetected}),/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Actions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:data.metrics.trendsIdentified}),/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Trends\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric urgent\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:data.metrics.urgentItems}),/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Urgent\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"key-findings\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Key Findings\"}),data.keyFindings.map((finding,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"finding\",children:finding},idx))]}),data.prImplications.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"pr-implications\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"PR Implications\"}),data.prImplications.map((implication,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"implication\",children:[\"\\u2022 \",implication]},idx))]})]});};const renderCompetitorsSummary=()=>{const data=intelligence.competitors;return/*#__PURE__*/_jsxs(\"div\",{className:\"competitors-summary\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Competitor Intelligence\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"recent-moves\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Competitor Activity\"}),data.recentMoves.length>0?data.recentMoves.map((move,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"competitor-move\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"move-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"competitor-name\",children:move.competitor}),/*#__PURE__*/_jsx(\"span\",{className:\"move-impact\",children:move.impact})]}),/*#__PURE__*/_jsx(\"div\",{className:\"move-action\",children:move.action}),/*#__PURE__*/_jsxs(\"div\",{className:\"move-response\",children:[\"PR Response: \",move.prResponse]})]},idx)):/*#__PURE__*/_jsx(\"div\",{children:\"No recent competitor activity detected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Analysis\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"What Happened:\"}),data.analysis.whatHappened.join('; ')||'No activity']}),/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"What It Means:\"}),data.analysis.whatItMeans]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"PR Implications:\"}),data.analysis.prImplications.join('; ')]})]})]});};const renderStakeholdersSummary=()=>{const data=intelligence.stakeholders;return/*#__PURE__*/_jsxs(\"div\",{className:\"stakeholders-summary\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Stakeholder Activity\"}),Object.entries(data.byType).map(_ref2=>{let[type,actions]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"stakeholder-group\",children:[/*#__PURE__*/_jsx(\"h3\",{children:type.charAt(0).toUpperCase()+type.slice(1)}),actions.length>0?actions.slice(0,3).map((action,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"stakeholder-action\",children:[action.entity,\": \",action.action]},idx)):/*#__PURE__*/_jsxs(\"div\",{className:\"no-activity\",children:[\"No \",type,\" activity\"]})]},type);}),/*#__PURE__*/_jsxs(\"div\",{className:\"stakeholder-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"PR Implications\"}),Object.entries(data.prImplications).map(_ref3=>{let[type,implication]=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"implication\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[type,\":\"]}),\" \",implication]},type);})]})]});};const renderTrendingTopics=()=>{const data=intelligence.trending;return/*#__PURE__*/_jsxs(\"div\",{className:\"trending-topics\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Trending Topics\"}),data.topics.map((topic,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"trending-topic\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topic-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"topic-name\",children:topic.topic}),/*#__PURE__*/_jsxs(\"span\",{className:\"topic-mentions\",children:[topic.mentions,\" mentions\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"momentum \".concat(topic.momentum),children:topic.momentum})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pr-angle\",children:[\"PR Angle: \",topic.prAngle]})]},idx)),/*#__PURE__*/_jsxs(\"div\",{className:\"trending-analysis\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Analysis\"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Hot Topics: \",data.analysis.hotTopics.join(', ')||'None']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Emerging: \",data.analysis.emergingThemes.join(', ')||'None']})]})]});};const renderCascadePredictions=()=>{const data=intelligence.cascade;return/*#__PURE__*/_jsxs(\"div\",{className:\"cascade-predictions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Cascade Predictions\"}),data.predictions.map((prediction,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"cascade-prediction\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"trigger\",children:[\"Trigger: \",prediction.trigger]}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"immediate\",children:[\"\\u2192 Immediate: \",prediction.immediate]}),/*#__PURE__*/_jsxs(\"div\",{className:\"near-term\",children:[\"\\u2192 Near Term: \",prediction.nearTerm]}),/*#__PURE__*/_jsxs(\"div\",{className:\"long-term\",children:[\"\\u2192 Long Term: \",prediction.longTerm]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"strategy\",children:[\"Strategy: \",prediction.prStrategy]})]},idx)),data.predictions.length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"No cascade effects predicted\"})]});};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"intelligence-hub loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Gathering stakeholder intelligence...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"intelligence-hub error\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Error: \",error]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchStakeholderIntelligence,children:\"Retry\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"intelligence-hub-v5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"hub-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Intelligence Hub\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchStakeholderIntelligence,className:\"refresh-btn\",children:\"\\uD83D\\uDD04 Refresh\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hub-tabs\",children:tabs.map(tab=>/*#__PURE__*/_jsxs(\"button\",{className:\"tab \".concat(activeTab===tab.id?'active':''),onClick:()=>setActiveTab(tab.id),children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab-icon\",children:tab.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tab-name\",children:tab.name})]},tab.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"hub-content\",children:renderTab()})]});};export default IntelligenceHubV5;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}