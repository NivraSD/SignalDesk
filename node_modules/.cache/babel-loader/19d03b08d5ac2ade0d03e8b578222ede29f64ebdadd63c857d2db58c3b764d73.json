{"ast":null,"code":"import _objectSpread from\"/Users/jonathanliebowitz/Desktop/SignalDesk/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";/**\n * Organization Profile Service\n * Builds and maintains intelligent profiles of organizations\n * Provides context-aware intelligence gathering\n */class OrganizationProfileService{constructor(){this.supabaseUrl=process.env.REACT_APP_SUPABASE_URL||'https://zskaxjtyuaqazydouifp.supabase.co';this.profiles=new Map();}/**\n   * Build or retrieve an organization's intelligence profile\n   */async getOrBuildProfile(organization){var _organization$name;// Check if organization exists\nif(!organization){console.warn('No organization provided to getOrBuildProfile');return this.getDefaultProfile();}// Use consistent key based on name (fallback to ID if available)\nconst profileId=organization.id||((_organization$name=organization.name)===null||_organization$name===void 0?void 0:_organization$name.toLowerCase().replace(/\\s+/g,'_'))||'default';const key=\"profile_\".concat(profileId);// Check cache first\nif(this.profiles.has(key)){console.log(\"\\uD83D\\uDCCB Using cached profile for \".concat(organization.name));return this.profiles.get(key);}// Check localStorage for persisted profile\nconst storedProfile=localStorage.getItem(\"signaldesk_\".concat(key));if(storedProfile){try{const profile=JSON.parse(storedProfile);console.log(\"\\uD83D\\uDCCB Loaded persisted profile for \".concat(organization.name));this.profiles.set(key,profile);return profile;}catch(e){console.error('Failed to parse stored profile:',e);}}// Build new profile\nconst profile=await this.buildProfile(organization);this.profiles.set(key,profile);// Persist to localStorage\nlocalStorage.setItem(\"signaldesk_\".concat(key),JSON.stringify(profile));return profile;}/**\n   * Get default profile for when no organization is provided\n   */getDefaultProfile(){return{identity:{name:'Unknown Organization',industry:'general',market_position:'unknown'},established_facts:{strategic_initiatives:[],recent_history:[],pain_points:[],strengths:[]},monitoring_targets:{competitors:{primary:[],emerging:[]},stakeholder_groups:{},critical_topics:[],keywords:[]},objectives:{primary:'Monitor general landscape',risk_areas:[],opportunity_areas:[]},context:{},confidence_level:'building',last_updated:new Date().toISOString()};}/**\n   * Build comprehensive organization profile\n   */async buildProfile(organization){var _industryAnalysis$dir,_industryAnalysis$adj,_organization$goals;console.log(\"\\uD83C\\uDFD7\\uFE0F Building intelligence profile for \".concat(organization.name));// Start with AI-powered industry analysis\nconst industryAnalysis=await this.getIndustryContext(organization);// Build the profile structure\nconst profile={// Identity & Context\nidentity:{name:organization.name,website:organization.website,industry:industryAnalysis.primary_industry,description:organization.description,size:organization.size||'unknown',founded:organization.founded,headquarters:organization.headquarters,market_position:this.assessMarketPosition(organization,industryAnalysis)},// Established Facts (what we KNOW)\nestablished_facts:{strategic_initiatives:await this.identifyStrategicInitiatives(organization),recent_history:await this.getRecentHistory(organization),pain_points:await this.identifyPainPoints(organization,industryAnalysis),strengths:await this.identifyStrengths(organization,industryAnalysis),public_commitments:await this.getPublicCommitments(organization)},// Monitoring Configuration\nmonitoring_targets:{competitors:{primary:((_industryAnalysis$dir=industryAnalysis.direct_competitors)===null||_industryAnalysis$dir===void 0?void 0:_industryAnalysis$dir.slice(0,5))||[],emerging:((_industryAnalysis$adj=industryAnalysis.adjacent_competitors)===null||_industryAnalysis$adj===void 0?void 0:_industryAnalysis$adj.slice(0,3))||[],to_watch:[]},stakeholder_groups:this.defineStakeholderGroups(organization,industryAnalysis),critical_topics:this.defineCriticalTopics(organization,industryAnalysis),keywords:this.defineMonitoringKeywords(organization,industryAnalysis)},// Intelligence Objectives\nobjectives:{primary:((_organization$goals=organization.goals)===null||_organization$goals===void 0?void 0:_organization$goals.primary)||'Monitor competitive landscape',risk_areas:this.identifyRiskAreas(organization,industryAnalysis),opportunity_areas:this.identifyOpportunityAreas(organization,industryAnalysis),blindspots:this.identifyBlindspots(organization)},// Context Flags\ncontext:{is_crisis_mode:false,is_launching:false,is_pivoting:false,regulatory_pressure:false,competitive_threat_level:'moderate'},// Metadata\nprofile_created:new Date().toISOString(),last_updated:new Date().toISOString(),confidence_level:'building'// building -> established -> refined\n};return profile;}/**\n   * Get industry-specific context\n   */async getIndustryContext(organization){// This would call the AI industry expansion service\n// For now, return structured data\nreturn{primary_industry:organization.industry||'technology',direct_competitors:this.getIndustryCompetitors(organization.industry),market_dynamics:this.getMarketDynamics(organization.industry),regulatory_landscape:this.getRegulatoryLandscape(organization.industry)};}/**\n   * Identify strategic initiatives from available data\n   */async identifyStrategicInitiatives(organization){const initiatives=[];// Industry-specific initiatives\nif(organization.industry==='automotive'){if(organization.name.includes('Toyota')){initiatives.push('Hybrid technology leadership','Gradual EV transition strategy','Hydrogen fuel cell development','Manufacturing efficiency (TPS)');}}else if(organization.industry==='technology'){initiatives.push('Digital transformation','Cloud migration','AI/ML integration');}return initiatives;}/**\n   * Get recent history and milestones\n   */async getRecentHistory(organization){const history=[];// Would fetch from news/database\n// For now, return examples\nif(organization.name.includes('Toyota')){history.push('2024: Announced $8B battery plant in North Carolina','2023: Committed to 30 EV models by 2030','2023: Solid-state battery breakthrough announced');}return history;}/**\n   * Identify organizational pain points\n   */async identifyPainPoints(organization,industryAnalysis){const painPoints=[];if(organization.industry==='automotive'){painPoints.push('EV transition pace criticism','Supply chain vulnerabilities','Regulatory compliance costs');}else if(organization.industry==='public_relations'){painPoints.push('Client retention in economic downturn','Digital transformation demands','Talent acquisition and retention');}return painPoints;}/**\n   * Identify organizational strengths\n   */async identifyStrengths(organization,industryAnalysis){const strengths=[];if(organization.name.includes('Toyota')){strengths.push('Manufacturing excellence (TPS)','Hybrid technology leadership','Global supply chain','Brand reliability reputation');}return strengths;}/**\n   * Get public commitments and promises\n   */async getPublicCommitments(organization){// Would fetch from news/PR database\nreturn[];}/**\n   * Define stakeholder groups to monitor\n   */defineStakeholderGroups(organization,industryAnalysis){const groups={investors:{types:['institutional','retail','activist'],key_concerns:[],influence_level:'high'},regulators:{entities:industryAnalysis.regulatory_bodies||[],key_concerns:[],influence_level:'high'},customers:{segments:industryAnalysis.customer_segments||[],key_concerns:[],influence_level:'high'},employees:{groups:['unions','management','contractors'],key_concerns:[],influence_level:'medium'},partners:{types:['suppliers','distributors','technology'],key_concerns:[],influence_level:'medium'},media:{outlets:industryAnalysis.media_outlets||[],sentiment:'neutral',influence_level:'medium'}};return groups;}/**\n   * Define critical topics to monitor\n   */defineCriticalTopics(organization,industryAnalysis){const topics=[];// Industry-specific topics\nif(organization.industry==='automotive'){topics.push('Electric vehicle adoption','Autonomous driving technology','Supply chain resilience','Environmental regulations','Battery technology advances');}else if(organization.industry==='public_relations'){topics.push('Crisis communications trends','Digital PR evolution','Influencer marketing','Measurement and ROI','AI in communications');}// Add organization-specific topics\nif(organization.focus_areas){topics.push(...organization.focus_areas);}return topics;}/**\n   * Define monitoring keywords\n   */defineMonitoringKeywords(organization,industryAnalysis){const keywords=[organization.name,...(industryAnalysis.monitoring_keywords||[]),...(industryAnalysis.trending_topics||[])];return[...new Set(keywords)];}/**\n   * Assess market position\n   */assessMarketPosition(organization,industryAnalysis){// Would use market data\nif(organization.name.includes('Toyota')){return'global_leader';}return'established_player';}/**\n   * Identify risk areas\n   */identifyRiskAreas(organization,industryAnalysis){const risks=[];if(organization.industry==='automotive'){risks.push('Regulatory changes','Supply chain disruption','Technology disruption','Market share erosion');}return risks;}/**\n   * Identify opportunity areas\n   */identifyOpportunityAreas(organization,industryAnalysis){const opportunities=[];if(organization.industry==='automotive'){opportunities.push('Emerging markets expansion','New technology partnerships','Sustainability leadership','Service business models');}return opportunities;}/**\n   * Identify potential blindspots\n   */identifyBlindspots(organization){return['Emerging competitors','Adjacent industry disruption','Consumer preference shifts','Technology convergence'];}/**\n   * Get industry competitors based on industry\n   */getIndustryCompetitors(industry){const competitorMap={automotive:['Tesla','Volkswagen','GM','Ford','Stellantis','BMW','Mercedes'],technology:['Microsoft','Google','Apple','Amazon','Meta'],public_relations:['Edelman','Weber Shandwick','Ogilvy','FleishmanHillard'],finance:['JPMorgan','Bank of America','Goldman Sachs','Morgan Stanley']};return competitorMap[industry]||[];}/**\n   * Get market dynamics for industry\n   */getMarketDynamics(industry){const dynamics={automotive:{trend:'transformation',drivers:['electrification','autonomy','connectivity'],challenges:['supply chain','regulations','consumer adoption']},technology:{trend:'rapid_growth',drivers:['AI/ML','cloud','digital transformation'],challenges:['talent','regulation','competition']}};return dynamics[industry]||{trend:'stable'};}/**\n   * Get regulatory landscape\n   */getRegulatoryLandscape(industry){const regulations={automotive:['emissions','safety','trade','labor'],technology:['privacy','antitrust','content','AI governance'],finance:['banking','securities','consumer protection','AML']};return regulations[industry]||[];}/**\n   * Update profile with new intelligence\n   */async updateProfile(organization,newIntelligence){const profile=await this.getOrBuildProfile(organization);// Update relevant sections based on new intelligence\nif(newIntelligence.competitors){profile.monitoring_targets.competitors=_objectSpread(_objectSpread({},profile.monitoring_targets.competitors),newIntelligence.competitors);}if(newIntelligence.events){profile.established_facts.recent_history.push(...newIntelligence.events.map(e=>\"\".concat(new Date().getFullYear(),\": \").concat(e)));}profile.last_updated=new Date().toISOString();profile.confidence_level='established';return profile;}/**\n   * Get intelligence guidance based on profile\n   */getIntelligenceGuidance(profile){return{search_priorities:[...profile.monitoring_targets.competitors.primary,...profile.monitoring_targets.critical_topics],alert_triggers:[\"\".concat(profile.identity.name,\" announcement\"),'Competitor major move','Regulatory change','Stakeholder action'],analysis_focus:{competition:'Track competitor moves and market share',stakeholders:'Monitor sentiment and actions',topics:'Identify trend changes and breakthroughs',predictions:'Anticipate cascade events'},context_reminders:profile.established_facts.pain_points};}}export default new OrganizationProfileService();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}