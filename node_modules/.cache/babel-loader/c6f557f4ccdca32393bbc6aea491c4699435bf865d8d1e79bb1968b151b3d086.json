{"ast":null,"code":"import _objectSpread from\"/Users/jonathanliebowitz/Desktop/SignalDesk/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import'./UnifiedOnboarding.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UnifiedOnboarding=_ref=>{let{onComplete}=_ref;const[currentStep,setCurrentStep]=useState(1);const[profile,setProfile]=useState({// Organization Basics (used by Intelligence Hub)\norganization:{name:'',industry:'',website:'',description:''},// Competitors (used by Intelligence Hub)\ncompetitors:[],// Topics to Monitor (used by Intelligence Hub)\nmonitoring_topics:[],// Brand & Voice (Opportunity Engine)\nbrand:{voice:'professional',// professional, conversational, bold, technical\nrisk_tolerance:'moderate',// conservative, moderate, aggressive\nresponse_speed:'considered'// immediate, considered, strategic\n},// Key Messages (Opportunity Engine)\nmessaging:{core_value_props:[],proof_points:[],competitive_advantages:[],key_narratives:[]},// Media Strategy (Opportunity Engine)\nmedia:{preferred_tiers:[],// tier1_business, tier1_tech, trade, regional\njournalist_relationships:[],no_comment_topics:[],exclusive_partners:[]},// Spokespeople (Opportunity Engine)\nspokespeople:[],// Opportunity Preferences (Opportunity Engine)\nopportunities:{types:{competitor_weakness:true,narrative_vacuum:true,cascade_effect:true,crisis_prevention:true,alliance_opening:false},minimum_confidence:70,auto_execute_threshold:95}});const steps=[{id:1,title:'Organization',icon:'🏢',required:true},{id:2,title:'Brand Voice',icon:'🎯',required:true},{id:3,title:'Key Messages',icon:'💬',required:false},{id:4,title:'Media Strategy',icon:'📰',required:false},{id:5,title:'Opportunities',icon:'💎',required:true}];const handleNext=()=>{if(validateCurrentStep()){if(currentStep<steps.length){setCurrentStep(currentStep+1);}else{saveProfile();}}};const handleBack=()=>{if(currentStep>1){setCurrentStep(currentStep-1);}};const handleSkip=()=>{if(!steps[currentStep-1].required){if(currentStep<steps.length){setCurrentStep(currentStep+1);}else{saveProfile();}}};const validateCurrentStep=()=>{switch(currentStep){case 1:return profile.organization.name;// Only name required now\ncase 2:return true;// Has defaults for brand voice\ndefault:return true;}};const saveProfile=async()=>{// Save unified profile\nconst unifiedProfile=_objectSpread(_objectSpread({},profile),{},{timestamp:new Date().toISOString(),version:'2.0'});// Save to localStorage\nlocalStorage.setItem('signaldesk_unified_profile',JSON.stringify(unifiedProfile));// Also save specific parts for backward compatibility\nlocalStorage.setItem('signaldesk_organization',JSON.stringify(profile.organization));localStorage.setItem('opportunity_profile',JSON.stringify(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},profile.brand),profile.messaging),profile.media),{},{spokespeople:profile.spokespeople,opportunity_types:profile.opportunities.types,minimum_confidence:profile.opportunities.minimum_confidence,auto_execute_threshold:profile.opportunities.auto_execute_threshold,competitors:profile.competitors})));// Keep old onboarding for backward compatibility but with new structure\nlocalStorage.setItem('signaldesk_onboarding',JSON.stringify({organization:profile.organization,competitors:profile.competitors,monitoring_topics:profile.monitoring_topics}));// Handle completion - redirect if no onComplete provided\nif(onComplete){onComplete(unifiedProfile);}else{// Redirect to main app after successful setup\nwindow.location.href='/';}};const renderStep=()=>{switch(currentStep){case 1:return renderOrganization();case 2:return renderBrandVoice();case 3:return renderKeyMessages();case 4:return renderMediaStrategy();case 5:return renderOpportunities();default:return null;}};const renderOrganization=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tell us about your organization\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"We'll discover your competitors and industry details through our intelligence engine.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Organization Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"e.g., Toyota\",value:profile.organization.name,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{organization:_objectSpread(_objectSpread({},profile.organization),{},{name:e.target.value})})),className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Website (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",placeholder:\"https://www.toyota.com\",value:profile.organization.website,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{organization:_objectSpread(_objectSpread({},profile.organization),{},{website:e.target.value})})),className:\"form-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Brief Description\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"What does your organization do?\",value:profile.organization.description,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{organization:_objectSpread(_objectSpread({},profile.organization),{},{description:e.target.value})})),className:\"form-textarea\",rows:3})]})]});// Removed renderCompetitors - will be discovered through intelligence\nconst renderBrandVoice=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"How does \",profile.organization.name||'your organization',\" communicate?\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"This helps us generate content and responses that match your brand.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Brand Voice\"}),/*#__PURE__*/_jsx(\"div\",{className:\"option-grid\",children:[{value:'professional',label:'Professional',desc:'Formal, authoritative'},{value:'conversational',label:'Conversational',desc:'Friendly, approachable'},{value:'bold',label:'Bold',desc:'Confident, assertive'},{value:'technical',label:'Technical',desc:'Detailed, precise'},{value:'inspirational',label:'Inspirational',desc:'Visionary, motivating'}].map(option=>/*#__PURE__*/_jsxs(\"button\",{className:\"option-card \".concat(profile.brand.voice===option.value?'selected':''),onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{brand:_objectSpread(_objectSpread({},profile.brand),{},{voice:option.value})})),children:[/*#__PURE__*/_jsx(\"strong\",{children:option.label}),/*#__PURE__*/_jsx(\"span\",{children:option.desc})]},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Risk Tolerance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"option-grid\",children:[{value:'conservative',label:'Conservative',desc:'Careful, measured responses'},{value:'moderate',label:'Moderate',desc:'Balanced approach'},{value:'aggressive',label:'Aggressive',desc:'First-mover, bold statements'}].map(option=>/*#__PURE__*/_jsxs(\"button\",{className:\"option-card \".concat(profile.brand.risk_tolerance===option.value?'selected':''),onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{brand:_objectSpread(_objectSpread({},profile.brand),{},{risk_tolerance:option.value})})),children:[/*#__PURE__*/_jsx(\"strong\",{children:option.label}),/*#__PURE__*/_jsx(\"span\",{children:option.desc})]},option.value))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Response Speed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"option-grid\",children:[{value:'immediate',label:'Immediate',desc:'First to respond'},{value:'considered',label:'Considered',desc:'Thoughtful responses'},{value:'strategic',label:'Strategic',desc:'Wait for right moment'}].map(option=>/*#__PURE__*/_jsxs(\"button\",{className:\"option-card \".concat(profile.brand.response_speed===option.value?'selected':''),onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{brand:_objectSpread(_objectSpread({},profile.brand),{},{response_speed:option.value})})),children:[/*#__PURE__*/_jsx(\"strong\",{children:option.label}),/*#__PURE__*/_jsx(\"span\",{children:option.desc})]},option.value))})]})]});const renderKeyMessages=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Key Messages & Proof Points\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"Optional: Add your core messages and supporting evidence. You can skip this for now.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Core Value Propositions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-list\",children:[profile.messaging.core_value_props.map((prop,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"input-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:prop,onChange:e=>{const newProps=[...profile.messaging.core_value_props];newProps[idx]=e.target.value;setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{core_value_props:newProps})}));},placeholder:\"e.g., 'Industry-leading reliability'\",className:\"form-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newProps=profile.messaging.core_value_props.filter((_,i)=>i!==idx);setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{core_value_props:newProps})}));},className:\"remove-btn\",children:\"\\xD7\"})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{core_value_props:[...profile.messaging.core_value_props,'']})})),className:\"add-btn-small\",children:\"+ Add Value Proposition\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Proof Points\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-list\",children:[profile.messaging.proof_points.map((point,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"input-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:point,onChange:e=>{const newPoints=[...profile.messaging.proof_points];newPoints[idx]=e.target.value;setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{proof_points:newPoints})}));},placeholder:\"e.g., '#1 in customer satisfaction for 5 years'\",className:\"form-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const newPoints=profile.messaging.proof_points.filter((_,i)=>i!==idx);setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{proof_points:newPoints})}));},className:\"remove-btn\",children:\"\\xD7\"})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setProfile(_objectSpread(_objectSpread({},profile),{},{messaging:_objectSpread(_objectSpread({},profile.messaging),{},{proof_points:[...profile.messaging.proof_points,'']})})),className:\"add-btn-small\",children:\"+ Add Proof Point\"})]})]})]});const renderMediaStrategy=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Media Preferences\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"Optional: Select your preferred media outlets. You can configure this later.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Preferred Media Tiers\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-grid\",children:[{id:'tier1_business',label:'Business Media',desc:'WSJ, Bloomberg, FT'},{id:'tier1_tech',label:'Tech Media',desc:'TechCrunch, Verge'},{id:'tier1_general',label:'General News',desc:'NYT, CNN, BBC'},{id:'trade',label:'Trade Publications',desc:'Industry-specific'},{id:'regional',label:'Regional Media',desc:'Local coverage'}].map(tier=>/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:profile.media.preferred_tiers.includes(tier.id),onChange:e=>{if(e.target.checked){setProfile(_objectSpread(_objectSpread({},profile),{},{media:_objectSpread(_objectSpread({},profile.media),{},{preferred_tiers:[...profile.media.preferred_tiers,tier.id]})}));}else{setProfile(_objectSpread(_objectSpread({},profile),{},{media:_objectSpread(_objectSpread({},profile.media),{},{preferred_tiers:profile.media.preferred_tiers.filter(t=>t!==tier.id)})}));}}}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:tier.label}),/*#__PURE__*/_jsx(\"span\",{children:tier.desc})]})]},tier.id))})]})]});const renderOpportunities=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-step\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"What opportunities should we pursue?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"step-description\",children:\"Choose which types of opportunities to detect and act on.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Opportunity Types\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-grid\",children:[{id:'competitor_weakness',label:'Competitor Weakness',desc:'Capitalize when competitors stumble',icon:'🎯'},{id:'narrative_vacuum',label:'Narrative Vacuum',desc:'Own unclaimed stories',icon:'📢'},{id:'cascade_effect',label:'Cascade Prediction',desc:'Get ahead of spreading trends',icon:'🌊'},{id:'crisis_prevention',label:'Crisis Prevention',desc:'Proactive risk mitigation',icon:'🛡️'},{id:'alliance_opening',label:'Partnerships',desc:'Strategic collaborations',icon:'🤝'}].map(type=>/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item opportunity-type\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:profile.opportunities.types[type.id],onChange:e=>{setProfile(_objectSpread(_objectSpread({},profile),{},{opportunities:_objectSpread(_objectSpread({},profile.opportunities),{},{types:_objectSpread(_objectSpread({},profile.opportunities.types),{},{[type.id]:e.target.checked})})}));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkbox-content\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"type-icon\",children:type.icon}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:type.label}),/*#__PURE__*/_jsx(\"span\",{children:type.desc})]})]})]},type.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confidence Thresholds\"}),/*#__PURE__*/_jsx(\"div\",{className:\"threshold-settings\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"threshold-item\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Minimum confidence to show opportunity\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"slider-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"50\",max:\"100\",value:profile.opportunities.minimum_confidence,onChange:e=>setProfile(_objectSpread(_objectSpread({},profile),{},{opportunities:_objectSpread(_objectSpread({},profile.opportunities),{},{minimum_confidence:parseInt(e.target.value)})})),className:\"slider\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"slider-value\",children:[profile.opportunities.minimum_confidence,\"%\"]})]})]})})]})]});// Check if profile already exists\nuseEffect(()=>{const existingProfile=localStorage.getItem('signaldesk_unified_profile');if(existingProfile){const parsed=JSON.parse(existingProfile);setProfile(parsed);}else{// Check for legacy onboarding data\nconst legacyOnboarding=localStorage.getItem('signaldesk_onboarding');if(legacyOnboarding){const legacy=JSON.parse(legacyOnboarding);setProfile(prev=>_objectSpread(_objectSpread({},prev),{},{organization:legacy.organization||prev.organization,competitors:legacy.competitors||prev.competitors}));}}},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"unified-onboarding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Welcome to SignalDesk\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Let's configure your intelligent opportunity engine\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(currentStep/steps.length*100,\"%\")}}),/*#__PURE__*/_jsx(\"div\",{className:\"progress-steps\",children:steps.map(step=>/*#__PURE__*/_jsxs(\"div\",{className:\"progress-step \".concat(currentStep>=step.id?'completed':'',\" \").concat(currentStep===step.id?'active':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"step-circle\",children:/*#__PURE__*/_jsx(\"span\",{className:\"step-icon\",children:step.icon})}),/*#__PURE__*/_jsx(\"span\",{className:\"step-label\",children:step.title})]},step.id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"onboarding-content\",children:renderStep()}),/*#__PURE__*/_jsxs(\"div\",{className:\"onboarding-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:handleBack,disabled:currentStep===1,children:\"Back\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"footer-right\",children:[!steps[currentStep-1].required&&/*#__PURE__*/_jsx(\"button\",{className:\"btn-ghost\",onClick:handleSkip,children:\"Skip for now\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:handleNext,disabled:!validateCurrentStep(),children:currentStep===steps.length?'Complete Setup':'Next'})]})]})]})});};export default UnifiedOnboarding;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}