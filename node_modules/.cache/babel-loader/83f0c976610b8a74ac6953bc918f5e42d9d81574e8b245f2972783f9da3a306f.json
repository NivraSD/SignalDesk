{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import'./OrganizationSettings.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrganizationSettings=_ref=>{let{onClose,onOrganizationChange}=_ref;const navigate=useNavigate();const[organizations,setOrganizations]=useState([]);const[currentOrg,setCurrentOrg]=useState(null);const[isCreatingNew,setIsCreatingNew]=useState(false);const[newOrgData,setNewOrgData]=useState({name:'',type:'company',description:''});useEffect(()=>{loadOrganizations();},[]);const loadOrganizations=()=>{// Load saved organizations from localStorage\nconst savedOrgs=localStorage.getItem('signaldesk_organizations');const orgs=savedOrgs?JSON.parse(savedOrgs):[];// Add some default organizations if none exist\nif(orgs.length===0){const defaults=[{id:'openai',name:'OpenAI',type:'company',description:'AI research company'},{id:'test-org',name:'Test Organization',type:'company',description:'Testing and development'}];localStorage.setItem('signaldesk_organizations',JSON.stringify(defaults));setOrganizations(defaults);}else{setOrganizations(orgs);}// Get current organization\nconst currentOrgData=localStorage.getItem('signaldesk_organization');if(currentOrgData){setCurrentOrg(JSON.parse(currentOrgData));}};const switchOrganization=org=>{// Save the selected organization\nlocalStorage.setItem('signaldesk_organization',JSON.stringify(org));localStorage.setItem('signaldesk_onboarding',JSON.stringify({organizationName:org.name,organizationType:org.type,organizationDescription:org.description}));setCurrentOrg(org);// Notify parent component\nif(onOrganizationChange){onOrganizationChange(org);}// Close the settings modal\nsetTimeout(()=>{if(onClose){onClose();}},500);};const createNewOrganization=()=>{// Clear current organization to trigger onboarding\nlocalStorage.removeItem('signaldesk_organization');localStorage.removeItem('signaldesk_onboarding');// Navigate to the onboarding flow\nnavigate('/initialize');};const deleteOrganization=orgId=>{if(window.confirm('Are you sure you want to delete this organization? This cannot be undone.')){// Remove from organizations list\nconst updatedOrgs=organizations.filter(org=>org.id!==orgId);localStorage.setItem('signaldesk_organizations',JSON.stringify(updatedOrgs));setOrganizations(updatedOrgs);// If deleting current org, clear it\nif((currentOrg===null||currentOrg===void 0?void 0:currentOrg.id)===orgId){localStorage.removeItem('signaldesk_organization');localStorage.removeItem('signaldesk_onboarding');setCurrentOrg(null);// Switch to first available org or trigger onboarding\nif(updatedOrgs.length>0){switchOrganization(updatedOrgs[0]);}else{navigate('/initialize');}}}};return/*#__PURE__*/_jsx(\"div\",{className:\"org-settings-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"org-settings-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"org-settings-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Organization Settings\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-settings-content\",children:[currentOrg&&/*#__PURE__*/_jsxs(\"div\",{className:\"current-org-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Current Organization\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-org-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"org-icon\",children:\"\\uD83C\\uDFE2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:currentOrg.name}),/*#__PURE__*/_jsx(\"p\",{children:currentOrg.description||'No description'}),/*#__PURE__*/_jsx(\"span\",{className:\"org-type\",children:currentOrg.type})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"switch-org-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Switch Organization\"}),/*#__PURE__*/_jsx(\"div\",{className:\"org-list\",children:organizations.filter(org=>org.id!==(currentOrg===null||currentOrg===void 0?void 0:currentOrg.id)).map(org=>/*#__PURE__*/_jsxs(\"div\",{className:\"org-option\",onClick:()=>switchOrganization(org),children:[/*#__PURE__*/_jsx(\"div\",{className:\"org-icon\",children:\"\\uD83C\\uDFE2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:org.name}),/*#__PURE__*/_jsx(\"p\",{children:org.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"org-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"switch-btn\",children:\"Switch\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:e=>{e.stopPropagation();deleteOrganization(org.id);},title:\"Delete organization\",children:\"\\uD83D\\uDDD1\"})]})]},org.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"new-org-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create New Organization\"}),/*#__PURE__*/_jsx(\"p\",{className:\"section-note\",children:\"Start the onboarding process to configure a new organization with intelligence gathering.\"}),/*#__PURE__*/_jsx(\"button\",{className:\"create-org-btn\",onClick:createNewOrganization,children:\"+ Add New Organization\"})]})]})]})});};export default OrganizationSettings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}