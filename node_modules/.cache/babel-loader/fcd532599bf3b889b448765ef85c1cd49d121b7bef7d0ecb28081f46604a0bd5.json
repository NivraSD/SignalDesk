{"ast":null,"code":"import _objectSpread from\"/Users/jonathanliebowitz/Desktop/SignalDesk/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useProject}from\"../contexts/ProjectContext\";import{useNavigate}from\"react-router-dom\";import SaveToMemoryVaultButton from\"./MemoryVault/SaveToMemoryVaultButton\";import strategicPlanningService from'../services/strategicPlanningService';import{Brain,Target,Lightbulb,ChevronRight,ChevronDown,Download,Loader,AlertCircle,Sparkles,Calendar,BarChart3,CheckCircle,ArrowRight,Zap,TrendingUp,Users,Globe,Shield,Play,Eye,Edit3,FileText,ListChecks,Clock,Info,X,Copy,Save}from\"lucide-react\";import\"./StrategicPlanning.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function StrategicPlanning(){var _strategicPlan$strate2;const[objective,setObjective]=useState(\"\");const[context,setContext]=useState(\"\");const[constraints,setConstraints]=useState(\"\");const[timeline,setTimeline]=useState(\"\");const[isGenerating,setIsGenerating]=useState(false);const[strategicPlan,setStrategicPlan]=useState(null);const[error,setError]=useState(null);const[expandedPillars,setExpandedPillars]=useState({});const[showEvidence,setShowEvidence]=useState({});const[isExecuting,setIsExecuting]=useState(false);const[executionStatus,setExecutionStatus]=useState(null);const[showPlanOverlay,setShowPlanOverlay]=useState(false);const[savedPlans,setSavedPlans]=useState([]);const[activeTab,setActiveTab]=useState('create');// 'create', 'saved', 'history'\nconst{selectedProject}=useProject();const navigate=useNavigate();// Context pills for quick starts\nconst contextPills=[{id:'launch',label:'Product Launch',icon:Sparkles,color:'#10b981'},{id:'crisis',label:'Crisis Response',icon:Shield,color:'#ef4444'},{id:'thought',label:'Thought Leadership',icon:Brain,color:'#8b5cf6'},{id:'market',label:'Market Entry',icon:Globe,color:'#3b82f6'},{id:'reputation',label:'Reputation Building',icon:TrendingUp,color:'#f59e0b'}];const planningTypes=[{id:'comprehensive',label:'Comprehensive Strategy',icon:Brain,desc:'Full strategic plan with all components'},{id:'crisis',label:'Crisis Management',icon:Shield,desc:'Rapid response strategic planning'},{id:'campaign',label:'Campaign Strategy',icon:Target,desc:'Focused campaign planning'},{id:'launch',label:'Product Launch',icon:Sparkles,desc:'Go-to-market strategic plan'}];const[selectedPlanType,setSelectedPlanType]=useState('comprehensive');// Tab configuration\nconst tabs=[{id:'create',label:'Create Plan',icon:Brain},{id:'saved',label:'Saved Plans',icon:FileText},{id:'history',label:'Plan History',icon:Clock}];useEffect(()=>{loadSavedPlans();},[]);const loadSavedPlans=()=>{const plans=strategicPlanningService.getPlansFromLocalStorage();setSavedPlans(plans);};const togglePillar=pillarId=>{setExpandedPillars(prev=>_objectSpread(_objectSpread({},prev),{},{[pillarId]:!prev[pillarId]}));};const generateStrategicPlan=async()=>{if(!objective.trim()){setError(\"Please describe your objective\");return;}setIsGenerating(true);setError(null);try{// Show the overlay immediately\nsetShowPlanOverlay(true);// Call the Supabase Edge Function\nconst result=await strategicPlanningService.generatePlan(objective,context,constraints,timeline);if(!result||!result.success&&!result.data){throw new Error(\"Failed to generate strategic plan\");}// Use the plan data from service\nconst plan=result.data||result;setStrategicPlan(plan);// Save to localStorage\nstrategicPlanningService.savePlanToLocalStorage(plan);loadSavedPlans();// Auto-expand first pillar\nif(plan.strategic_pillars&&plan.strategic_pillars.length>0){setExpandedPillars({0:true});}}catch(error){console.error(\"Error generating strategic plan:\",error);setError(error.message||\"Failed to generate strategic plan\");setShowPlanOverlay(false);}finally{setIsGenerating(false);}};const closePlanOverlay=()=>{setShowPlanOverlay(false);setStrategicPlan(null);setExpandedPillars({});setShowEvidence({});};const copyPlanToClipboard=()=>{var _strategicPlan$strate,_strategicPlan$implem,_strategicPlan$succes;if(!strategicPlan)return;const planText=\"\\nSTRATEGIC PLAN: \".concat(strategicPlan.objective,\"\\n\\nEXECUTIVE SUMMARY:\\n\").concat(strategicPlan.executive_summary,\"\\n\\nSTRATEGIC PILLARS:\\n\").concat((_strategicPlan$strate=strategicPlan.strategic_pillars)===null||_strategicPlan$strate===void 0?void 0:_strategicPlan$strate.map((pillar,index)=>{var _pillar$actions;return\"\".concat(index+1,\". \").concat(pillar.title,\"\\n     \").concat(pillar.description,\"\\n     Actions: \").concat(((_pillar$actions=pillar.actions)===null||_pillar$actions===void 0?void 0:_pillar$actions.join(', '))||'Not specified',\"\\n     Timeline: \").concat(pillar.timeline||'TBD',\"\\n     MCP Assignment: \").concat(pillar.mcp||'Not assigned');}).join('\\n\\n'),\"\\n\\nIMPLEMENTATION PHASES:\\n\").concat((_strategicPlan$implem=strategicPlan.implementation_phases)===null||_strategicPlan$implem===void 0?void 0:_strategicPlan$implem.map(phase=>{var _phase$tasks;return\"\\u2022 \".concat(phase.phase,\": \").concat(phase.duration,\" - \").concat((_phase$tasks=phase.tasks)===null||_phase$tasks===void 0?void 0:_phase$tasks.join(', '));}).join('\\n'),\"\\n\\nSUCCESS METRICS:\\n\").concat((_strategicPlan$succes=strategicPlan.success_metrics)===null||_strategicPlan$succes===void 0?void 0:_strategicPlan$succes.map(metric=>\"\\u2022 \".concat(metric)).join('\\n'),\"\\n    \").trim();navigator.clipboard.writeText(planText);};const executeStrategicPlan=async()=>{if(!strategicPlan)return;setIsExecuting(true);setExecutionStatus({stage:'initializing',message:'Creating campaign...'});try{// Generate campaign from strategic plan\nconst campaign=strategicPlanningService.generateCampaignFromPlan(strategicPlan);setExecutionStatus({stage:'campaign',message:'Campaign created successfully!'});// Navigate to Campaign Execution Dashboard after delay\nsetTimeout(()=>{navigate(\"/projects/\".concat(selectedProject===null||selectedProject===void 0?void 0:selectedProject.id,\"/campaign-execution/\").concat(campaign.id));},2000);}catch(error){console.error(\"Error executing strategic plan:\",error);setExecutionStatus({stage:'error',message:'Execution failed: '+error.message});}finally{setTimeout(()=>{setIsExecuting(false);setExecutionStatus(null);},3000);}};const addContextPill=pillId=>{const pill=contextPills.find(p=>p.id===pillId);if(pill){const contextText={'launch':'Launch our new product to market with maximum impact and strategic positioning','crisis':'Respond to crisis situation effectively while protecting reputation and stakeholder trust','thought':'Establish thought leadership in our industry through strategic content and positioning','market':'Enter new market segment strategically with proper research and positioning','reputation':'Build and enhance corporate reputation through strategic communications'};setContext(prev=>prev?\"\".concat(prev,\"\\n\\n\").concat(contextText[pillId]):contextText[pillId]);}};const loadSavedPlan=plan=>{setStrategicPlan(plan);setShowPlanOverlay(true);setObjective(plan.objective||'');setContext(plan.context||'');setConstraints(plan.constraints||'');setTimeline(plan.timeline||'');};return/*#__PURE__*/_jsxs(\"div\",{className:\"strategic-planning-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"strategic-planning-main\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"strategic-tabs\",children:tabs.map(tab=>{const TabIcon=tab.icon;return/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab===tab.id?'active':''),onClick:()=>setActiveTab(tab.id),children:[/*#__PURE__*/_jsx(TabIcon,{className:\"tab-icon\"}),tab.label]},tab.id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[activeTab==='create'&&/*#__PURE__*/_jsxs(\"div\",{className:\"create-plan-tab\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"plan-type-selector\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Select Planning Type\"}),/*#__PURE__*/_jsx(\"div\",{className:\"plan-types\",children:planningTypes.map(type=>{const Icon=type.icon;return/*#__PURE__*/_jsxs(\"div\",{className:\"plan-type \".concat(selectedPlanType===type.id?'selected':''),onClick:()=>setSelectedPlanType(type.id),children:[/*#__PURE__*/_jsx(Icon,{className:\"plan-type-icon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"plan-type-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:type.label}),/*#__PURE__*/_jsx(\"p\",{children:type.desc})]})]},type.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"strategic-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"objective\",children:[/*#__PURE__*/_jsx(Target,{className:\"form-icon\"}),\"Strategic Objective\"]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"objective\",value:objective,onChange:e=>setObjective(e.target.value),placeholder:\"Describe what you want to achieve...\",rows:\"2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"context-pills\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quick Context:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pills-container\",children:contextPills.map(pill=>{const Icon=pill.icon;return/*#__PURE__*/_jsxs(\"button\",{className:\"context-pill\",onClick:()=>addContextPill(pill.id),style:{borderColor:pill.color},children:[/*#__PURE__*/_jsx(Icon,{className:\"pill-icon\",style:{color:pill.color}}),pill.label]},pill.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group half\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"context\",children:[/*#__PURE__*/_jsx(Info,{className:\"form-icon\"}),\"Context\"]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"context\",value:context,onChange:e=>setContext(e.target.value),placeholder:\"Additional context, background, or situation...\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group half\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"constraints\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"form-icon\"}),\"Constraints\"]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"constraints\",value:constraints,onChange:e=>setConstraints(e.target.value),placeholder:\"Budget, timeline, or other limitations...\",rows:\"3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"timeline\",children:[/*#__PURE__*/_jsx(Clock,{className:\"form-icon\"}),\"Timeline\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"timeline\",value:timeline,onChange:e=>setTimeline(e.target.value),placeholder:\"e.g., 3 months, Q1 2025, etc.\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"error-icon\"}),error]}),/*#__PURE__*/_jsx(\"button\",{className:\"generate-btn\",onClick:generateStrategicPlan,disabled:isGenerating,children:isGenerating?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{className:\"loading-icon\"}),\"Generating Strategic Plan...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Sparkles,{className:\"btn-icon\"}),\"Generate Strategic Plan\"]})})]})]}),activeTab==='saved'&&/*#__PURE__*/_jsx(\"div\",{className:\"saved-plans-tab\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"saved-plans-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Saved Strategic Plans\"}),savedPlans.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(FileText,{className:\"empty-icon\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No saved plans yet\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('create'),className:\"create-first-btn\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"btn-icon\"}),\"Create Your First Plan\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"plans-grid\",children:savedPlans.map(plan=>{var _plan$objective;return/*#__PURE__*/_jsxs(\"div\",{className:\"plan-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"plan-card-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[(_plan$objective=plan.objective)===null||_plan$objective===void 0?void 0:_plan$objective.substring(0,80),\"...\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"plan-date\",children:new Date(plan.created_at).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"plan-card-actions\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>loadSavedPlan(plan),className:\"view-plan-btn\",children:[/*#__PURE__*/_jsx(Eye,{className:\"btn-icon\"}),\"View Plan\"]})})]},plan.id);})})]})}),activeTab==='history'&&/*#__PURE__*/_jsx(\"div\",{className:\"history-tab\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"history-content\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Plan History & Analytics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"coming-soon\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"coming-soon-icon\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Analytics Coming Soon\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Track plan performance, execution metrics, and strategic outcomes.\"})]})]})})]})]}),showPlanOverlay&&strategicPlan&&/*#__PURE__*/_jsx(\"div\",{className:\"strategic-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"strategic-overlay-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-title\",children:[/*#__PURE__*/_jsx(Brain,{className:\"title-icon\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Strategic Plan Generated\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:copyPlanToClipboard,className:\"action-btn\",children:[/*#__PURE__*/_jsx(Copy,{className:\"btn-icon\"}),\"Copy\"]}),/*#__PURE__*/_jsx(SaveToMemoryVaultButton,{title:\"Strategic Plan: \".concat(strategicPlan.objective),content:JSON.stringify(strategicPlan,null,2),category:\"strategic-planning\",tags:['strategy','planning',selectedPlanType]}),/*#__PURE__*/_jsx(\"button\",{onClick:executeStrategicPlan,className:\"execute-btn\",disabled:isExecuting,children:isExecuting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Loader,{className:\"loading-icon\"}),\"Executing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Play,{className:\"btn-icon\"}),\"Execute Plan\"]})}),/*#__PURE__*/_jsx(\"button\",{onClick:closePlanOverlay,className:\"close-btn\",children:/*#__PURE__*/_jsx(X,{className:\"btn-icon\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"plan-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Target,{className:\"section-icon\"}),\"Executive Summary\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"executive-summary\",children:strategicPlan.executive_summary})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"plan-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Lightbulb,{className:\"section-icon\"}),\"Strategic Pillars\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"pillars-container\",children:(_strategicPlan$strate2=strategicPlan.strategic_pillars)===null||_strategicPlan$strate2===void 0?void 0:_strategicPlan$strate2.map((pillar,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"pillar-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pillar-header\",onClick:()=>togglePillar(index),children:[/*#__PURE__*/_jsx(\"h4\",{children:pillar.title}),expandedPillars[index]?/*#__PURE__*/_jsx(ChevronDown,{}):/*#__PURE__*/_jsx(ChevronRight,{})]}),expandedPillars[index]&&/*#__PURE__*/_jsxs(\"div\",{className:\"pillar-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"pillar-description\",children:pillar.description}),pillar.actions&&/*#__PURE__*/_jsxs(\"div\",{className:\"pillar-actions\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Actions:\"}),/*#__PURE__*/_jsx(\"ul\",{children:pillar.actions.map((action,actionIndex)=>/*#__PURE__*/_jsx(\"li\",{children:action},actionIndex))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pillar-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"timeline\",children:[/*#__PURE__*/_jsx(Clock,{className:\"meta-icon\"}),pillar.timeline||'TBD']}),/*#__PURE__*/_jsxs(\"span\",{className:\"mcp\",children:[/*#__PURE__*/_jsx(Zap,{className:\"meta-icon\"}),pillar.mcp||'Content Generator']})]})]})]},index))})]}),strategicPlan.implementation_phases&&/*#__PURE__*/_jsxs(\"div\",{className:\"plan-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Calendar,{className:\"section-icon\"}),\"Implementation Phases\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"phases-timeline\",children:strategicPlan.implementation_phases.map((phase,index)=>{var _phase$tasks2;return/*#__PURE__*/_jsxs(\"div\",{className:\"phase-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"phase-marker\",children:index+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"phase-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:phase.phase}),/*#__PURE__*/_jsx(\"p\",{className:\"phase-duration\",children:phase.duration}),/*#__PURE__*/_jsx(\"ul\",{className:\"phase-tasks\",children:(_phase$tasks2=phase.tasks)===null||_phase$tasks2===void 0?void 0:_phase$tasks2.map((task,taskIndex)=>/*#__PURE__*/_jsx(\"li\",{children:task},taskIndex))})]})]},index);})})]}),strategicPlan.success_metrics&&/*#__PURE__*/_jsxs(\"div\",{className:\"plan-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(BarChart3,{className:\"section-icon\"}),\"Success Metrics\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"metrics-grid\",children:strategicPlan.success_metrics.map((metric,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"metric-item\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"metric-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:metric})]},index))})]}),strategicPlan.risk_mitigation&&/*#__PURE__*/_jsxs(\"div\",{className:\"plan-section\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[/*#__PURE__*/_jsx(Shield,{className:\"section-icon\"}),\"Risk Mitigation\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"risks-container\",children:strategicPlan.risk_mitigation.map((risk,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"risk-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"risk-title\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"risk-icon\"}),risk.risk]}),/*#__PURE__*/_jsx(\"div\",{className:\"risk-strategy\",children:risk.strategy})]},index))})]})]}),executionStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"execution-status\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"status-content\",children:[executionStatus.stage==='error'?/*#__PURE__*/_jsx(AlertCircle,{className:\"status-icon error\"}):/*#__PURE__*/_jsx(Loader,{className:\"status-icon loading\"}),/*#__PURE__*/_jsx(\"span\",{children:executionStatus.message})]})})]})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}