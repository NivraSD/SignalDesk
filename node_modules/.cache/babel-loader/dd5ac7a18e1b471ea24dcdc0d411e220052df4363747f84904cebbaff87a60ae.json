{"ast":null,"code":"import _objectSpread from\"/Users/jonathanliebowitz/Desktop/SignalDesk/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import nivDirectService from'../services/nivDirectService';import'../components/NivRealtimeChat.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NivDirect=()=>{const[messages,setMessages]=useState([]);const[artifacts,setArtifacts]=useState([]);const[selectedArtifact,setSelectedArtifact]=useState(null);const[loading,setLoading]=useState(false);const[inputValue,setInputValue]=useState('');const[apiKeyModalOpen,setApiKeyModalOpen]=useState(false);const[apiKeys,setApiKeys]=useState({claude:localStorage.getItem('claude_api_key')||'',openai:localStorage.getItem('openai_api_key')||''});useEffect(()=>{// Load conversation history on mount\nloadHistory();// Add welcome message\nsetMessages([{role:'assistant',content:\"Hi! I'm Niv, your PR strategist. I can help you create media lists, press releases, strategic plans, social content, key messaging, and FAQ documents. What would you like to work on today?\"}]);// Check if API keys are configured\nif(!apiKeys.claude&&!apiKeys.openai){setApiKeyModalOpen(true);}},[]);const loadHistory=async()=>{const history=await nivDirectService.loadConversationHistory();if(history.length>0){setMessages(history);}const savedArtifacts=await nivDirectService.loadArtifacts();setArtifacts(savedArtifacts);};const handleSendMessage=async()=>{if(!inputValue.trim()||loading)return;const userMessage=inputValue.trim();setInputValue('');setLoading(true);// Add user message to chat\nconst newMessages=[...messages,{role:'user',content:userMessage}];setMessages(newMessages);try{const response=await nivDirectService.processMessage(userMessage,messages);// Add AI response\nsetMessages([...newMessages,{role:'assistant',content:response.chatMessage}]);// Add artifact if created\nif(response.artifact){setArtifacts(prev=>[response.artifact,...prev]);}}catch(error){console.error('Error:',error);setMessages([...newMessages,{role:'assistant',content:\"Error: \".concat(error.message,\". Please configure your API keys in settings.\")}]);}finally{setLoading(false);}};const saveApiKeys=()=>{localStorage.setItem('claude_api_key',apiKeys.claude);localStorage.setItem('openai_api_key',apiKeys.openai);nivDirectService.claudeApiKey=apiKeys.claude;nivDirectService.openaiApiKey=apiKeys.openai;setApiKeyModalOpen(false);};const renderArtifact=artifact=>{if(!artifact)return null;const content=artifact.content;return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',height:'100%',overflowY:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px',borderBottom:'1px solid #e2e8f0',paddingBottom:'10px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0},children:artifact.title}),/*#__PURE__*/_jsxs(\"small\",{style:{color:'#64748b'},children:[\"Created: \",new Date(artifact.created).toLocaleString()]})]}),/*#__PURE__*/_jsx(\"div\",{style:{whiteSpace:'pre-wrap',lineHeight:'1.6'},children:typeof content==='string'?content:content.formatted||content.raw||JSON.stringify(content,null,2)}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px',padding:'10px',backgroundColor:'#f8fafc',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const blob=new Blob([JSON.stringify(artifact,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=\"\".concat(artifact.title.replace(/\\s+/g,'_'),\".json\");a.click();},style:{padding:'8px 16px',backgroundColor:'#3b82f6',color:'white',border:'none',borderRadius:'6px',cursor:'pointer',marginRight:'10px'},children:\"Export\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigator.clipboard.writeText(typeof content==='string'?content:JSON.stringify(content,null,2)),style:{padding:'8px 16px',backgroundColor:'#10b981',color:'white',border:'none',borderRadius:'6px',cursor:'pointer'},children:\"Copy to Clipboard\"})]})]});};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'100vh',backgroundColor:'#f8fafc'},children:[apiKeyModalOpen&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',padding:'30px',borderRadius:'12px',width:'500px',boxShadow:'0 20px 25px -5px rgba(0, 0, 0, 0.1)'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Configure API Keys\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#64748b',marginBottom:'20px'},children:\"Add at least one API key to use Niv. Keys are stored locally in your browser.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontWeight:'500'},children:\"Claude API Key (Recommended)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:apiKeys.claude,onChange:e=>setApiKeys(_objectSpread(_objectSpread({},apiKeys),{},{claude:e.target.value})),placeholder:\"sk-ant-...\",style:{width:'100%',padding:'10px',border:'1px solid #e2e8f0',borderRadius:'6px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{display:'block',marginBottom:'5px',fontWeight:'500'},children:\"OpenAI API Key (Fallback)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:apiKeys.openai,onChange:e=>setApiKeys(_objectSpread(_objectSpread({},apiKeys),{},{openai:e.target.value})),placeholder:\"sk-...\",style:{width:'100%',padding:'10px',border:'1px solid #e2e8f0',borderRadius:'6px'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setApiKeyModalOpen(false),style:{padding:'10px 20px',border:'1px solid #e2e8f0',backgroundColor:'white',borderRadius:'6px',cursor:'pointer'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveApiKeys,disabled:!apiKeys.claude&&!apiKeys.openai,style:{padding:'10px 20px',backgroundColor:apiKeys.claude||apiKeys.openai?'#3b82f6':'#cbd5e1',color:'white',border:'none',borderRadius:'6px',cursor:apiKeys.claude||apiKeys.openai?'pointer':'not-allowed'},children:\"Save Keys\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,display:'flex',flexDirection:'column',borderRight:'1px solid #e2e8f0'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',backgroundColor:'white',borderBottom:'1px solid #e2e8f0',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h1\",{style:{margin:0,fontSize:'24px'},children:\"Niv - PR Strategist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setApiKeyModalOpen(true),style:{padding:'8px 16px',backgroundColor:'#f1f5f9',border:'1px solid #e2e8f0',borderRadius:'6px',cursor:'pointer'},children:\"Settings\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,overflowY:'auto',padding:'20px'},children:[messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'16px',display:'flex',justifyContent:msg.role==='user'?'flex-end':'flex-start'},children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:'70%',padding:'12px 16px',borderRadius:'12px',backgroundColor:msg.role==='user'?'#3b82f6':'white',color:msg.role==='user'?'white':'#1e293b',border:msg.role==='assistant'?'1px solid #e2e8f0':'none',whiteSpace:'pre-wrap'},children:msg.content})},idx)),loading&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'flex-start'},children:/*#__PURE__*/_jsx(\"div\",{style:{padding:'12px 16px',borderRadius:'12px',backgroundColor:'white',border:'1px solid #e2e8f0'},children:\"Thinking...\"})})]}),/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',backgroundColor:'white',borderTop:'1px solid #e2e8f0'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValue,onChange:e=>setInputValue(e.target.value),onKeyPress:e=>e.key==='Enter'&&!e.shiftKey&&handleSendMessage(),placeholder:\"Ask Niv anything about PR strategy...\",disabled:loading,style:{flex:1,padding:'12px',border:'1px solid #e2e8f0',borderRadius:'8px',fontSize:'14px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:loading||!inputValue.trim(),style:{padding:'12px 24px',backgroundColor:loading||!inputValue.trim()?'#cbd5e1':'#3b82f6',color:'white',border:'none',borderRadius:'8px',cursor:loading||!inputValue.trim()?'not-allowed':'pointer'},children:\"Send\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'400px',backgroundColor:'white',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',borderBottom:'1px solid #e2e8f0'},children:/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'18px'},children:\"Artifacts\"})}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:'auto'},children:artifacts.length===0?/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center',color:'#64748b'},children:\"No artifacts yet. Ask Niv to create PR materials.\"}):/*#__PURE__*/_jsx(\"div\",{style:{padding:'10px'},children:artifacts.map(artifact=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedArtifact(artifact),style:{padding:'12px',marginBottom:'8px',backgroundColor:(selectedArtifact===null||selectedArtifact===void 0?void 0:selectedArtifact.id)===artifact.id?'#eff6ff':'#f8fafc',border:\"1px solid \".concat((selectedArtifact===null||selectedArtifact===void 0?void 0:selectedArtifact.id)===artifact.id?'#3b82f6':'#e2e8f0'),borderRadius:'8px',cursor:'pointer',transition:'all 0.2s'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'500',marginBottom:'4px'},children:artifact.title}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#64748b'},children:new Date(artifact.created).toLocaleTimeString()})]},artifact.id))})})]}),selectedArtifact&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'600px',backgroundColor:'white',borderLeft:'1px solid #e2e8f0',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:'1px solid #e2e8f0',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'18px'},children:\"Workspace\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedArtifact(null),style:{padding:'6px 12px',backgroundColor:'#f1f5f9',border:'none',borderRadius:'6px',cursor:'pointer'},children:\"Close\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:'auto'},children:renderArtifact(selectedArtifact)})]})]});};export default NivDirect;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}