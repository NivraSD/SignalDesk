{"ast":null,"code":"import React,{useState,useEffect}from'react';import intelligenceOrchestratorV4 from'../services/intelligenceOrchestratorV4';import cacheManager from'../utils/cacheManager';import'./IntelligenceHubV8.css';/**\n * Intelligence Hub V8 - Analysis-Driven, Not Visual-Driven\n * 6 Agreed Tabs: Executive, Competitive, Market, Regulatory, Media, Forward\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const IntelligenceHubV8=_ref=>{let{organization,onIntelligenceUpdate}=_ref;const[activeTab,setActiveTab]=useState('executive');const[analysis,setAnalysis]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// The 6 agreed tabs for proper intelligence analysis\nconst tabs=[{id:'executive',name:'Executive Summary',icon:'📊'},{id:'competitive',name:'Competitive',icon:'🎯'},{id:'market',name:'Market',icon:'📈'},{id:'regulatory',name:'Regulatory',icon:'⚖️'},{id:'media',name:'Media',icon:'📰'},{id:'forward',name:'Forward Looking',icon:'🔮'}];useEffect(()=>{if(organization){runIntelligenceAnalysis();}},[organization]);const runIntelligenceAnalysis=async()=>{setLoading(true);setError(null);try{var _completeProfile$stak,_completeProfile$stak2,_completeProfile$stak3,_completeProfile$stak4,_completeProfile$stak5,_completeProfile$stak6;const completeProfile=cacheManager.getCompleteProfile()||organization;// Ensure we have ALL stakeholders\nif(!completeProfile.stakeholders){completeProfile.stakeholders={competitors:completeProfile.competitors||organization.competitors||[],regulators:completeProfile.regulators||organization.regulators||[],media_outlets:completeProfile.media_outlets||organization.media_outlets||[],investors:completeProfile.investors||organization.investors||[],analysts:completeProfile.analysts||organization.analysts||[],activists:completeProfile.activists||organization.activists||[]};}console.log('🎯 Running intelligence analysis with stakeholders:',{competitors:((_completeProfile$stak=completeProfile.stakeholders.competitors)===null||_completeProfile$stak===void 0?void 0:_completeProfile$stak.length)||0,regulators:((_completeProfile$stak2=completeProfile.stakeholders.regulators)===null||_completeProfile$stak2===void 0?void 0:_completeProfile$stak2.length)||0,media:((_completeProfile$stak3=completeProfile.stakeholders.media_outlets)===null||_completeProfile$stak3===void 0?void 0:_completeProfile$stak3.length)||0,investors:((_completeProfile$stak4=completeProfile.stakeholders.investors)===null||_completeProfile$stak4===void 0?void 0:_completeProfile$stak4.length)||0,analysts:((_completeProfile$stak5=completeProfile.stakeholders.analysts)===null||_completeProfile$stak5===void 0?void 0:_completeProfile$stak5.length)||0,activists:((_completeProfile$stak6=completeProfile.stakeholders.activists)===null||_completeProfile$stak6===void 0?void 0:_completeProfile$stak6.length)||0});const result=await intelligenceOrchestratorV4.orchestrate(completeProfile);if(result.success){// Process the tabs data for display\nconst processedAnalysis=processAnalysisForDisplay(result);setAnalysis(processedAnalysis);// Pass to Opportunity Engine\nif(onIntelligenceUpdate){onIntelligenceUpdate(result);}// Cache the result\ncacheManager.saveSynthesis(result);}else{setError(result.error||'Analysis failed');}}catch(err){console.error('❌ Intelligence analysis error:',err);setError(err.message);}finally{setLoading(false);}};const processAnalysisForDisplay=result=>{// If we have synthesis tabs, use them\nif(result.tabs){return result.tabs;}// Otherwise, generate from analysis\nif(result.analysis){return{executive:generateExecutiveFromAnalysis(result.analysis),competitive:generateCompetitiveFromAnalysis(result.analysis),market:generateMarketFromAnalysis(result.analysis),regulatory:generateRegulatoryFromAnalysis(result.analysis),media:generateMediaFromAnalysis(result.analysis),forward:generateForwardFromAnalysis(result.analysis)};}return null;};const generateExecutiveFromAnalysis=analysis=>{var _analysis$signal_anal,_analysis$signal_anal2,_analysis$signal_anal3,_analysis$pattern_rec,_analysis$pattern_rec2,_analysis$response_st,_analysis$response_st2,_analysis$signal_anal4,_analysis$pattern_rec3;return{headline:\"\".concat(((_analysis$signal_anal=analysis.signal_analysis)===null||_analysis$signal_anal===void 0?void 0:_analysis$signal_anal.length)||0,\" critical signals detected\"),competitive_highlight:((_analysis$signal_anal2=analysis.signal_analysis)===null||_analysis$signal_anal2===void 0?void 0:(_analysis$signal_anal3=_analysis$signal_anal2[0])===null||_analysis$signal_anal3===void 0?void 0:_analysis$signal_anal3.signal)||'No competitive activity',market_highlight:((_analysis$pattern_rec=analysis.pattern_recognition)===null||_analysis$pattern_rec===void 0?void 0:(_analysis$pattern_rec2=_analysis$pattern_rec[0])===null||_analysis$pattern_rec2===void 0?void 0:_analysis$pattern_rec2.insight)||'Market stable',immediate_actions:((_analysis$response_st=analysis.response_strategy)===null||_analysis$response_st===void 0?void 0:(_analysis$response_st2=_analysis$response_st.immediate_24h)===null||_analysis$response_st2===void 0?void 0:_analysis$response_st2.actions)||[],statistics:{entities_tracked:6,// All stakeholder types\nactions_captured:((_analysis$signal_anal4=analysis.signal_analysis)===null||_analysis$signal_anal4===void 0?void 0:_analysis$signal_anal4.length)||0,topics_monitored:((_analysis$pattern_rec3=analysis.pattern_recognition)===null||_analysis$pattern_rec3===void 0?void 0:_analysis$pattern_rec3.length)||0}};};const generateCompetitiveFromAnalysis=analysis=>{var _analysis$signal_anal5,_analysis$strategic_i,_analysis$strategic_i2,_analysis$response_st3,_analysis$response_st4;return{competitor_actions:((_analysis$signal_anal5=analysis.signal_analysis)===null||_analysis$signal_anal5===void 0?void 0:_analysis$signal_anal5.filter(s=>{var _s$signal;return(_s$signal=s.signal)===null||_s$signal===void 0?void 0:_s$signal.toLowerCase().includes('compet');}))||[],competitive_gaps:[],pr_strategy:((_analysis$strategic_i=analysis.strategic_implications)===null||_analysis$strategic_i===void 0?void 0:(_analysis$strategic_i2=_analysis$strategic_i.competitive_position)===null||_analysis$strategic_i2===void 0?void 0:_analysis$strategic_i2.momentum)||'Monitor',key_messages:((_analysis$response_st3=analysis.response_strategy)===null||_analysis$response_st3===void 0?void 0:(_analysis$response_st4=_analysis$response_st3.immediate_24h)===null||_analysis$response_st4===void 0?void 0:_analysis$response_st4.messaging)||[]};};const generateMarketFromAnalysis=analysis=>{var _analysis$pattern_rec4,_analysis$strategic_i3,_analysis$strategic_i4;return{market_trends:((_analysis$pattern_rec4=analysis.pattern_recognition)===null||_analysis$pattern_rec4===void 0?void 0:_analysis$pattern_rec4.map(p=>{var _p$signals_connected;return{topic:p.type,trend:'emerging',mentions:((_p$signals_connected=p.signals_connected)===null||_p$signals_connected===void 0?void 0:_p$signals_connected.length)||0,sources:[]};}))||[],opportunities:((_analysis$strategic_i3=analysis.strategic_implications)===null||_analysis$strategic_i3===void 0?void 0:(_analysis$strategic_i4=_analysis$strategic_i3.market_narrative)===null||_analysis$strategic_i4===void 0?void 0:_analysis$strategic_i4.narrative_opportunities)||[]};};const generateRegulatoryFromAnalysis=analysis=>{var _analysis$elite_insig;return{regulatory_developments:[],compliance_requirements:[],regulatory_risks:((_analysis$elite_insig=analysis.elite_insights)===null||_analysis$elite_insig===void 0?void 0:_analysis$elite_insig.non_obvious_risks)||[],regulatory_stance:'Maintain compliance messaging'};};const generateMediaFromAnalysis=analysis=>{var _analysis$stakeholder,_analysis$stakeholder2,_analysis$stakeholder3,_analysis$stakeholder4,_analysis$stakeholder5;return{media_coverage:[],sentiment_trend:((_analysis$stakeholder=analysis.stakeholder_impact)===null||_analysis$stakeholder===void 0?void 0:(_analysis$stakeholder2=_analysis$stakeholder.media)===null||_analysis$stakeholder2===void 0?void 0:_analysis$stakeholder2.perception_shift)||'Neutral',journalist_interest:[],media_strategy:((_analysis$stakeholder3=analysis.stakeholder_impact)===null||_analysis$stakeholder3===void 0?void 0:(_analysis$stakeholder4=_analysis$stakeholder3.media)===null||_analysis$stakeholder4===void 0?void 0:(_analysis$stakeholder5=_analysis$stakeholder4.messaging_needs)===null||_analysis$stakeholder5===void 0?void 0:_analysis$stakeholder5.join(', '))||'Monitor coverage'};};const generateForwardFromAnalysis=analysis=>{var _analysis$pattern_rec5,_analysis$response_st5,_analysis$response_st6,_analysis$response_st7;return{predictions:((_analysis$pattern_rec5=analysis.pattern_recognition)===null||_analysis$pattern_rec5===void 0?void 0:_analysis$pattern_rec5.map(p=>{var _p$implications,_p$implications2;return{trigger:p.insight,immediate_impact:((_p$implications=p.implications)===null||_p$implications===void 0?void 0:_p$implications[0])||'Monitor',near_term:((_p$implications2=p.implications)===null||_p$implications2===void 0?void 0:_p$implications2[1])||'Prepare response',long_term:'Strategic adjustment needed'};}))||[],proactive_strategy:((_analysis$response_st5=analysis.response_strategy)===null||_analysis$response_st5===void 0?void 0:(_analysis$response_st6=_analysis$response_st5.short_term_7d)===null||_analysis$response_st6===void 0?void 0:(_analysis$response_st7=_analysis$response_st6.actions)===null||_analysis$response_st7===void 0?void 0:_analysis$response_st7.join(', '))||'Continue monitoring'};};const renderTab=()=>{if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Running intelligence analysis...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[\"Error: \",error]});if(!analysis)return/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"No analysis data available\"});switch(activeTab){case'executive':return renderExecutive();case'competitive':return renderCompetitive();case'market':return renderMarket();case'regulatory':return renderRegulatory();case'media':return renderMedia();case'forward':return renderForward();default:return/*#__PURE__*/_jsx(\"div\",{children:\"Select a tab\"});}};const renderExecutive=()=>{var _data$immediate_actio,_data$statistics,_data$statistics2,_data$statistics3;const data=analysis.executive;if(!data)return/*#__PURE__*/_jsx(\"div\",{children:\"No executive summary available\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"executive-analysis\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"headline\",children:data.headline}),/*#__PURE__*/_jsxs(\"div\",{className:\"key-highlights\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"highlight competitive\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Competitive:\"}),\" \",data.competitive_highlight]}),/*#__PURE__*/_jsxs(\"div\",{className:\"highlight market\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Market:\"}),\" \",data.market_highlight]})]}),((_data$immediate_actio=data.immediate_actions)===null||_data$immediate_actio===void 0?void 0:_data$immediate_actio.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"immediate-actions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Immediate Actions Required:\"}),/*#__PURE__*/_jsx(\"ul\",{children:data.immediate_actions.map((action,idx)=>/*#__PURE__*/_jsx(\"li\",{children:action},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"statistics\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:((_data$statistics=data.statistics)===null||_data$statistics===void 0?void 0:_data$statistics.entities_tracked)||0}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Entities Tracked\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:((_data$statistics2=data.statistics)===null||_data$statistics2===void 0?void 0:_data$statistics2.actions_captured)||0}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Actions Captured\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"stat-value\",children:((_data$statistics3=data.statistics)===null||_data$statistics3===void 0?void 0:_data$statistics3.topics_monitored)||0}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-label\",children:\"Topics Monitored\"})]})]})]});};const renderCompetitive=()=>{var _data$competitor_acti,_data$key_messages;const data=analysis.competitive;if(!data)return/*#__PURE__*/_jsx(\"div\",{children:\"No competitive analysis available\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"competitive-analysis\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Competitive Intelligence\"}),((_data$competitor_acti=data.competitor_actions)===null||_data$competitor_acti===void 0?void 0:_data$competitor_acti.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"competitor-actions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Competitor Actions:\"}),data.competitor_actions.map((action,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"action-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"action-entity\",children:action.entity}),/*#__PURE__*/_jsx(\"div\",{className:\"action-description\",children:action.action}),action.source&&/*#__PURE__*/_jsxs(\"div\",{className:\"action-source\",children:[\"Source: \",action.source]}),action.pr_response&&/*#__PURE__*/_jsxs(\"div\",{className:\"action-response\",children:[\"PR Response: \",action.pr_response]})]},idx))]}):/*#__PURE__*/_jsx(\"p\",{children:\"No recent competitor activity detected\"}),data.pr_strategy&&/*#__PURE__*/_jsxs(\"div\",{className:\"pr-strategy\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"PR Strategy:\"}),/*#__PURE__*/_jsx(\"p\",{children:data.pr_strategy})]}),((_data$key_messages=data.key_messages)===null||_data$key_messages===void 0?void 0:_data$key_messages.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"key-messages\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Key Messages:\"}),/*#__PURE__*/_jsx(\"ul\",{children:data.key_messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"li\",{children:msg},idx))})]})]});};const renderMarket=()=>{var _data$market_trends,_data$opportunities;const data=analysis.market;if(!data)return/*#__PURE__*/_jsx(\"div\",{children:\"No market analysis available\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"market-analysis\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Market Intelligence\"}),((_data$market_trends=data.market_trends)===null||_data$market_trends===void 0?void 0:_data$market_trends.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"market-trends\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Market Trends:\"}),data.market_trends.map((trend,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"trend-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"trend-topic\",children:trend.topic}),/*#__PURE__*/_jsxs(\"div\",{className:\"trend-status\",children:[\"Trend: \",trend.trend,\" | Mentions: \",trend.mentions]})]},idx))]}):/*#__PURE__*/_jsx(\"p\",{children:\"No significant market trends detected\"}),((_data$opportunities=data.opportunities)===null||_data$opportunities===void 0?void 0:_data$opportunities.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"market-opportunities\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Market Opportunities:\"}),/*#__PURE__*/_jsx(\"ul\",{children:data.opportunities.map((opp,idx)=>/*#__PURE__*/_jsx(\"li\",{children:opp},idx))})]})]});};const renderRegulatory=()=>{var _data$regulatory_deve,_data$regulatory_risk;const data=analysis.regulatory;if(!data)return/*#__PURE__*/_jsx(\"div\",{children:\"No regulatory analysis available\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"regulatory-analysis\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Regulatory Intelligence\"}),((_data$regulatory_deve=data.regulatory_developments)===null||_data$regulatory_deve===void 0?void 0:_data$regulatory_deve.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"regulatory-developments\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Developments:\"}),data.regulatory_developments.map((dev,idx)=>/*#__PURE__*/_jsx(\"div\",{className:\"development-item\",children:dev.development||dev},idx))]}):/*#__PURE__*/_jsx(\"p\",{children:\"No new regulatory developments\"}),((_data$regulatory_risk=data.regulatory_risks)===null||_data$regulatory_risk===void 0?void 0:_data$regulatory_risk.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"regulatory-risks\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Regulatory Risks:\"}),/*#__PURE__*/_jsx(\"ul\",{children:data.regulatory_risks.map((risk,idx)=>/*#__PURE__*/_jsx(\"li\",{children:risk},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"regulatory-stance\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recommended Stance:\"}),/*#__PURE__*/_jsx(\"p\",{children:data.regulatory_stance||'Maintain compliance messaging'})]})]});};const renderMedia=()=>{var _data$media_coverage;const data=analysis.media;if(!data)return/*#__PURE__*/_jsx(\"div\",{children:\"No media analysis available\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"media-analysis\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Media Intelligence\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-sentiment\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sentiment Trend:\"}),/*#__PURE__*/_jsx(\"p\",{children:data.sentiment_trend||'Neutral'})]}),((_data$media_coverage=data.media_coverage)===null||_data$media_coverage===void 0?void 0:_data$media_coverage.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"media-coverage\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Coverage:\"}),data.media_coverage.map((coverage,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"coverage-item\",children:[coverage.outlet,\": \",coverage.headline||coverage]},idx))]}):/*#__PURE__*/_jsx(\"p\",{children:\"No recent media coverage\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-strategy\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Media Strategy:\"}),/*#__PURE__*/_jsx(\"p\",{children:data.media_strategy||'Monitor media coverage'})]})]});};const renderForward=()=>{var _data$predictions;const data=analysis.forward;if(!data)return/*#__PURE__*/_jsx(\"div\",{children:\"No forward-looking analysis available\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"forward-analysis\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Forward Looking Intelligence\"}),((_data$predictions=data.predictions)===null||_data$predictions===void 0?void 0:_data$predictions.length)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"predictions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Cascade Predictions:\"}),data.predictions.map((pred,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"prediction-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"prediction-trigger\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"If:\"}),\" \",pred.trigger]}),/*#__PURE__*/_jsxs(\"div\",{className:\"prediction-impacts\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCD Immediate: \",pred.immediate_impact]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCC5 Near-term: \",pred.near_term]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83C\\uDFAF Long-term: \",pred.long_term]})]})]},idx))]}):/*#__PURE__*/_jsx(\"p\",{children:\"No cascade predictions available\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"proactive-strategy\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Proactive Strategy:\"}),/*#__PURE__*/_jsx(\"p\",{children:data.proactive_strategy||'Continue monitoring for opportunities'})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"intelligence-hub-v8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tab-navigation\",children:tabs.map(tab=>/*#__PURE__*/_jsxs(\"button\",{className:\"tab-button \".concat(activeTab===tab.id?'active':''),onClick:()=>setActiveTab(tab.id),children:[/*#__PURE__*/_jsx(\"span\",{className:\"tab-icon\",children:tab.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"tab-name\",children:tab.name})]},tab.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-content\",children:renderTab()}),/*#__PURE__*/_jsx(\"button\",{className:\"refresh-analysis\",onClick:runIntelligenceAnalysis,disabled:loading,children:\"\\uD83D\\uDD04 Refresh Analysis\"})]});};export default IntelligenceHubV8;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}