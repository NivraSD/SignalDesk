{"ast":null,"code":"import React,{useState,useCallback}from'react';import{Bot,FileText,Users,TrendingUp,AlertTriangle,Zap,BarChart3,ChevronRight}from'lucide-react';import NivStrategicOrchestrator from'../NivStrategicOrchestrator';import WorkspaceContainer from'./WorkspaceContainer';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NivFirstLayout=_ref=>{let{user,organization}=_ref;const[messages,setMessages]=useState([]);const[generatedItems,setGeneratedItems]=useState([]);const[activeWorkspace,setActiveWorkspace]=useState(null);// Handle when Niv creates something\nconst handleWorkCardCreate=useCallback(workCard=>{console.log('ðŸŽ¯ NivFirstLayout: handleWorkCardCreate called with:',workCard);// FIXED: Use unified structure - workCard now has flat structure\nconst newItem={id:Date.now().toString(),type:workCard.type,title:workCard.title||'Generated Content',description:workCard.description||'',// Store everything at root level to match workspace expectations\ngeneratedContent:workCard.generatedContent,details:workCard.details,timestamp:new Date().toISOString(),status:'ready'};console.log('ðŸŽ¯ NivFirstLayout: Adding new item to sidebar:',newItem);console.log('ðŸŽ¯ NivFirstLayout: GeneratedContent structure:',newItem.generatedContent);setGeneratedItems(prev=>{console.log('ðŸŽ¯ NivFirstLayout: Previous items:',prev);const updated=[...prev,newItem];console.log('ðŸŽ¯ NivFirstLayout: Updated items:',updated);return updated;});},[]);// Get icon for item type\nconst getItemIcon=type=>{const icons={'media-list':Users,'content-draft':FileText,'strategy-plan':TrendingUp,'crisis-response':AlertTriangle,'opportunity':Zap,'analytics':BarChart3,'key-messaging':FileText,'faq-document':FileText,'social-content':FileText};return icons[type]||FileText;};// Get workspace type from item type\nconst getWorkspaceFromType=type=>{const mapping={'media-list':'media-intelligence','content-draft':'content-generator','strategy-plan':'strategic-planning','crisis-response':'crisis-command','opportunity':'opportunity-engine','analytics':'analytics','key-messaging':'content-generator','faq-document':'content-generator','social-content':'content-generator'};return mapping[type]||'content-generator';};// Handle opening workspace from sidebar\nconst handleOpenWorkspace=useCallback(item=>{console.log('ðŸŽ¯ Opening workspace with item:',item);// FIXED: Pass unified structure - everything is at root level now\nconst workspaceContext={title:item.title,description:item.description,generatedContent:item.generatedContent,details:item.details};console.log('ðŸŽ¯ Workspace context being passed:',workspaceContext);console.log('ðŸŽ¯ GeneratedContent in context:',workspaceContext.generatedContent);setActiveWorkspace({type:getWorkspaceFromType(item.type),context:workspaceContext,nivAssistance:true});},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',height:'100vh',background:'#0a0a0f',color:'#e0e0e0',fontFamily:'-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',overflow:'hidden'},children:[activeWorkspace?/*#__PURE__*/// Workspace View\n_jsx(WorkspaceContainer,{workspace:activeWorkspace,nivContext:{},onClose:()=>setActiveWorkspace(null),onNivRequest:request=>{console.log('Niv assistance requested:',request);}}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(NivStrategicOrchestrator,{messages:messages,setMessages:setMessages,onWorkCardCreate:handleWorkCardCreate,onFeatureOpen:()=>{},onContentGenerate:()=>{},onStrategicPlanGenerate:()=>{}}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'30%',background:'rgba(15, 15, 30, 0.95)',borderLeft:'1px solid rgba(139, 92, 246, 0.1)',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',borderBottom:'1px solid rgba(139, 92, 246, 0.1)'},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:0,fontSize:'16px',fontWeight:'600',color:'#fff'},children:\"Generated by Niv\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#9ca3af',marginTop:'4px'},children:[generatedItems.length,\" items ready to work on\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{flex:1,overflowY:'auto',padding:'12px'},children:generatedItems.length===0?/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',color:'#6b7280',fontSize:'14px',marginTop:'40px'},children:\"Ask Niv to create materials and they'll appear here\"}):generatedItems.map(item=>{const Icon=getItemIcon(item.type);return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>handleOpenWorkspace(item),style:{background:'rgba(30, 30, 45, 0.4)',border:'1px solid rgba(139, 92, 246, 0.2)',borderRadius:'10px',padding:'14px',marginBottom:'10px',cursor:'pointer',transition:'all 0.2s'},onMouseEnter:e=>{e.currentTarget.style.background='rgba(139, 92, 246, 0.1)';e.currentTarget.style.borderColor='rgba(139, 92, 246, 0.4)';e.currentTarget.style.transform='translateX(-4px)';},onMouseLeave:e=>{e.currentTarget.style.background='rgba(30, 30, 45, 0.4)';e.currentTarget.style.borderColor='rgba(139, 92, 246, 0.2)';e.currentTarget.style.transform='translateX(0)';},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'12px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'36px',height:'36px',background:\"linear-gradient(135deg, #6366f1, #8b5cf6)\",borderRadius:'8px',display:'flex',alignItems:'center',justifyContent:'center',flexShrink:0},children:/*#__PURE__*/_jsx(Icon,{size:18,color:\"white\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'13px',fontWeight:'600',color:'#fff',marginBottom:'4px'},children:item.title}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#9ca3af'},children:new Date(item.timestamp).toLocaleTimeString()})]}),/*#__PURE__*/_jsx(ChevronRight,{size:16,color:\"#8b5cf6\"})]}),item.status==='ready'&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px',padding:'4px 8px',background:'rgba(16, 185, 129, 0.1)',color:'#10b981',borderRadius:'4px',fontSize:'10px',display:'inline-block'},children:\"Ready to edit\"})]},item.id);})})]})]}),/*#__PURE__*/_jsx(\"style\",{children:\"\\n        @keyframes slideIn {\\n          from {\\n            opacity: 0;\\n            transform: translateY(20px);\\n          }\\n          to {\\n            opacity: 1;\\n            transform: translateY(0);\\n          }\\n        }\\n      \"})]});};export default NivFirstLayout;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}